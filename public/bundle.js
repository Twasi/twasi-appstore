!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var i,o=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"add",song:t}}},s={topic:"twasi-songrequests/events",scope:"action",action:{type:"queue"}},r=function(t){return void 0===t&&(t=!1),{topic:"twasi-songrequests/events",scope:"action",action:{type:t?"skip":"next"}}},u=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},a=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},c=function(){function t(t,e,n){this.api=t,this.jwt=e,this.statusListener=n,this.events=new Map,this.connect()}return t.prototype.connect=function(){var t=this;setTimeout((function(){t.connect()}),3e3),this.client&&this.client.readyState===this.client.OPEN||(this.client=new WebSocket(this.api),this.client.onerror=function(){t.statusListener.statusChanged(i.DISCONNECTED)},this.client.onopen=function(){return t.authorize()},this.client.onclose=function(){t.statusListener.statusChanged(i.DISCONNECTED)},this.requests=new l(this.client,this.events))},t.prototype.authorize=function(){return u(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return[4,this.requests.request({topic:"auth",scope:"action",action:{type:"JWT_TOKEN",token:this.jwt}})];case 1:return"success"!==(t=n.sent()).status?[3,3]:(e=t.result.user.twitchId,[4,this.requests.request({topic:"twasi-songrequests/events",scope:"subscribe",config:{channel:e}})]);case 2:t=n.sent(),n.label=3;case 3:return this.statusListener.statusChanged("success"===t.status?i.CONNECTED:i.UNAUTHORIZED),[2]}}))}))},t.prototype.on=function(t,e){this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e])},t.prototype.add=function(t){return u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.requests.request(o(t))];case 1:return[2,e.sent()]}}))}))},t.prototype.getQueue=function(){return u(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.requests.request(s)];case 1:return[2,t.sent().result]}}))}))},t.prototype.next=function(t){return void 0===t&&(t=!1),u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.requests.request(r(t))];case 1:return[2,e.sent()]}}))}))},t}();!function(t){t[t.CONNECTED=0]="CONNECTED",t[t.DISCONNECTED=1]="DISCONNECTED",t[t.UNAUTHORIZED=2]="UNAUTHORIZED"}(i||(i={}));var h,p,l=function(){function t(t,e){var n=this;this.count=0,this.pending=new Map,this.events=new Map,e&&(this.events=e),this.client=t,this.client.onmessage=function(t){var e=JSON.parse(t.data);e.ref&&n.pending.has(e.ref)?(n.pending.get(e.ref)(e.result),n.pending.delete(e.ref)):e.event&&n.events.has(e.event)&&n.events.get(e.event).forEach((function(t){t(e.details,new Date(e.timeStamp))}))}}return t.prototype.request=function(t,e){var n=this;return void 0===e&&(e=3e3),t.ref||(t.ref=this.newRef()),new Promise((function(i,o){n.pending.set(t.ref,i),n.client.send(JSON.stringify(t)),setTimeout((function(){n.pending.has(t.ref)&&(n.pending.delete(t.ref),o("Timed Out"))}),e)}))},t.prototype.on=function(t,e){this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e])},t.prototype.newRef=function(){return(this.count++).toString()},t}(),f={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"get"}},d={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"init"}},y=function(t){return{topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"set",code:t}}},v={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"refresh"}},b={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"remove"}},w=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},g=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},m=function(){function t(t,e){var n=this;this.token=null,this.expires=null,this.api=t,this.listener=e;window.addEventListener("message",(function(t){return w(n,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return"string"!=typeof t.data?[2]:t.data.startsWith("code:")?[4,this.set(t.data.substr("code:".length))]:[2];case 1:return e.sent(),this.win.postMessage("close","*"),[2]}}))}))}),!1)}return t.prototype.get=function(){return w(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(f)];case 1:return t=e.sent(),this.handle(t.token?t:null),[2]}}))}))},t.prototype.init=function(){return w(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(d)];case 1:return t=e.sent(),this.win=window.open(t.result.uri,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"),[2]}}))}))},t.prototype.set=function(t){return w(this,void 0,void 0,(function(){var e;return g(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(y(t))];case 1:return e=n.sent(),this.handle(e),[2]}}))}))},t.prototype.refresh=function(){return w(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(v)];case 1:return t=e.sent(),this.handle(t.token?t:null),[2]}}))}))},t.prototype.remove=function(){return w(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(b)];case 1:if("success"!==t.sent().status)throw"An error occured";return[2]}}))}))},t.prototype.handle=function(t){var e=this;t?(this.token=t.token,this.expires=new Date(t.expires),this.listener.spotifyAuthenticated(!0,t.token),setTimeout((function(){return w(e,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return this.token!==t.token?[2]:[4,this.refresh()];case 1:return e.sent(),[2]}}))}))}),this.expires.getTime()-Date.now())):this.listener.spotifyAuthenticated(!1)},t}(),P=function(t){this.events=t},q=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},S=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},E=function(t){function e(e,n){var i=t.call(this,e)||this;return i.events=e,i.api=n,i.playing=!1,i}return q(e,t),e.prototype.init=function(t){var e=this;this.player&&this.player.disconnect(),this.token=t;var n=new Spotify.Player({name:"Twasi-Panel",getOAuthToken:function(e){e(t)}});n.addListener("initialization_error",(function(t){var e=t.message;window.TSRI.reports.spotifyReports.push({type:"initialization_error",message:e})})),n.addListener("authentication_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return S(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"authentication_error",message:n}),[2]}))}))})),n.addListener("account_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return S(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"account_error",message:n}),[2]}))}))})),n.addListener("playback_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return S(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"playback_error",message:n}),[2]}))}))})),n.addListener("player_state_changed",(function(t){return k(e,void 0,void 0,(function(){return S(this,(function(e){return t?(this.playing=!t.paused,t.position&&t.duration?this.events.onPositionChange(t.position,t.duration):t.paused||this.events.onPositionChange(0,this.song.duration),t.paused?this.events.onPause():this.events.onPlay(this.song),t.paused&&t.disallows.resuming&&t.position&&t.duration&&t.position/t.duration>.98&&this.events.onNext(),[2]):[2]}))}))})),n.addListener("ready",(function(t){var n=t.device_id;return k(e,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return this.id=n,[4,this.setSpotifyPlayerVolume()];case 1:return t.sent(),[2]}}))}))})),n.addListener("not_ready",(function(t){t.device_id;return k(e,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,window.TSRI.spotifyAuth.refresh()];case 1:return t.sent(),[2]}}))}))})),this.player=n,n.connect()},e.prototype.pause=function(){this.player.pause()},e.prototype.play=function(t,e){return k(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return this.song&&this.song.uri===t.uri?(this.player.resume(),[3,3]):[3,1];case 1:return this.song=t,[4,fetch("https://api.spotify.com/v1/me/player/play?device_id="+this.id,{method:"PUT",body:JSON.stringify({uris:[t.uri],position_ms:0}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}})];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.setSpotifyPlayerVolume=function(){return k(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request((e=this.volume,n=this.id,i=this.token,{topic:"twasi-songrequests/events",scope:"action",action:{type:"setVolume",volume:e,deviceId:n,token:i}}))];case 1:return[2,t.sent()]}var e,n,i}))}))},e.prototype.seek=function(t){this.player.seek(this.song.duration*t)},e.prototype.setVolume=function(t,e){return k(this,void 0,void 0,(function(){return S(this,(function(n){e-=.5,t=t/10*5,(t+=(t+.5)*(e*=-2)*.5)<0&&(t=0),this.volume=t;try{this.player.setVolume(t),this.setSpotifyPlayerVolume()}catch(t){console.log(t)}return[2]}))}))},e.prototype.resume=function(){this.player.resume()},e}(P),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),x=function(t){function e(e,n,i){var o=t.call(this,e)||this;if(!i)throw"API_NOT_READY";o.player=new YT.Player("youtube-player",{events:{onStateChange:function(t){return o.onUpdate(t)}}});var s=function(){o.setPos(),setTimeout(s,500)};return s(),o}return T(e,t),e.prototype.setPos=function(){try{this.events.onPositionChange(1e3*this.player.getCurrentTime(),1e3*this.player.getDuration())}catch(t){}},e.prototype.onUpdate=function(t){1===t.data?this.events.onPlay():0===t.data?this.events.onNext():this.events.onPause(),this.setPos()},e.prototype.pause=function(){this.player.pauseVideo()},e.prototype.play=function(t,e){this.player.loadVideoById(t.uri)},e.prototype.seek=function(t){this.player.seekTo(this.player.getDuration()*t)},e.prototype.setVolume=function(t,e){e-=.5,t=t/10*5,(t+=(t+.5)*(e*=2)*.5)<0&&(t=0);try{this.player.setVolume(100*t)}catch(t){}},e.prototype.resume=function(){this.player.playVideo()},e}(P);!function(t){t[t.NONE=0]="NONE",t[t.SPOTIFY=1]="SPOTIFY",t[t.YOUTUBE=2]="YOUTUBE"}(p||(p={}));var O={topic:"twasi-songrequests/events",scope:"action",action:{type:"back"}},A=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"settings",settings:t}}},_=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},N=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},C=[{song:{name:"Thüringer Klöße - Radio Version",artist:"Fritz",cover:"https://i.scdn.co/image/ab67616d0000b273ddeb565d7d2261a769ea5d03",spotify:"spotify:track:6x9SYGliCfaIDf1GGpgceV",youtube:"qJe3cdM7f1c"},duration:4e3,startAt:{youtube:2e4,spotify:2e4}},{song:{name:"Later Bitches",artist:"The Price Karma",cover:"https://i.scdn.co/image/ab67616d0000b2737d40694c21bdedb87d6ba976",spotify:"spotify:track:6x9SYGliCfaIDf1GGpgceV",youtube:"qJe3cdM7f1c"},duration:4e3,startAt:{youtube:2e4,spotify:2e4}},{song:{name:"Shooting Stars",artist:"Bag Raiders",cover:"https://i.scdn.co/image/ae14de5997fea355757a17c26fb0e26b76fc8f86",spotify:"spotify:track:0UeYCHOETPfai02uskjJ3x",youtube:"feA64wXhbjo"},duration:4e3,startAt:{youtube:2e4,spotify:2e4}},{song:{name:"We Are Number One (Remix)",artist:"SayMaxWell",cover:"https://i.scdn.co/image/ab67616d0000b2734c906c8ced99f4861ebc0b64",spotify:"spotify:track:4C64ZXG24vRJ4lwkxCA24G",youtube:"Lr1FsM1EhMI"},duration:4e3,startAt:{youtube:2e4,spotify:2e4}}],I=function(){function t(t,e,n,i){this.events=t,this.spotify=e,this.youtube=n,this.master=i}return t.prototype.setEvents=function(t){this.events=t},t.prototype.startPreview=function(){return _(this,void 0,void 0,(function(){var e,n=this;return N(this,(function(i){switch(i.label){case 0:return this.master.shouldPlay?[2]:(e=t.getRandomPreview(),[4,this.spotify.play({uri:e.song.spotify})]);case 1:return i.sent(),setTimeout((function(){n.spotify.pause(),n.youtube.play({uri:e.song.youtube},!0),setTimeout((function(){n.youtube.pause()}),e.duration)}),e.duration),[2]}}))}))},t.getRandomPreview=function(){return C[Math.floor(Math.random()*C.length)]},t}(),U=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},R=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},D=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,u=s.length;r<u;r++,o++)i[o]=s[r];return i},Y=function(){function t(t,e,n){var i=this;this.api=t,this.frontendEvents=e,this.song=null,this.queue=[],this._history=[],this.firstPlayback=!0,this.shouldPlay=!1,this.posPredicter=new j((function(t){return i.frontendEvents.position(t)})),this.spotify=new E(this.playbackProviderEvents(p.SPOTIFY),t),this.youtube=new x(this.playbackProviderEvents(p.YOUTUBE),t,n.youtubeApi),t.on("queue",(function(t){return i.setQueue(t.queue,t.history,i.shouldPlay)})),this.preview=new I(null,this.spotify,this.youtube,this)}return t.prototype.setEvents=function(t){this.frontendEvents=t,this.shouldPlay?t.play():t.pause();var e=D(this.queue);t.queueUpdate(e,this._history),t.song(this.song),t.settingsUpdate(this.settings)},t.prototype.play=function(t,e){return U(this,void 0,void 0,(function(){var n;return R(this,(function(i){switch(i.label){case 0:return this.shouldPlay=!0,e?(this.song&&this.pause(),this.song=e,(n=this.getController(e.provider)).setVolume(this.settings.volume,this.settings.volumeBalance),n.play(e,t),[3,4]):[3,1];case 1:return this.song?(this.firstPlayback||0===this.posPredicter.prediction?(this.firstPlayback=!1,this.play(!0,this.song)):this.getController(this.song.provider).resume(),[3,4]):[3,2];case 2:return[4,this.next()];case 3:i.sent(),i.label=4;case 4:return this.frontendEvents.song(this.song),this.shouldPlay=!0,[2]}}))}))},t.prototype.pause=function(){this.shouldPlay=!0,this.song&&this.getController(this.song.provider).pause()},t.prototype.getController=function(t){switch(t){case p.NONE:default:return null;case p.SPOTIFY:return this.spotify;case p.YOUTUBE:return this.youtube}},t.prototype.seek=function(t){this.song&&this.getController(this.song.provider).seek(t)},t.prototype.localAdd=function(t){this.queue.push(t),this.frontendEvents.queueUpdate(this.queue,this._history),this.posPredicter.predict||this.play(!1,void 0)},t.prototype.setQueue=function(t,e,n){if(void 0===n&&(n=!0),t.length){var i=t[0];n&&(!this.song||this.song&&this.song.uri!==i.uri)?this.play(!0,i):(this.frontendEvents.song(t[0]),this.song=i)}else this.posPredicter.resetPosition(),this.song&&this.pause(),this.song=null,this.frontendEvents.song(null),this.posPredicter.resetPosition();this.queue=t,this._history=e,this.frontendEvents.queueUpdate(this.queue,this._history)},t.prototype.localNext=function(){this.posPredicter.resetPosition(),this.song&&(this.pause(),this._history.unshift(this.song)),this.queue.length?(this.play(!0,this.queue[0]),this.queue.shift()):(this.song=null,this.frontendEvents.song(null),this.posPredicter.resetPosition()),this.frontendEvents.queueUpdate(this.queue,this._history)},t.prototype.back=function(){return U(this,void 0,void 0,(function(){var t;return R(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(O)];case 1:if("success"!==(t=e.sent()).status)throw t.message;return[2]}}))}))},t.prototype.next=function(){return U(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(r(!1))];case 1:return t.sent(),[2]}}))}))},t.prototype.skip=function(){return U(this,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(r(!0))];case 1:return t.sent(),[2]}}))}))},t.prototype.apiAdd=function(t){return U(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(o(t))];case 1:return e.sent(),[2]}}))}))},t.prototype.playbackProviderEvents=function(t){var e=this;return{onPause:function(){e.song&&![p.NONE,t].includes(e.song.provider)||(e.posPredicter.predict=!1,e.frontendEvents.stop())},onPlay:function(n){e.song&&e.song.provider===t&&(e.posPredicter.predict=!0,e.frontendEvents.play())},onPositionChange:function(n,i){e.song&&e.song.provider===t&&e.posPredicter.setPosition(n,i)},onNext:function(){return e.next()}}},t.prototype.loadQueue=function(t){return void 0===t&&(t=!0),U(this,void 0,void 0,(function(){var e;return R(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(s)];case 1:return e=n.sent().result,this.setQueue(e.queue,e.history,t),[2]}}))}))},t.prototype.setVolume=function(t){return U(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.setSettings({volume:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.setVolumeBalance=function(t){return U(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,this.setSettings({volumeBalance:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.setSettings=function(t){return U(this,void 0,void 0,(function(){var e;return R(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(A(t))];case 1:return"success"===(e=n.sent()).status&&this.handleSettings(e.result),[2,e]}}))}))},t.prototype.handleSettings=function(t){this.frontendEvents.settingsUpdate(t),this.spotify.setVolume(t.volume,t.volumeBalance),this.youtube.setVolume(t.volume,t.volumeBalance),this.settings=t},t}(),j=function(){function t(t){var e=this;this.callback=t,this.predict=!1,this.lastPosition=Date.now(),this.duration=0,this.position=0,this.prediction=0;var n=function(){e.predictNow(),setTimeout(n,500)};n()}return t.prototype.setPosition=function(t,e){this.lastPosition=Date.now(),this.position=t,this.duration=e,this.predictNow()},t.prototype.resetPosition=function(){this.setPosition(0,0)},t.prototype.predictNow=function(){var t;0!==this.duration||0!==this.position?(this.predict&&(t=(this.position+(Date.now()-this.lastPosition))/this.duration),"number"==typeof t&&(this.prediction=t>1?1:t),this.callback(this.prediction)):this.callback(0)},t}(),V=function(t,e){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"search",provider:p.SPOTIFY,token:t,query:e}}},B=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"search",provider:p.YOUTUBE,query:t}}},G=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},L=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},M=function(){function t(t,e){this.api=t,this.spotify=e}return t.prototype.onSpotify=function(t){return G(this,void 0,void 0,(function(){var e;return L(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(V(this.spotify.token,t))];case 1:if("success"===(e=n.sent()).status)return[2,e.result];throw"An error occurred."}}))}))},t.prototype.onYouTube=function(t){return G(this,void 0,void 0,(function(){var e;return L(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(B(t),6e3)];case 1:if("success"===(e=n.sent()).status)return[2,e.result];throw"An error occurred."}}))}))},t}();n.d(e,"a",(function(){return J}));var z=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},F=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},J=function(){function t(){this.status=W,this.reports={spotifyReports:[]},this.authenticated=!1}return t.prototype.init=function(t,e,n){var o=this;if(this.events=n,this.API)return this.playback.setEvents(n),n.enableSpotifyAuth(!this.authenticated),void n.initialized(this.status);this.API=new c(e,t,{statusChanged:function(t){return z(o,void 0,void 0,(function(){return F(this,(function(e){switch(e.label){case 0:return this.status.api=0===t,this.e().initialized(this.status),this.status.api?[4,this.spotifyAuth.get()]:[3,2];case 1:e.sent(),e.label=2;case 2:return t!==i.CONNECTED?[3,4]:(this.loadQueue(!1),[4,this.playback.setSettings()]);case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}}),this.playback=new Y(this.API,this.events,this.status),this.search=new M(this.API,this.playback.spotify),this.spotifyAuth=new m(this.API,{statusChanged:this.spotifyStatus,spotifyAuthenticated:function(t,e){o.authenticated=t,o.e().enableSpotifyAuth(!t),e&&o.playback.spotify.init(e)}}),this.e().initialized(this.status)},t.prototype.spotifyStatus=function(t){this.status.spotify=t,this.e().initialized(this.status)},t.prototype.youtubeApiReady=function(){this.status.youtubeApi=!0,this.e().initialized(this.status)},t.prototype.spotifyApiReady=function(){this.status.spotifyApi=!0,this.e().initialized(this.status)},t.prototype.e=function(){return this.events?this.events:Q},t.prototype.loadQueue=function(t){return void 0===t&&(t=!0),z(this,void 0,void 0,(function(){return F(this,(function(e){switch(e.label){case 0:return[4,this.playback.loadQueue(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.report=function(t){return z(this,void 0,void 0,(function(){return F(this,(function(e){switch(e.label){case 0:return this.reports.reason=t,[4,this.API.requests.request((n=this.reports,{topic:"twasi-songrequests/events",scope:"action",action:{type:"report",message:n.message,report:n}}))];case 1:return e.sent(),[2]}var n}))}))},t}(),Q={settingsUpdate:function(t){},queueUpdate:function(t){},enableSpotifyAuth:function(t){console.log("Spotify Authentication is now %s.",t?"enabled":"disabled")},initialized:function(t){},pause:function(){console.log("PAUSE")},play:function(){console.log("PLAY")},position:function(t){console.log("POS: "+t)},song:function(t){console.log("SONG: "+t.name)},stop:function(){console.log("STOP")}},W={api:!1,spotifyApi:!1,spotify:!1,youtubeApi:!1,youtube:!1}},function(t,e,n){"use strict";n.r(e),function(t){var e=new(n(0).a),i=window;i.TSRI=e,i.onSpotifyWebPlaybackSDKReady=function(){return e.spotifyApiReady()},(window||t).onYouTubeIframeAPIReady=function(){return e.youtubeApiReady()},n(3)}.call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){if(!window.YT)var n={loading:0,loaded:0};if(!window.YTConfig)var i={host:"http://www.youtube.com"};n.loading||(n.loading=1,function(){var t=[];n.ready=function(e){n.loaded?e():t.push(e)},window.onYTReady=function(){n.loaded=1;for(var e=0;e<t.length;e++)try{t[e]()}catch(t){}},n.setConfig=function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])};var e=document.createElement("script");e.type="text/javascript",e.id="www-widgetapi-script",e.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflUFVyEP/www-widgetapi.js",e.async=!0;var o=document.currentScript;if(o){var s=o.nonce||o.getAttribute("nonce");s&&e.setAttribute("nonce",s)}var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQWRkUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc29uZ3JlcXVlc3RzL0dldFF1ZXVlUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9OZXh0UmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1BsYXliYWNrUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzL0dldFJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzL0luaXRSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9TZXRSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9SZWZyZXNoUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvUmVtb3ZlUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvc3BvdGlmeS9TcG90aWZ5QXV0aGVudGljYXRpb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9wbGF5YmFjay9QbGF5YmFja1NsYXZlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvcGxheWJhY2svU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL290aGVyL1NldFZvbHVtZVJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL3BsYXliYWNrL1lvdVR1YmVQbGF5YmFja0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQmFja1JlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9vdGhlci9TZXR0aW5nc1JlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL3BsYXliYWNrL3BsYXliYWNrcHJldmlldy9QbGF5YmFja1ByZXZpZXdDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9wbGF5YmFjay9QbGF5YmFja01hc3RlckNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zZWFyY2gvU3BvdGlmeVNlYXJjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3NlYXJjaC9Zb3VUdWJlU2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvU2VhcmNoQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvVFNSSUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9vdGhlci9SZXBvcnRSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9UU1JJLnRzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vcHJvdmlkZXJzL3lvdXR1YmUveW91dHViZS1pZnJhbWVfYXBpLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQVBJQ29ubmVjdGlvblN0YXR1cyIsIkFkZFJlcXVlc3QiLCJzb25nIiwidG9waWMiLCJzY29wZSIsImFjdGlvbiIsInR5cGUiLCJHZXRRdWV1ZVJlcXVlc3QiLCJOZXh0UmVxdWVzdCIsInNraXAiLCJhcGkiLCJqd3QiLCJzdGF0dXNMaXN0ZW5lciIsImV2ZW50cyIsIk1hcCIsInRoaXMiLCJjb25uZWN0Iiwic2V0VGltZW91dCIsImNsaWVudCIsInJlYWR5U3RhdGUiLCJPUEVOIiwiV2ViU29ja2V0Iiwib25lcnJvciIsInN0YXR1c0NoYW5nZWQiLCJESVNDT05ORUNURUQiLCJvbm9wZW4iLCJhdXRob3JpemUiLCJvbmNsb3NlIiwicmVxdWVzdHMiLCJBUElSZXF1ZXN0TWFuYWdlciIsInJlcXVlc3QiLCJ0b2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwiY2hhbm5lbCIsInJlc3VsdCIsInVzZXIiLCJ0d2l0Y2hJZCIsImNvbmZpZyIsIkNPTk5FQ1RFRCIsIlVOQVVUSE9SSVpFRCIsIm9uIiwiZXZlbnQiLCJoYW5kbGVyIiwiaGFzIiwicHVzaCIsInNldCIsImFkZCIsImdldFF1ZXVlIiwibmV4dCIsIlBsYXliYWNrUHJvdmlkZXIiLCJjb3VudCIsInBlbmRpbmciLCJvbm1lc3NhZ2UiLCJtc2ciLCJvYiIsIkpTT04iLCJwYXJzZSIsImRhdGEiLCJyZWYiLCJkZWxldGUiLCJmb3JFYWNoIiwiZGV0YWlscyIsIkRhdGUiLCJ0aW1lU3RhbXAiLCJyZXEiLCJ0aW1lb3V0IiwibmV3UmVmIiwiUHJvbWlzZSIsInJlcyIsInJlaiIsInNlbmQiLCJzdHJpbmdpZnkiLCJ0b1N0cmluZyIsIkdldFJlcXVlc3QiLCJJbml0UmVxdWVzdCIsIlNldFJlcXVlc3QiLCJjb2RlIiwiUmVmcmVzaFJlcXVlc3QiLCJSZW1vdmVSZXF1ZXN0IiwibGlzdGVuZXIiLCJleHBpcmVzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXJ0c1dpdGgiLCJzdWJzdHIiLCJsZW5ndGgiLCJ3aW4iLCJwb3N0TWVzc2FnZSIsImhhbmRsZSIsImluaXQiLCJvcGVuIiwidXJpIiwicmVmcmVzaCIsInJlbW92ZSIsInNwb3RpZnlBdXRoZW50aWNhdGVkIiwiZ2V0VGltZSIsIm5vdyIsInBsYXlpbmciLCJwbGF5ZXIiLCJkaXNjb25uZWN0IiwiU3BvdGlmeSIsIlBsYXllciIsImdldE9BdXRoVG9rZW4iLCJjYiIsImFkZExpc3RlbmVyIiwibWVzc2FnZSIsIlRTUkkiLCJyZXBvcnRzIiwic3BvdGlmeVJlcG9ydHMiLCJzdGF0ZSIsInBhdXNlZCIsInBvc2l0aW9uIiwiZHVyYXRpb24iLCJvblBvc2l0aW9uQ2hhbmdlIiwib25QYXVzZSIsIm9uUGxheSIsImRpc2FsbG93cyIsInJlc3VtaW5nIiwib25OZXh0IiwiZGV2aWNlX2lkIiwiaWQiLCJzZXRTcG90aWZ5UGxheWVyVm9sdW1lIiwic3BvdGlmeUF1dGgiLCJwYXVzZSIsInBsYXkiLCJmb3JjZUJlZ2luIiwicmVzdW1lIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwidXJpcyIsInBvc2l0aW9uX21zIiwiaGVhZGVycyIsInZvbHVtZSIsImRldmljZUlkIiwic2VlayIsInNldFZvbHVtZSIsInZvbHVtZUJhbGFuY2UiLCJlIiwiY29uc29sZSIsImxvZyIsIlBsYXliYWNrU2xhdmVDb250cm9sbGVyIiwieW91dHViZUFwaSIsIllUIiwib25TdGF0ZUNoYW5nZSIsIm9uVXBkYXRlIiwicGVybWFVcGRhdGUiLCJzZXRQb3MiLCJnZXRDdXJyZW50VGltZSIsImdldER1cmF0aW9uIiwicGF1c2VWaWRlbyIsImxvYWRWaWRlb0J5SWQiLCJzZWVrVG8iLCJwbGF5VmlkZW8iLCJCYWNrUmVxdWVzdCIsIlNldHRpbmdzUmVxdWVzdCIsInNldHRpbmdzIiwic29uZ3MiLCJhcnRpc3QiLCJjb3ZlciIsInNwb3RpZnkiLCJ5b3V0dWJlIiwic3RhcnRBdCIsIm1hc3RlciIsInNldEV2ZW50cyIsInN0YXJ0UHJldmlldyIsInNob3VsZFBsYXkiLCJyYW5kb21QcmV2aWV3IiwiUGxheWJhY2tQcmV2aWV3Q29udHJvbGxlciIsImdldFJhbmRvbVByZXZpZXciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJmcm9udGVuZEV2ZW50cyIsInF1ZXVlIiwiX2hpc3RvcnkiLCJmaXJzdFBsYXliYWNrIiwicG9zUHJlZGljdGVyIiwiUG9zaXRpb25QcmVkaWN0ZXIiLCJwb3MiLCJwbGF5YmFja1Byb3ZpZGVyRXZlbnRzIiwiU1BPVElGWSIsIllvdVR1YmVQbGF5YmFja0NvbnRyb2xsZXIiLCJZT1VUVUJFIiwicXVldWVVcGRhdGUiLCJzZXRRdWV1ZSIsImhpc3RvcnkiLCJwcmV2aWV3IiwidGVtcFF1ZXVlIiwic2V0dGluZ3NVcGRhdGUiLCJjb250cm9sbGVyIiwiZ2V0Q29udHJvbGxlciIsInByb3ZpZGVyIiwicHJlZGljdGlvbiIsIk5PTkUiLCJsb2NhbEFkZCIsInByZWRpY3QiLCJ1bmRlZmluZWQiLCJyZXNldFBvc2l0aW9uIiwibG9jYWxOZXh0IiwidW5zaGlmdCIsInNoaWZ0IiwiYmFjayIsImFwaUFkZCIsInNlbGYiLCJpbmNsdWRlcyIsInN0b3AiLCJwMSIsInAyIiwic2V0UG9zaXRpb24iLCJsb2FkUXVldWUiLCJzZXRTZXR0aW5ncyIsInNldFZvbHVtZUJhbGFuY2UiLCJoYW5kbGVTZXR0aW5ncyIsImNhbGxiYWNrIiwibGFzdFBvc2l0aW9uIiwicHJlZGljdE5vdyIsIlNwb3RpZnlTZWFyY2giLCJxdWVyeSIsIllvdVR1YmVTZWFyY2giLCJvblNwb3RpZnkiLCJvbllvdVR1YmUiLCJhdXRoZW50aWNhdGVkIiwiQVBJIiwicGxheWJhY2siLCJlbmFibGVTcG90aWZ5QXV0aCIsImluaXRpYWxpemVkIiwic2VhcmNoIiwic3BvdGlmeVN0YXR1cyIsInlvdXR1YmVBcGlSZWFkeSIsInNwb3RpZnlBcGlSZWFkeSIsInNwb3RpZnlBcGkiLCJkZWZhdWx0RXZlbnRzIiwicmVwb3J0IiwicmVhc29uIiwib25TcG90aWZ5V2ViUGxheWJhY2tTREtSZWFkeSIsImdsb2JhbCIsIm9uWW91VHViZUlmcmFtZUFQSVJlYWR5IiwiZyIsIkZ1bmN0aW9uIiwibG9hZGluZyIsImxvYWRlZCIsIllUQ29uZmlnIiwicmVhZHkiLCJmIiwib25ZVFJlYWR5Iiwic2V0Q29uZmlnIiwiayIsImEiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJhc3luYyIsImN1cnJlbnRTY3JpcHQiLCJub25jZSIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFH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QUksSUFBSyxJQUFJbVIsS0FBS25SLEVBQVFBLEVBQUV3QixlQUFlMlAsS0FBS0wsRUFBU0ssR0FBS25SLEVBQUVtUixLQUFPLElBQUlDLEVBQUlDLFNBQVNDLGNBQWMsVUFBVUYsRUFBRW5QLEtBQU8sa0JBQWtCbVAsRUFBRWhJLEdBQUssdUJBQXVCZ0ksRUFBRUcsSUFBTSx5RUFBeUVILEVBQUVJLE9BQVEsRUFBSyxJQUFJeFIsRUFBSXFSLFNBQVNJLGNBQWMsR0FBSXpSLEVBQUcsQ0FBQyxJQUFJb0IsRUFBSXBCLEVBQUUwUixPQUFTMVIsRUFBRTJSLGFBQWEsU0FBYXZRLEdBQUlnUSxFQUFFUSxhQUFhLFFBQVN4USxHQUFLLElBQUl5USxFQUFJUixTQUFTUyxxQkFBcUIsVUFBVSxHQUFHRCxFQUFFRSxXQUFXQyxhQUFhWixFQUFHUyxHQUE5cUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9Tb25nXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQWRkUmVxdWVzdCA9IChzb25nOiBTb25nKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiYWRkXCIsXHJcbiAgICAgICAgICAgIHNvbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7QWRkUmVxdWVzdH0gZnJvbSBcIi4vcmVxdWVzdHMvc29uZ3JlcXVlc3RzL0FkZFJlcXVlc3RcIjtcclxuaW1wb3J0IHtHZXRRdWV1ZVJlcXVlc3R9IGZyb20gXCIuL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9HZXRRdWV1ZVJlcXVlc3RcIjtcclxuaW1wb3J0IHtOZXh0UmVxdWVzdH0gZnJvbSBcIi4vcmVxdWVzdHMvc29uZ3JlcXVlc3RzL05leHRSZXF1ZXN0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIHJlcXVlc3RzOiBBUElSZXF1ZXN0TWFuYWdlcjtcclxuICAgIHByaXZhdGUgZXZlbnRzOiBNYXA8c3RyaW5nLCBBcnJheTwoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQ+PiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBwcml2YXRlIGNsaWVudDogV2ViU29ja2V0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgYXBpOiBzdHJpbmcsXHJcbiAgICAgICAgcHJpdmF0ZSBqd3Q6IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIHN0YXR1c0xpc3RlbmVyOiBBUElDb25uZWN0aW9uU3RhdHVzTGlzdGVuZXJcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29ubmVjdCgpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2xpZW50ICYmIHRoaXMuY2xpZW50LnJlYWR5U3RhdGUgPT09IHRoaXMuY2xpZW50Lk9QRU4pIHJldHVybjtcclxuICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBXZWJTb2NrZXQodGhpcy5hcGkpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzTGlzdGVuZXIuc3RhdHVzQ2hhbmdlZChBUElDb25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNsaWVudC5vbm9wZW4gPSAoKSA9PiB0aGlzLmF1dGhvcml6ZSgpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50Lm9uY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzTGlzdGVuZXIuc3RhdHVzQ2hhbmdlZChBUElDb25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RzID0gbmV3IEFQSVJlcXVlc3RNYW5hZ2VyKHRoaXMuY2xpZW50LCB0aGlzLmV2ZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBhdXRob3JpemUoKSB7XHJcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KHtcclxuICAgICAgICAgICAgdG9waWM6ICdhdXRoJyxcclxuICAgICAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgICAgIGFjdGlvbjoge3R5cGU6ICdKV1RfVE9LRU4nLCB0b2tlbjogdGhpcy5qd3R9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGFubmVsID0gcmVzcG9uc2UucmVzdWx0LnVzZXIudHdpdGNoSWQ7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAndHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50cycsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogXCJzdWJzY3JpYmVcIixcclxuICAgICAgICAgICAgICAgIGNvbmZpZzoge2NoYW5uZWx9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdHVzTGlzdGVuZXIuc3RhdHVzQ2hhbmdlZChyZXNwb25zZS5zdGF0dXMgPT09ICdzdWNjZXNzJyA/IEFQSUNvbm5lY3Rpb25TdGF0dXMuQ09OTkVDVEVEIDogQVBJQ29ubmVjdGlvblN0YXR1cy5VTkFVVEhPUklaRUQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBoYW5kbGVyOiAoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzLmhhcyhldmVudCkpIHRoaXMuZXZlbnRzLnNldChldmVudCwgW2hhbmRsZXJdKTtcclxuICAgICAgICBlbHNlIHRoaXMuZXZlbnRzLmdldChldmVudCkucHVzaChoYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgYWRkKHNvbmc6IFNvbmcpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KEFkZFJlcXVlc3Qoc29uZykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRRdWV1ZSgpIHtcclxuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMucmVxdWVzdHMucmVxdWVzdChHZXRRdWV1ZVJlcXVlc3QpKS5yZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG5leHQoc2tpcDogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVxdWVzdHMucmVxdWVzdChOZXh0UmVxdWVzdChza2lwKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEFQSUNvbm5lY3Rpb25TdGF0dXMge1xyXG4gICAgQ09OTkVDVEVELCBESVNDT05ORUNURUQsIFVOQVVUSE9SSVpFRFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFQSUNvbm5lY3Rpb25TdGF0dXNMaXN0ZW5lciB7XHJcbiAgICBzdGF0dXNDaGFuZ2VkOiAoc3RhdHVzOiBBUElDb25uZWN0aW9uU3RhdHVzKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUFQSVJlcXVlc3Qge1xyXG4gICAgcmVmPzogc3RyaW5nO1xyXG4gICAgdG9waWM6IHN0cmluZztcclxuICAgIHNjb3BlOiAnYWN0aW9uJyB8ICdzdWJzY3JpYmUnO1xyXG4gICAgYWN0aW9uPzogYW55O1xyXG4gICAgY29uZmlnPzogYW55O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQVBJUmVxdWVzdE1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBjb3VudDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgcGVuZGluZzogTWFwPHN0cmluZywgKHJlcz86IGFueSkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIGV2ZW50czogTWFwPHN0cmluZywgQXJyYXk8KGRldGFpbHM6IGFueSwgdGltZVN0YW1wOiBEYXRlKSA9PiB2b2lkPj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIGNsaWVudDogV2ViU29ja2V0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNsaWVudDogV2ViU29ja2V0LCBldmVudHM/OiBNYXA8c3RyaW5nLCBBcnJheTwoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQ+Pikge1xyXG4gICAgICAgIGlmIChldmVudHMpIHRoaXMuZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xyXG4gICAgICAgIHRoaXMuY2xpZW50Lm9ubWVzc2FnZSA9IChtc2cpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb2IgPSBKU09OLnBhcnNlKG1zZy5kYXRhKSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGlmIChvYi5yZWYgJiYgdGhpcy5wZW5kaW5nLmhhcyhvYi5yZWYpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcuZ2V0KG9iLnJlZikob2IucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZy5kZWxldGUob2IucmVmKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYi5ldmVudCAmJiB0aGlzLmV2ZW50cy5oYXMob2IuZXZlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5nZXQob2IuZXZlbnQpLmZvckVhY2goaGFuZGxlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihvYi5kZXRhaWxzLCBuZXcgRGF0ZShvYi50aW1lU3RhbXApKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlcXVlc3QocmVxOiBJQVBJUmVxdWVzdCwgdGltZW91dDogbnVtYmVyID0gMzAwMCk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKCFyZXEucmVmKSByZXEucmVmID0gdGhpcy5uZXdSZWYoKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzOiAocmVzOiBhbnkpID0+IHZvaWQsIHJlajogKGVycj86IGFueSkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcuc2V0KHJlcS5yZWYsIHJlcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmcuaGFzKHJlcS5yZWYpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcuZGVsZXRlKHJlcS5yZWYpO1xyXG4gICAgICAgICAgICAgICAgcmVqKFwiVGltZWQgT3V0XCIpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBoYW5kbGVyOiAoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzLmhhcyhldmVudCkpIHRoaXMuZXZlbnRzLnNldChldmVudCwgW2hhbmRsZXJdKTtcclxuICAgICAgICBlbHNlIHRoaXMuZXZlbnRzLmdldChldmVudCkucHVzaChoYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5ld1JlZigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5jb3VudCsrKS50b1N0cmluZygpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEdldFF1ZXVlUmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgIGFjdGlvbjoge1xyXG4gICAgICAgIHR5cGU6IFwicXVldWVcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBOZXh0UmVxdWVzdCA9IChza2lwOiBib29sZWFuID0gZmFsc2UpOiBJQVBJUmVxdWVzdCA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9ldmVudHNcIixcclxuICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgdHlwZTogc2tpcCA/IFwic2tpcFwiIDogXCJuZXh0XCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsImV4cG9ydCBlbnVtIFBsYXliYWNrUHJvdmlkZXIge1xyXG4gICAgTk9ORSwgU1BPVElGWSwgWU9VVFVCRVxyXG59XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEdldFJlcXVlc3Q6IElBUElSZXF1ZXN0ID0ge1xyXG4gICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHNcIixcclxuICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgYWN0aW9uOiB7XHJcbiAgICAgICAgdHlwZTogXCJnZXRcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBJbml0UmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFsc1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcImluaXRcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBTZXRSZXF1ZXN0OiAoY29kZTogc3RyaW5nKSA9PiBJQVBJUmVxdWVzdCA9IChjb2RlOiBzdHJpbmcpID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHNcIixcclxuICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgdHlwZTogXCJzZXRcIixcclxuICAgICAgICAgICAgY29kZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgUmVmcmVzaFJlcXVlc3Q6IElBUElSZXF1ZXN0ID0ge1xyXG4gICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHNcIixcclxuICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgYWN0aW9uOiB7XHJcbiAgICAgICAgdHlwZTogXCJyZWZyZXNoXCJcclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgUmVtb3ZlUmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFsc1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcInJlbW92ZVwiXHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7QVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJ9IGZyb20gXCIuLi9hcGkvQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtHZXRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvR2V0UmVxdWVzdFwiO1xyXG5pbXBvcnQge0luaXRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvSW5pdFJlcXVlc3RcIjtcclxuaW1wb3J0IHtTZXRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvU2V0UmVxdWVzdFwiO1xyXG5pbXBvcnQge1JlZnJlc2hSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvUmVmcmVzaFJlcXVlc3RcIjtcclxuaW1wb3J0IHtSZW1vdmVSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvUmVtb3ZlUmVxdWVzdFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBsaXN0ZW5lcjogSVNwb3RpZnlBdXRoZW50aWNhdGlvbkxpc3RlbmVyO1xyXG5cclxuICAgIHByaXZhdGUgdG9rZW46IHN0cmluZyA9IG51bGw7XHJcbiAgICBwcml2YXRlIGV4cGlyZXM6IERhdGUgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSB3aW46IFdpbmRvdztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyLCBsaXN0ZW5lcjogSVNwb3RpZnlBdXRoZW50aWNhdGlvbkxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hcGkgPSBhcGk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lciA9IGxpc3RlbmVyO1xyXG4gICAgICAgIGNvbnN0IHJlY2VpdmVDb2RlID0gYXN5bmMgKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCEodHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICghKGV2ZW50LmRhdGEgYXMgc3RyaW5nKS5zdGFydHNXaXRoKFwiY29kZTpcIikpIHJldHVybjtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXQoZXZlbnQuZGF0YS5zdWJzdHIoXCJjb2RlOlwiLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICB0aGlzLndpbi5wb3N0TWVzc2FnZShcImNsb3NlXCIsIFwiKlwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCByZWNlaXZlQ29kZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXQoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChHZXRSZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLmhhbmRsZShyZXMudG9rZW4gPyByZXMgOiBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KEluaXRSZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLndpbiA9IHdpbmRvdy5vcGVuKHJlcy5yZXN1bHQudXJpLCBcInBvcFVwV2luZG93XCIsICdoZWlnaHQ9NTAwLHdpZHRoPTQwMCxsZWZ0PTEwMCx0b3A9MTAwLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsdG9vbGJhcj15ZXMsbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubywgc3RhdHVzPXllcycpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgc2V0KGNvZGU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoU2V0UmVxdWVzdChjb2RlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGUocmVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVmcmVzaCgpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFJlZnJlc2hSZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLmhhbmRsZShyZXMudG9rZW4gPyByZXMgOiBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVtb3ZlKCkge1xyXG4gICAgICAgIGlmICgoYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChSZW1vdmVSZXF1ZXN0KSkuc3RhdHVzICE9PSAnc3VjY2VzcycpXHJcbiAgICAgICAgICAgIHRocm93KFwiQW4gZXJyb3Igb2NjdXJlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZShyZXM6IHsgdG9rZW46IHN0cmluZywgZXhwaXJlczogbnVtYmVyIH0gfCBudWxsKSB7XHJcbiAgICAgICAgaWYgKCFyZXMpIHRoaXMubGlzdGVuZXIuc3BvdGlmeUF1dGhlbnRpY2F0ZWQoZmFsc2UpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuID0gcmVzLnRva2VuO1xyXG4gICAgICAgICAgICB0aGlzLmV4cGlyZXMgPSBuZXcgRGF0ZShyZXMuZXhwaXJlcyk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXIuc3BvdGlmeUF1dGhlbnRpY2F0ZWQodHJ1ZSwgcmVzLnRva2VuKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b2tlbiAhPT0gcmVzLnRva2VuKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfSwgdGhpcy5leHBpcmVzLmdldFRpbWUoKSAtIERhdGUubm93KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3BvdGlmeUF1dGhlbnRpY2F0aW9uTGlzdGVuZXIge1xyXG4gICAgc3RhdHVzQ2hhbmdlZDogKG5ld1N0YXR1czogYm9vbGVhbikgPT4gdm9pZCxcclxuICAgIHNwb3RpZnlBdXRoZW50aWNhdGVkOiAoYXV0aGVudGljYXRlZDogYm9vbGVhbiwgdG9rZW4/OiBzdHJpbmcpID0+IHZvaWRcclxufVxyXG4iLCJpbXBvcnQge1Nvbmd9IGZyb20gXCIuLi8uLi9tb2RlbHMvU29uZ1wiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBsYXliYWNrU2xhdmVDb250cm9sbGVyIHtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBwYXVzZSgpOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBwbGF5KHNvbmc6IFNvbmcsIGZvcmNlQmVnaW46IGJvb2xlYW4pOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZWVrKHBvc2l0aW9uOiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIsIHZvbHVtZUJhbGFuY2U6IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHJlc3VtZSgpOiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBldmVudHM6IFBsYXliYWNrU2xhdmVFdmVudHMpIHtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQbGF5YmFja1NsYXZlRXZlbnRzIHtcclxuICAgIG9uUGxheTogKHNvbmc/OiBTb25nKSA9PiB2b2lkO1xyXG4gICAgb25QYXVzZTogKCkgPT4gdm9pZDtcclxuICAgIG9uUG9zaXRpb25DaGFuZ2U6IChwb3M6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikgPT4gdm9pZDtcclxuICAgIG9uTmV4dDogKCkgPT4gdm9pZDtcclxufVxyXG4iLCJpbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi4vYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7UGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIsIFBsYXliYWNrU2xhdmVFdmVudHN9IGZyb20gXCIuL1BsYXliYWNrU2xhdmVDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7VFNSSVdpbmRvd30gZnJvbSBcIi4uLy4uL21vZGVscy9UU1JJV2luZG93XCI7XHJcbmltcG9ydCB7U2V0Vm9sdW1lUmVxdWVzdH0gZnJvbSBcIi4uL2FwaS9yZXF1ZXN0cy9vdGhlci9TZXRWb2x1bWVSZXF1ZXN0XCI7XHJcblxyXG5kZWNsYXJlIGNvbnN0IFNwb3RpZnk6IGFueTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyIGV4dGVuZHMgUGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIge1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXI6IGFueTtcclxuICAgIHByaXZhdGUgc29uZzogU29uZztcclxuICAgIHByaXZhdGUgaWQ6IHN0cmluZztcclxuICAgIHRva2VuOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHBsYXlpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgdm9sdW1lOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGV2ZW50czogUGxheWJhY2tTbGF2ZUV2ZW50cywgcHJpdmF0ZSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyKSB7XHJcbiAgICAgICAgc3VwZXIoZXZlbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdCh0b2tlbjogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB0aGlzLnBsYXllci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xyXG4gICAgICAgIGNvbnN0IHBsYXllciA9IG5ldyBTcG90aWZ5LlBsYXllcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdUd2FzaS1QYW5lbCcsXHJcbiAgICAgICAgICAgIGdldE9BdXRoVG9rZW46IChjYjogKHRva2VuOiBzdHJpbmcpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNiKHRva2VuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEVycm9yIGhhbmRsaW5nXHJcbiAgICAgICAgcGxheWVyLmFkZExpc3RlbmVyKCdpbml0aWFsaXphdGlvbl9lcnJvcicsICh7bWVzc2FnZX06IHsgbWVzc2FnZTogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICAgICAgKHdpbmRvdyBhcyBUU1JJV2luZG93KS5UU1JJLnJlcG9ydHMuc3BvdGlmeVJlcG9ydHMucHVzaCh7dHlwZTogJ2luaXRpYWxpemF0aW9uX2Vycm9yJywgbWVzc2FnZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRMaXN0ZW5lcignYXV0aGVudGljYXRpb25fZXJyb3InLCBhc3luYyAoe21lc3NhZ2V9OiB7IG1lc3NhZ2U6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgICh3aW5kb3cgYXMgVFNSSVdpbmRvdykuVFNSSS5yZXBvcnRzLnNwb3RpZnlSZXBvcnRzLnB1c2goe3R5cGU6ICdhdXRoZW50aWNhdGlvbl9lcnJvcicsIG1lc3NhZ2V9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkTGlzdGVuZXIoJ2FjY291bnRfZXJyb3InLCBhc3luYyAoe21lc3NhZ2V9OiB7IG1lc3NhZ2U6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgICh3aW5kb3cgYXMgVFNSSVdpbmRvdykuVFNSSS5yZXBvcnRzLnNwb3RpZnlSZXBvcnRzLnB1c2goe3R5cGU6ICdhY2NvdW50X2Vycm9yJywgbWVzc2FnZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRMaXN0ZW5lcigncGxheWJhY2tfZXJyb3InLCBhc3luYyAoe21lc3NhZ2V9OiB7IG1lc3NhZ2U6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgICh3aW5kb3cgYXMgVFNSSVdpbmRvdykuVFNSSS5yZXBvcnRzLnNwb3RpZnlSZXBvcnRzLnB1c2goe3R5cGU6ICdwbGF5YmFja19lcnJvcicsIG1lc3NhZ2V9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUGxheWJhY2sgc3RhdHVzIHVwZGF0ZXNcclxuICAgICAgICBwbGF5ZXIuYWRkTGlzdGVuZXIoJ3BsYXllcl9zdGF0ZV9jaGFuZ2VkJywgYXN5bmMgKHN0YXRlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFzdGF0ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSAhc3RhdGUucGF1c2VkO1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUucG9zaXRpb24gJiYgc3RhdGUuZHVyYXRpb24pXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vblBvc2l0aW9uQ2hhbmdlKHN0YXRlLnBvc2l0aW9uLCBzdGF0ZS5kdXJhdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFzdGF0ZS5wYXVzZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vblBvc2l0aW9uQ2hhbmdlKDAsIHRoaXMuc29uZy5kdXJhdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5wYXVzZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vblBhdXNlKCk7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5ldmVudHMub25QbGF5KHRoaXMuc29uZyk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHN0YXRlLnBhdXNlZCAmJiBzdGF0ZS5kaXNhbGxvd3MucmVzdW1pbmdcclxuICAgICAgICAgICAgICAgICYmIHN0YXRlLnBvc2l0aW9uICYmIHN0YXRlLmR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICAmJiAoc3RhdGUucG9zaXRpb24gLyBzdGF0ZS5kdXJhdGlvbiA+IDAuOTgpXHJcbiAgICAgICAgICAgICkgdGhpcy5ldmVudHMub25OZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlYWR5XHJcbiAgICAgICAgcGxheWVyLmFkZExpc3RlbmVyKCdyZWFkeScsIGFzeW5jICh7ZGV2aWNlX2lkfTogeyBkZXZpY2VfaWQ6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaWQgPSBkZXZpY2VfaWQ7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0U3BvdGlmeVBsYXllclZvbHVtZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBOb3QgUmVhZHlcclxuICAgICAgICBwbGF5ZXIuYWRkTGlzdGVuZXIoJ25vdF9yZWFkeScsIGFzeW5jICh7ZGV2aWNlX2lkfTogeyBkZXZpY2VfaWQ6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgYXdhaXQgKHdpbmRvdyBhcyBUU1JJV2luZG93KS5UU1JJLnNwb3RpZnlBdXRoLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcclxuICAgICAgICBwbGF5ZXIuY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdXNlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLnBhdXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcGxheShzb25nOiBTb25nLCBmb3JjZUJlZ2luOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKHRoaXMuc29uZyAmJiB0aGlzLnNvbmcudXJpID09PSBzb25nLnVyaSkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5yZXN1bWUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNvbmcgPSBzb25nO1xyXG4gICAgICAgICAgICBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvbWUvcGxheWVyL3BsYXk/ZGV2aWNlX2lkPSR7dGhpcy5pZH1gLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe3VyaXM6IFtzb25nLnVyaV0sIHBvc2l0aW9uX21zOiAwfSksXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLnRva2VufWBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHNldFNwb3RpZnlQbGF5ZXJWb2x1bWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoU2V0Vm9sdW1lUmVxdWVzdCh0aGlzLnZvbHVtZSwgdGhpcy5pZCwgdGhpcy50b2tlbikpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlZWsocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLnNlZWsodGhpcy5zb25nLmR1cmF0aW9uICogcG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldFZvbHVtZSh2b2x1bWU6IG51bWJlciwgdm9sdW1lQmFsYW5jZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdm9sdW1lQmFsYW5jZSAtPSAuNTtcclxuICAgICAgICB2b2x1bWVCYWxhbmNlICo9IC0yO1xyXG4gICAgICAgIHZvbHVtZSA9IHZvbHVtZSAvIDEwICogNTtcclxuICAgICAgICB2b2x1bWUgKz0gKHZvbHVtZSArIC41KSAqIHZvbHVtZUJhbGFuY2UgKiAuNTtcclxuICAgICAgICBpZiAodm9sdW1lIDwgMCkgdm9sdW1lID0gMDtcclxuICAgICAgICB0aGlzLnZvbHVtZSA9IHZvbHVtZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5zZXRWb2x1bWUodm9sdW1lKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTcG90aWZ5UGxheWVyVm9sdW1lKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLnJlc3VtZSgpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBTZXRWb2x1bWVSZXF1ZXN0ID0gKHZvbHVtZTogbnVtYmVyLCBkZXZpY2VJZDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwic2V0Vm9sdW1lXCIsXHJcbiAgICAgICAgICAgIHZvbHVtZSxcclxuICAgICAgICAgICAgZGV2aWNlSWQsXHJcbiAgICAgICAgICAgIHRva2VuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge1BsYXliYWNrU2xhdmVDb250cm9sbGVyLCBQbGF5YmFja1NsYXZlRXZlbnRzfSBmcm9tIFwiLi9QbGF5YmFja1NsYXZlQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1Nvbmd9IGZyb20gXCIuLi8uLi9tb2RlbHMvU29uZ1wiO1xyXG5pbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi4vYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgWW91VHViZVBsYXliYWNrQ29udHJvbGxlciBleHRlbmRzIFBsYXliYWNrU2xhdmVDb250cm9sbGVyIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBwbGF5ZXI6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihldmVudHM6IFBsYXliYWNrU2xhdmVFdmVudHMsIGFwaTogQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXIsIHlvdXR1YmVBcGk6IGJvb2xlYW4pIHtcclxuICAgICAgICBzdXBlcihldmVudHMpO1xyXG4gICAgICAgIGlmICgheW91dHViZUFwaSkgdGhyb3cgKFwiQVBJX05PVF9SRUFEWVwiKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCd5b3V0dWJlLXBsYXllcicsIHtcclxuICAgICAgICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgICAgICAgICBvblN0YXRlQ2hhbmdlOiAoZXZlbnQ6IGFueSkgPT4gdGhpcy5vblVwZGF0ZShldmVudClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHBlcm1hVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldFBvcygpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHBlcm1hVXBkYXRlLCA1MDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGVybWFVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldFBvcygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vblBvc2l0aW9uQ2hhbmdlKHRoaXMucGxheWVyLmdldEN1cnJlbnRUaW1lKCkgKiAxMDAwLCB0aGlzLnBsYXllci5nZXREdXJhdGlvbigpICogMTAwMCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVXBkYXRlKGV2ZW50OiBhbnkpIHtcclxuICAgICAgICBpZiAoZXZlbnQuZGF0YSA9PT0gMSkgdGhpcy5ldmVudHMub25QbGF5KCk7XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnQuZGF0YSA9PT0gMCkgdGhpcy5ldmVudHMub25OZXh0KCk7XHJcbiAgICAgICAgZWxzZSB0aGlzLmV2ZW50cy5vblBhdXNlKCk7XHJcbiAgICAgICAgdGhpcy5zZXRQb3MoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcGF1c2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIucGF1c2VWaWRlbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHBsYXkoc29uZzogU29uZywgZm9yY2VCZWdpbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLmxvYWRWaWRlb0J5SWQoc29uZy51cmkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlZWsocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLnNlZWtUbyh0aGlzLnBsYXllci5nZXREdXJhdGlvbigpICogcG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZvbHVtZSh2b2x1bWU6IG51bWJlciwgdm9sdW1lQmFsYW5jZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdm9sdW1lQmFsYW5jZSAtPSAuNTtcclxuICAgICAgICB2b2x1bWVCYWxhbmNlICo9IDI7XHJcbiAgICAgICAgdm9sdW1lID0gdm9sdW1lIC8gMTAgKiA1O1xyXG4gICAgICAgIHZvbHVtZSArPSAodm9sdW1lICsgLjUpICogdm9sdW1lQmFsYW5jZSAqIC41O1xyXG4gICAgICAgIGlmICh2b2x1bWUgPCAwKSB2b2x1bWUgPSAwO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnNldFZvbHVtZSh2b2x1bWUgKiAxMDApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLnBsYXlWaWRlbygpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBCYWNrUmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgIGFjdGlvbjoge1xyXG4gICAgICAgIHR5cGU6IFwiYmFja1wiXHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1NldHRpbmdzfSBmcm9tIFwiLi4vLi4vLi4vLi4vbW9kZWxzL1NldHRpbmdzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgU2V0dGluZ3NSZXF1ZXN0ID0gKHNldHRpbmdzPzogU2V0dGluZ3MpOiBJQVBJUmVxdWVzdCA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9ldmVudHNcIixcclxuICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgdHlwZTogXCJzZXR0aW5nc1wiLFxyXG4gICAgICAgICAgICBzZXR0aW5nc1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtQbGF5YmFja1ByZXZpZXdFdmVudHN9IGZyb20gXCIuL1BsYXliYWNrUHJldmlld0V2ZW50c1wiO1xyXG5pbXBvcnQge1Nwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXJ9IGZyb20gXCIuLi9TcG90aWZ5UGxheWJhY2tDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7WW91VHViZVBsYXliYWNrQ29udHJvbGxlcn0gZnJvbSBcIi4uL1lvdVR1YmVQbGF5YmFja0NvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtQbGF5YmFja01hc3RlckNvbnRyb2xsZXJ9IGZyb20gXCIuLi9QbGF5YmFja01hc3RlckNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJldmlld1Nvbmcge1xyXG4gICAgc29uZzoge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZyxcclxuICAgICAgICBhcnRpc3Q6IHN0cmluZyxcclxuICAgICAgICBjb3Zlcjogc3RyaW5nLFxyXG4gICAgICAgIHlvdXR1YmU6IHN0cmluZyxcclxuICAgICAgICBzcG90aWZ5OiBzdHJpbmdcclxuICAgIH0sXHJcbiAgICBzdGFydEF0OiB7XHJcbiAgICAgICAgc3BvdGlmeTogbnVtYmVyLFxyXG4gICAgICAgIHlvdXR1YmU6IG51bWJlclxyXG4gICAgfSxcclxuICAgIGR1cmF0aW9uOiBudW1iZXIsXHJcbn1cclxuXHJcbmNvbnN0IHNvbmdzOiBBcnJheTxQcmV2aWV3U29uZz4gPSBbXHJcbiAgICB7XHJcbiAgICAgICAgc29uZzoge1xyXG4gICAgICAgICAgICBuYW1lOiBcIlRow7xyaW5nZXIgS2zDtsOfZSAtIFJhZGlvIFZlcnNpb25cIixcclxuICAgICAgICAgICAgYXJ0aXN0OiBcIkZyaXR6XCIsXHJcbiAgICAgICAgICAgIGNvdmVyOiBcImh0dHBzOi8vaS5zY2RuLmNvL2ltYWdlL2FiNjc2MTZkMDAwMGIyNzNkZGViNTY1ZDdkMjI2MWE3NjllYTVkMDNcIixcclxuICAgICAgICAgICAgc3BvdGlmeTogXCJzcG90aWZ5OnRyYWNrOjZ4OVNZR2xpQ2ZhSURmMUdHcGdjZVZcIixcclxuICAgICAgICAgICAgeW91dHViZTogXCJxSmUzY2RNN2YxY1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHVyYXRpb246IDQwMDAsXHJcbiAgICAgICAgc3RhcnRBdDoge3lvdXR1YmU6IDIwMDAwLCBzcG90aWZ5OiAyMDAwMH1cclxuICAgIH0sIHtcclxuICAgICAgICBzb25nOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiTGF0ZXIgQml0Y2hlc1wiLFxyXG4gICAgICAgICAgICBhcnRpc3Q6IFwiVGhlIFByaWNlIEthcm1hXCIsXHJcbiAgICAgICAgICAgIGNvdmVyOiBcImh0dHBzOi8vaS5zY2RuLmNvL2ltYWdlL2FiNjc2MTZkMDAwMGIyNzM3ZDQwNjk0YzIxYmRlZGI4N2Q2YmE5NzZcIixcclxuICAgICAgICAgICAgc3BvdGlmeTogXCJzcG90aWZ5OnRyYWNrOjZ4OVNZR2xpQ2ZhSURmMUdHcGdjZVZcIixcclxuICAgICAgICAgICAgeW91dHViZTogXCJxSmUzY2RNN2YxY1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHVyYXRpb246IDQwMDAsXHJcbiAgICAgICAgc3RhcnRBdDoge3lvdXR1YmU6IDIwMDAwLCBzcG90aWZ5OiAyMDAwMH1cclxuICAgIH0sIHtcclxuICAgICAgICBzb25nOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiU2hvb3RpbmcgU3RhcnNcIixcclxuICAgICAgICAgICAgYXJ0aXN0OiBcIkJhZyBSYWlkZXJzXCIsXHJcbiAgICAgICAgICAgIGNvdmVyOiBcImh0dHBzOi8vaS5zY2RuLmNvL2ltYWdlL2FlMTRkZTU5OTdmZWEzNTU3NTdhMTdjMjZmYjBlMjZiNzZmYzhmODZcIixcclxuICAgICAgICAgICAgc3BvdGlmeTogXCJzcG90aWZ5OnRyYWNrOjBVZVlDSE9FVFBmYWkwMnVza2pKM3hcIixcclxuICAgICAgICAgICAgeW91dHViZTogXCJmZUE2NHdYaGJqb1wiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkdXJhdGlvbjogNDAwMCxcclxuICAgICAgICBzdGFydEF0OiB7eW91dHViZTogMjAwMDAsIHNwb3RpZnk6IDIwMDAwfVxyXG4gICAgfSwge1xyXG4gICAgICAgIHNvbmc6IHtcclxuICAgICAgICAgICAgbmFtZTogXCJXZSBBcmUgTnVtYmVyIE9uZSAoUmVtaXgpXCIsXHJcbiAgICAgICAgICAgIGFydGlzdDogXCJTYXlNYXhXZWxsXCIsXHJcbiAgICAgICAgICAgIGNvdmVyOiBcImh0dHBzOi8vaS5zY2RuLmNvL2ltYWdlL2FiNjc2MTZkMDAwMGIyNzM0YzkwNmM4Y2VkOTlmNDg2MWViYzBiNjRcIixcclxuICAgICAgICAgICAgc3BvdGlmeTogXCJzcG90aWZ5OnRyYWNrOjRDNjRaWEcyNHZSSjRsd2t4Q0EyNEdcIixcclxuICAgICAgICAgICAgeW91dHViZTogXCJMcjFGc00xRWhNSVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkdXJhdGlvbjogNDAwMCxcclxuICAgICAgICBzdGFydEF0OiB7eW91dHViZTogMjAwMDAsIHNwb3RpZnk6IDIwMDAwfVxyXG4gICAgfVxyXG5dO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXliYWNrUHJldmlld0NvbnRyb2xsZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgZXZlbnRzOiBQbGF5YmFja1ByZXZpZXdFdmVudHMsXHJcbiAgICAgICAgcHJpdmF0ZSBzcG90aWZ5OiBTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyLFxyXG4gICAgICAgIHByaXZhdGUgeW91dHViZTogWW91VHViZVBsYXliYWNrQ29udHJvbGxlcixcclxuICAgICAgICBwcml2YXRlIG1hc3RlcjogUGxheWJhY2tNYXN0ZXJDb250cm9sbGVyXHJcbiAgICApIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEV2ZW50cyhldmVudHM6IFBsYXliYWNrUHJldmlld0V2ZW50cykge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzdGFydFByZXZpZXcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWFzdGVyLnNob3VsZFBsYXkpIHJldHVybjtcclxuICAgICAgICBjb25zdCByYW5kb21QcmV2aWV3OiBQcmV2aWV3U29uZyA9IFBsYXliYWNrUHJldmlld0NvbnRyb2xsZXIuZ2V0UmFuZG9tUHJldmlldygpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhd2FpdCB0aGlzLnNwb3RpZnkucGxheSh7dXJpOiByYW5kb21QcmV2aWV3LnNvbmcuc3BvdGlmeX0pO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNwb3RpZnkucGF1c2UoKTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICB0aGlzLnlvdXR1YmUucGxheSh7dXJpOiByYW5kb21QcmV2aWV3LnNvbmcueW91dHViZX0sIHRydWUpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMueW91dHViZS5wYXVzZSgpO1xyXG4gICAgICAgICAgICB9LCByYW5kb21QcmV2aWV3LmR1cmF0aW9uKVxyXG4gICAgICAgIH0sIHJhbmRvbVByZXZpZXcuZHVyYXRpb24pXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0UmFuZG9tUHJldmlldygpOiBQcmV2aWV3U29uZyB7XHJcbiAgICAgICAgcmV0dXJuIHNvbmdzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNvbmdzLmxlbmd0aCldXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyfSBmcm9tIFwiLi9TcG90aWZ5UGxheWJhY2tDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7WW91VHViZVBsYXliYWNrQ29udHJvbGxlcn0gZnJvbSBcIi4vWW91VHViZVBsYXliYWNrQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi4vYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcbmltcG9ydCB7UGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIsIFBsYXliYWNrU2xhdmVFdmVudHN9IGZyb20gXCIuL1BsYXliYWNrU2xhdmVDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7VFNSSUV2ZW50c30gZnJvbSBcIi4uLy4uL21vZGVscy9FdmVudHNcIjtcclxuaW1wb3J0IHtJbml0aWFsaXphdGlvblN0YXR1c30gZnJvbSBcIi4uLy4uL21vZGVscy9Jbml0aWFsaXphdGlvblN0YXR1c1wiO1xyXG5pbXBvcnQge0JhY2tSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9CYWNrUmVxdWVzdFwiO1xyXG5pbXBvcnQge05leHRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9OZXh0UmVxdWVzdFwiO1xyXG5pbXBvcnQge0dldFF1ZXVlUmVxdWVzdH0gZnJvbSBcIi4uL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvR2V0UXVldWVSZXF1ZXN0XCI7XHJcbmltcG9ydCB7QWRkUmVxdWVzdH0gZnJvbSBcIi4uL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQWRkUmVxdWVzdFwiO1xyXG5pbXBvcnQge1NldHRpbmdzfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1NldHRpbmdzXCI7XHJcbmltcG9ydCB7U2V0dGluZ3NSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL290aGVyL1NldHRpbmdzUmVxdWVzdFwiO1xyXG5pbXBvcnQge1BsYXliYWNrUHJldmlld0NvbnRyb2xsZXJ9IGZyb20gXCIuL3BsYXliYWNrcHJldmlldy9QbGF5YmFja1ByZXZpZXdDb250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWJhY2tNYXN0ZXJDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgc29uZzogU29uZyA9IG51bGw7XHJcbiAgICBwcml2YXRlIHF1ZXVlOiBBcnJheTxTb25nPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBfaGlzdG9yeTogQXJyYXk8U29uZz4gPSBbXTtcclxuICAgIHByaXZhdGUgZmlyc3RQbGF5YmFjazogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgcHJpdmF0ZSBwb3NQcmVkaWN0ZXI6IFBvc2l0aW9uUHJlZGljdGVyO1xyXG5cclxuICAgIHB1YmxpYyByZWFkb25seSBzcG90aWZ5OiBTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHlvdXR1YmU6IFlvdVR1YmVQbGF5YmFja0NvbnRyb2xsZXI7XHJcbiAgICBwdWJsaWMgc2hvdWxkUGxheTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogU2V0dGluZ3M7XHJcbiAgICBwcml2YXRlIHByZXZpZXc6IFBsYXliYWNrUHJldmlld0NvbnRyb2xsZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyLCBwcml2YXRlIGZyb250ZW5kRXZlbnRzOiBUU1JJRXZlbnRzLCBzdGF0dXM6IEluaXRpYWxpemF0aW9uU3RhdHVzKSB7XHJcbiAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIgPSBuZXcgUG9zaXRpb25QcmVkaWN0ZXIocG9zID0+IHRoaXMuZnJvbnRlbmRFdmVudHMucG9zaXRpb24ocG9zKSk7XHJcbiAgICAgICAgdGhpcy5zcG90aWZ5ID0gbmV3IFNwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXIodGhpcy5wbGF5YmFja1Byb3ZpZGVyRXZlbnRzKFBsYXliYWNrUHJvdmlkZXIuU1BPVElGWSksIGFwaSk7XHJcbiAgICAgICAgdGhpcy55b3V0dWJlID0gbmV3IFlvdVR1YmVQbGF5YmFja0NvbnRyb2xsZXIodGhpcy5wbGF5YmFja1Byb3ZpZGVyRXZlbnRzKFBsYXliYWNrUHJvdmlkZXIuWU9VVFVCRSksIGFwaSwgc3RhdHVzLnlvdXR1YmVBcGkpO1xyXG4gICAgICAgIGFwaS5vbihcInF1ZXVlXCIsIChxdWV1ZVVwZGF0ZSkgPT4gdGhpcy5zZXRRdWV1ZShxdWV1ZVVwZGF0ZS5xdWV1ZSwgcXVldWVVcGRhdGUuaGlzdG9yeSwgdGhpcy5zaG91bGRQbGF5KSk7XHJcbiAgICAgICAgdGhpcy5wcmV2aWV3ID0gbmV3IFBsYXliYWNrUHJldmlld0NvbnRyb2xsZXIobnVsbCwgdGhpcy5zcG90aWZ5LCB0aGlzLnlvdXR1YmUsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRFdmVudHMoZXZlbnRzOiBUU1JJRXZlbnRzKSB7XHJcbiAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cyA9IGV2ZW50cztcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRQbGF5KSBldmVudHMucGxheSgpO1xyXG4gICAgICAgIGVsc2UgZXZlbnRzLnBhdXNlKCk7XHJcbiAgICAgICAgbGV0IHRlbXBRdWV1ZSA9IFsuLi50aGlzLnF1ZXVlXTtcclxuICAgICAgICBldmVudHMucXVldWVVcGRhdGUodGVtcFF1ZXVlLCB0aGlzLl9oaXN0b3J5KTtcclxuICAgICAgICBldmVudHMuc29uZyh0aGlzLnNvbmcpO1xyXG4gICAgICAgIGV2ZW50cy5zZXR0aW5nc1VwZGF0ZSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcGxheShmb3JjZUJlZ2luOiBib29sZWFuLCBzb25nPzogU29uZykge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICAgICAgaWYgKHNvbmcpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc29uZykgdGhpcy5wYXVzZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNvbmcgPSBzb25nO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5nZXRDb250cm9sbGVyKHNvbmcucHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLnNldFZvbHVtZSh0aGlzLnNldHRpbmdzLnZvbHVtZSwgdGhpcy5zZXR0aW5ncy52b2x1bWVCYWxhbmNlKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci5wbGF5KHNvbmcsIGZvcmNlQmVnaW4pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zb25nKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maXJzdFBsYXliYWNrICYmIHRoaXMucG9zUHJlZGljdGVyLnByZWRpY3Rpb24gIT09IDApXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRyb2xsZXIodGhpcy5zb25nLnByb3ZpZGVyKS5yZXN1bWUoKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UGxheWJhY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheSh0cnVlLCB0aGlzLnNvbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGF3YWl0IHRoaXMubmV4dCgpO1xyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyh0aGlzLnNvbmcpO1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBhdXNlKCkge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc29uZykgdGhpcy5nZXRDb250cm9sbGVyKHRoaXMuc29uZy5wcm92aWRlcikucGF1c2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldENvbnRyb2xsZXIocHJvdmlkZXI6IFBsYXliYWNrUHJvdmlkZXIpOiBQbGF5YmFja1NsYXZlQ29udHJvbGxlciB7XHJcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrUHJvdmlkZXIuTk9ORTpcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrUHJvdmlkZXIuU1BPVElGWTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwb3RpZnk7XHJcbiAgICAgICAgICAgIGNhc2UgUGxheWJhY2tQcm92aWRlci5ZT1VUVUJFOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueW91dHViZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlZWsocG9zaXRpb246IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLnNvbmcpIHRoaXMuZ2V0Q29udHJvbGxlcih0aGlzLnNvbmcucHJvdmlkZXIpLnNlZWsocG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsb2NhbEFkZChzb25nOiBTb25nKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHNvbmcpO1xyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMucXVldWVVcGRhdGUodGhpcy5xdWV1ZSwgdGhpcy5faGlzdG9yeSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBvc1ByZWRpY3Rlci5wcmVkaWN0KSB0aGlzLnBsYXkoZmFsc2UsIHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFF1ZXVlKHF1ZXVlOiBBcnJheTxTb25nPiwgaGlzdG9yeTogQXJyYXk8U29uZz4sIHBsYXk6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBzb25nID0gcXVldWVbMF07XHJcbiAgICAgICAgICAgIGlmIChwbGF5ICYmICghdGhpcy5zb25nIHx8ICh0aGlzLnNvbmcgJiYgdGhpcy5zb25nLnVyaSAhPT0gc29uZy51cmkpKSkgdGhpcy5wbGF5KHRydWUsIHNvbmcpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyhxdWV1ZVswXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvbmcgPSBzb25nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb25nKSB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc29uZyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyhudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3Rvcnk7XHJcbiAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5xdWV1ZVVwZGF0ZSh0aGlzLnF1ZXVlLCB0aGlzLl9oaXN0b3J5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9jYWxOZXh0KCkge1xyXG4gICAgICAgIHRoaXMucG9zUHJlZGljdGVyLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICBpZiAodGhpcy5zb25nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcclxuICAgICAgICAgICAgdGhpcy5faGlzdG9yeS51bnNoaWZ0KHRoaXMuc29uZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5xdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zb25nID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5zb25nKG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLnBvc1ByZWRpY3Rlci5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5KHRydWUsIHRoaXMucXVldWVbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMucXVldWVVcGRhdGUodGhpcy5xdWV1ZSwgdGhpcy5faGlzdG9yeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGJhY2soKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoQmFja1JlcXVlc3QpO1xyXG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzICE9PSAnc3VjY2VzcycpXHJcbiAgICAgICAgICAgIHRocm93IChyZXN1bHQubWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG5leHQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChOZXh0UmVxdWVzdChmYWxzZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBza2lwKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoTmV4dFJlcXVlc3QodHJ1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBhcGlBZGQoc29uZzogU29uZykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoQWRkUmVxdWVzdChzb25nKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwbGF5YmFja1Byb3ZpZGVyRXZlbnRzKHNlbGY6IFBsYXliYWNrUHJvdmlkZXIpOiBQbGF5YmFja1NsYXZlRXZlbnRzIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvblBhdXNlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc29uZyB8fCBbUGxheWJhY2tQcm92aWRlci5OT05FLCBzZWxmXS5pbmNsdWRlcyh0aGlzLnNvbmcucHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucHJlZGljdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBvblBsYXk6IChzb25nPzogU29uZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNvbmcpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvbmcucHJvdmlkZXIgIT09IHNlbGYpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zUHJlZGljdGVyLnByZWRpY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5wbGF5KCk7XHJcbiAgICAgICAgICAgIH0sIG9uUG9zaXRpb25DaGFuZ2U6IChwMTogbnVtYmVyLCBwMjogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc29uZykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc29uZy5wcm92aWRlciAhPT0gc2VsZikgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIuc2V0UG9zaXRpb24ocDEsIHAyKTtcclxuICAgICAgICAgICAgfSwgb25OZXh0OiAoKSA9PiB0aGlzLm5leHQoKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRRdWV1ZShwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAoYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChHZXRRdWV1ZVJlcXVlc3QpKS5yZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5zZXRRdWV1ZShyZXN1bHQucXVldWUsIHJlc3VsdC5oaXN0b3J5LCBwbGF5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5ncyh7dm9sdW1lfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldFZvbHVtZUJhbGFuY2Uodm9sdW1lQmFsYW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5ncyh7dm9sdW1lQmFsYW5jZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzZXRTZXR0aW5ncyhzZXR0aW5ncz86IFNldHRpbmdzKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFNldHRpbmdzUmVxdWVzdChzZXR0aW5ncykpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNldHRpbmdzKHJlc3BvbnNlLnJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVNldHRpbmdzKHJlc3VsdDogU2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLmZyb250ZW5kRXZlbnRzLnNldHRpbmdzVXBkYXRlKHJlc3VsdCk7XHJcbiAgICAgICAgdGhpcy5zcG90aWZ5LnNldFZvbHVtZShyZXN1bHQudm9sdW1lLCByZXN1bHQudm9sdW1lQmFsYW5jZSk7XHJcbiAgICAgICAgdGhpcy55b3V0dWJlLnNldFZvbHVtZShyZXN1bHQudm9sdW1lLCByZXN1bHQudm9sdW1lQmFsYW5jZSk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUG9zaXRpb25QcmVkaWN0ZXIge1xyXG4gICAgcHVibGljIHByZWRpY3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgbGFzdFBvc2l0aW9uOiBudW1iZXIgPSBEYXRlLm5vdygpO1xyXG4gICAgcHJpdmF0ZSBkdXJhdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgcG9zaXRpb246IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgcHJlZGljdGlvbjogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNhbGxiYWNrOiAocG9zaXRpb246IG51bWJlcikgPT4gdm9pZCkge1xyXG4gICAgICAgIGNvbnN0IHByZWRpY3QgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlZGljdE5vdygpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHByZWRpY3QsIDUwMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcmVkaWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFBvc2l0aW9uKHBvc2l0aW9uOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmxhc3RQb3NpdGlvbiA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICB0aGlzLnByZWRpY3ROb3coKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVzZXRQb3NpdGlvbigpIHtcclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKDAsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJlZGljdE5vdygpIHtcclxuICAgICAgICBsZXQgcHJlZGljdGlvbjtcclxuICAgICAgICBpZiAodGhpcy5kdXJhdGlvbiA9PT0gMCAmJiB0aGlzLnBvc2l0aW9uID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soMCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucHJlZGljdCkgcHJlZGljdGlvbiA9ICh0aGlzLnBvc2l0aW9uICsgKERhdGUubm93KCkgLSB0aGlzLmxhc3RQb3NpdGlvbikpIC8gdGhpcy5kdXJhdGlvbjtcclxuICAgICAgICBpZiAodHlwZW9mIHByZWRpY3Rpb24gPT09IFwibnVtYmVyXCIpIHRoaXMucHJlZGljdGlvbiA9IHByZWRpY3Rpb24gPiAxID8gMSA6IHByZWRpY3Rpb247XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLnByZWRpY3Rpb24pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1BsYXliYWNrUHJvdmlkZXJ9IGZyb20gXCIuLi8uLi8uLi8uLi9tb2RlbHMvUGxheWJhY2tQcm92aWRlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNwb3RpZnlTZWFyY2ggPSAodG9rZW46IHN0cmluZywgcXVlcnk6IHN0cmluZyk6IElBUElSZXF1ZXN0ID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50c1wiLFxyXG4gICAgICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiBcInNlYXJjaFwiLFxyXG4gICAgICAgICAgICBwcm92aWRlcjogUGxheWJhY2tQcm92aWRlci5TUE9USUZZLFxyXG4gICAgICAgICAgICB0b2tlbixcclxuICAgICAgICAgICAgcXVlcnlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1BsYXliYWNrUHJvdmlkZXJ9IGZyb20gXCIuLi8uLi8uLi8uLi9tb2RlbHMvUGxheWJhY2tQcm92aWRlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFlvdVR1YmVTZWFyY2ggPSAocXVlcnk6IHN0cmluZyk6IElBUElSZXF1ZXN0ID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50c1wiLFxyXG4gICAgICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiBcInNlYXJjaFwiLFxyXG4gICAgICAgICAgICBwcm92aWRlcjogUGxheWJhY2tQcm92aWRlci5ZT1VUVUJFLFxyXG4gICAgICAgICAgICBxdWVyeVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtBUElDb25uZWN0aW9uQ29udHJvbGxlcn0gZnJvbSBcIi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyfSBmcm9tIFwiLi4vcGxheWJhY2svU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1Nvbmd9IGZyb20gXCIuLi8uLi9tb2RlbHMvU29uZ1wiO1xyXG5pbXBvcnQge1BsYXliYWNrUHJvdmlkZXJ9IGZyb20gXCIuLi8uLi9tb2RlbHMvUGxheWJhY2tQcm92aWRlclwiO1xyXG5pbXBvcnQge1Nwb3RpZnlTZWFyY2h9IGZyb20gXCIuL3JlcXVlc3RzL3NlYXJjaC9TcG90aWZ5U2VhcmNoXCI7XHJcbmltcG9ydCB7WW91VHViZVNlYXJjaH0gZnJvbSBcIi4vcmVxdWVzdHMvc2VhcmNoL1lvdVR1YmVTZWFyY2hcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTZWFyY2hDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBpOiBBUElDb25uZWN0aW9uQ29udHJvbGxlciwgcHJpdmF0ZSBzcG90aWZ5OiBTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG9uU3BvdGlmeShxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxTb25nPj4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChTcG90aWZ5U2VhcmNoKHRoaXMuc3BvdGlmeS50b2tlbiwgcXVlcnkpKTtcclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAnc3VjY2VzcycpIHJldHVybiByZXNwb25zZS5yZXN1bHQ7XHJcbiAgICAgICAgdGhyb3coXCJBbiBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG9uWW91VHViZShxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxTb25nPj4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChZb3VUdWJlU2VhcmNoKHF1ZXJ5KSwgNjAwMCk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSByZXR1cm4gcmVzcG9uc2UucmVzdWx0O1xyXG4gICAgICAgIHRocm93KFwiQW4gZXJyb3Igb2NjdXJyZWQuXCIpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7VFNSSUV2ZW50c30gZnJvbSBcIi4uL21vZGVscy9FdmVudHNcIjtcclxuaW1wb3J0IHtJbml0aWFsaXphdGlvblN0YXR1c30gZnJvbSBcIi4uL21vZGVscy9Jbml0aWFsaXphdGlvblN0YXR1c1wiO1xyXG5pbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyLCBBUElDb25uZWN0aW9uU3RhdHVzfSBmcm9tIFwiLi9hcGkvQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtTb25nfSBmcm9tIFwiLi4vbW9kZWxzL1NvbmdcIjtcclxuaW1wb3J0IHtTcG90aWZ5QXV0aGVudGljYXRpb25Db250cm9sbGVyfSBmcm9tIFwiLi9zcG90aWZ5L1Nwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtQbGF5YmFja01hc3RlckNvbnRyb2xsZXJ9IGZyb20gXCIuL3BsYXliYWNrL1BsYXliYWNrTWFzdGVyQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1NlYXJjaENvbnRyb2xsZXJ9IGZyb20gXCIuL2FwaS9TZWFyY2hDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7UmVwb3J0UmVxdWVzdH0gZnJvbSBcIi4vYXBpL3JlcXVlc3RzL290aGVyL1JlcG9ydFJlcXVlc3RcIjtcclxuaW1wb3J0IHtTZXR0aW5nc30gZnJvbSBcIi4uL21vZGVscy9TZXR0aW5nc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRTUklDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgc3RhdHVzOiBJbml0aWFsaXphdGlvblN0YXR1cyA9IGRlZmF1bHRTdGF0dXM7XHJcbiAgICBwcml2YXRlIEFQSTogQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIHNwb3RpZnlBdXRoOiBTcG90aWZ5QXV0aGVudGljYXRpb25Db250cm9sbGVyO1xyXG4gICAgcHJpdmF0ZSBwbGF5YmFjazogUGxheWJhY2tNYXN0ZXJDb250cm9sbGVyO1xyXG4gICAgcHJpdmF0ZSBldmVudHM6IFRTUklFdmVudHM7XHJcbiAgICBwcml2YXRlIHNlYXJjaDogU2VhcmNoQ29udHJvbGxlcjtcclxuICAgIHB1YmxpYyByZXBvcnRzOiBhbnkgPSB7c3BvdGlmeVJlcG9ydHM6IFtdfTtcclxuICAgIHByaXZhdGUgYXV0aGVudGljYXRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHB1YmxpYyBpbml0KGp3dDogc3RyaW5nLCBhcGk6IHN0cmluZywgZXZlbnRzOiBUU1JJRXZlbnRzKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSBldmVudHM7XHJcbiAgICAgICAgaWYgKHRoaXMuQVBJKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWJhY2suc2V0RXZlbnRzKGV2ZW50cyk7XHJcbiAgICAgICAgICAgIGV2ZW50cy5lbmFibGVTcG90aWZ5QXV0aCghdGhpcy5hdXRoZW50aWNhdGVkKTtcclxuICAgICAgICAgICAgZXZlbnRzLmluaXRpYWxpemVkKHRoaXMuc3RhdHVzKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLkFQSSA9IG5ldyBBUElDb25uZWN0aW9uQ29udHJvbGxlcihhcGksIGp3dCwge1xyXG4gICAgICAgICAgICBzdGF0dXNDaGFuZ2VkOiBhc3luYyBzdGF0dXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMuYXBpID0gc3RhdHVzID09PSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lKCkuaW5pdGlhbGl6ZWQodGhpcy5zdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzLmFwaSkgYXdhaXQgdGhpcy5zcG90aWZ5QXV0aC5nZXQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IEFQSUNvbm5lY3Rpb25TdGF0dXMuQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkUXVldWUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGxheWJhY2suc2V0U2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGxheWJhY2sgPSBuZXcgUGxheWJhY2tNYXN0ZXJDb250cm9sbGVyKHRoaXMuQVBJLCB0aGlzLmV2ZW50cywgdGhpcy5zdGF0dXMpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoID0gbmV3IFNlYXJjaENvbnRyb2xsZXIodGhpcy5BUEksIHRoaXMucGxheWJhY2suc3BvdGlmeSk7XHJcbiAgICAgICAgdGhpcy5zcG90aWZ5QXV0aCA9IG5ldyBTcG90aWZ5QXV0aGVudGljYXRpb25Db250cm9sbGVyKHRoaXMuQVBJLCB7XHJcbiAgICAgICAgICAgIHN0YXR1c0NoYW5nZWQ6IHRoaXMuc3BvdGlmeVN0YXR1cyxcclxuICAgICAgICAgICAgc3BvdGlmeUF1dGhlbnRpY2F0ZWQ6IChhdXRoZW50aWNhdGVkOiBib29sZWFuLCB0b2tlbj86IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoZW50aWNhdGVkID0gYXV0aGVudGljYXRlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZSgpLmVuYWJsZVNwb3RpZnlBdXRoKCFhdXRoZW50aWNhdGVkKTtcclxuICAgICAgICAgICAgICAgIGlmICh0b2tlbikgdGhpcy5wbGF5YmFjay5zcG90aWZ5LmluaXQodG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lKCkuaW5pdGlhbGl6ZWQodGhpcy5zdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzcG90aWZ5U3RhdHVzKHN0YXR1czogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuc3RhdHVzLnNwb3RpZnkgPSBzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5lKCkuaW5pdGlhbGl6ZWQodGhpcy5zdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB5b3V0dWJlQXBpUmVhZHkoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMueW91dHViZUFwaSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lKCkuaW5pdGlhbGl6ZWQodGhpcy5zdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzcG90aWZ5QXBpUmVhZHkoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMuc3BvdGlmeUFwaSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lKCkuaW5pdGlhbGl6ZWQodGhpcy5zdGF0dXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudHMpIHJldHVybiB0aGlzLmV2ZW50cztcclxuICAgICAgICByZXR1cm4gZGVmYXVsdEV2ZW50cztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRRdWV1ZShwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMucGxheWJhY2subG9hZFF1ZXVlKHBsYXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZXBvcnQocmVhc29uOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnJlcG9ydHMucmVhc29uID0gcmVhc29uO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuQVBJLnJlcXVlc3RzLnJlcXVlc3QoUmVwb3J0UmVxdWVzdCh0aGlzLnJlcG9ydHMpKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZGVmYXVsdEV2ZW50czogVFNSSUV2ZW50cyA9IHtcclxuICAgIHNldHRpbmdzVXBkYXRlOiBmdW5jdGlvbiAocDE6IFNldHRpbmdzKSB7XHJcbiAgICB9LFxyXG4gICAgcXVldWVVcGRhdGU6IGZ1bmN0aW9uIChwMTogQXJyYXk8U29uZz4pIHtcclxuICAgIH0sXHJcbiAgICBlbmFibGVTcG90aWZ5QXV0aDogZnVuY3Rpb24gKHAxOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTcG90aWZ5IEF1dGhlbnRpY2F0aW9uIGlzIG5vdyAlcy5cIiwgKHAxID8gXCJlbmFibGVkXCIgOiBcImRpc2FibGVkXCIpKTtcclxuICAgIH0sXHJcbiAgICBpbml0aWFsaXplZDogZnVuY3Rpb24gKHAxOiBJbml0aWFsaXphdGlvblN0YXR1cykge1xyXG4gICAgfSwgcGF1c2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBBVVNFXCIpO1xyXG4gICAgfSwgcGxheTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUExBWVwiKVxyXG4gICAgfSwgcG9zaXRpb246IGZ1bmN0aW9uIChwMTogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJQT1M6IFwiICsgcDEpXHJcbiAgICB9LCBzb25nOiBmdW5jdGlvbiAocDE6IFNvbmcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNPTkc6IFwiICsgcDEubmFtZSlcclxuICAgIH0sIHN0b3A6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNUT1BcIilcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IGRlZmF1bHRTdGF0dXMgPSB7XHJcbiAgICBhcGk6IGZhbHNlLFxyXG4gICAgc3BvdGlmeUFwaTogZmFsc2UsXHJcbiAgICBzcG90aWZ5OiBmYWxzZSxcclxuICAgIHlvdXR1YmVBcGk6IGZhbHNlLFxyXG4gICAgeW91dHViZTogZmFsc2UsXHJcbn07XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFJlcG9ydFJlcXVlc3QgPSAocmVwb3J0OiBhbnkpOiBJQVBJUmVxdWVzdCA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9ldmVudHNcIixcclxuICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgdHlwZTogXCJyZXBvcnRcIixcclxuICAgICAgICAgICAgbWVzc2FnZTogcmVwb3J0Lm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHJlcG9ydFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtUU1JJQ29udHJvbGxlcn0gZnJvbSBcIi4vY29udHJvbGxlcnMvVFNSSUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtUU1JJV2luZG93fSBmcm9tIFwiLi9tb2RlbHMvVFNSSVdpbmRvd1wiO1xyXG5cclxuY29uc3QgY29udHJvbGxlcjogVFNSSUNvbnRyb2xsZXIgPSBuZXcgVFNSSUNvbnRyb2xsZXIoKTtcclxuXHJcbmNvbnN0IHdpbiA9IHdpbmRvdyBhcyBUU1JJV2luZG93O1xyXG53aW4uVFNSSSA9IGNvbnRyb2xsZXI7XHJcbndpbi5vblNwb3RpZnlXZWJQbGF5YmFja1NES1JlYWR5ID0gKCkgPT4gY29udHJvbGxlci5zcG90aWZ5QXBpUmVhZHkoKTtcclxuXHJcbmNvbnN0IF9nbG9iYWwgPSAod2luZG93IHx8IGdsb2JhbCkgYXMgYW55O1xyXG5fZ2xvYmFsLm9uWW91VHViZUlmcmFtZUFQSVJlYWR5ID0gKCkgPT4gY29udHJvbGxlci55b3V0dWJlQXBpUmVhZHkoKTtcclxuXHJcbi8vIHJlcXVpcmUoXCIuLi9wcm92aWRlcnMvc3BvdGlmeS9zcG90aWZ5LXBsYXliYWNrLXNka1wiKTtcclxucmVxdWlyZShcIi4uL3Byb3ZpZGVycy95b3V0dWJlL3lvdXR1YmUtaWZyYW1lX2FwaVwiKTtcclxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiXHJcbmlmICghd2luZG93WydZVCddKSB7dmFyIFlUID0ge2xvYWRpbmc6IDAsbG9hZGVkOiAwfTt9aWYgKCF3aW5kb3dbJ1lUQ29uZmlnJ10pIHt2YXIgWVRDb25maWcgPSB7J2hvc3QnOiAnaHR0cDovL3d3dy55b3V0dWJlLmNvbSd9O31pZiAoIVlULmxvYWRpbmcpIHtZVC5sb2FkaW5nID0gMTsoZnVuY3Rpb24oKXt2YXIgbCA9IFtdO1lULnJlYWR5ID0gZnVuY3Rpb24oZikge2lmIChZVC5sb2FkZWQpIHtmKCk7fSBlbHNlIHtsLnB1c2goZik7fX07d2luZG93Lm9uWVRSZWFkeSA9IGZ1bmN0aW9uKCkge1lULmxvYWRlZCA9IDE7Zm9yICh2YXIgaSA9IDA7IGkgPCBsLmxlbmd0aDsgaSsrKSB7dHJ5IHtsW2ldKCk7fSBjYXRjaCAoZSkge319fTtZVC5zZXRDb25maWcgPSBmdW5jdGlvbihjKSB7Zm9yICh2YXIgayBpbiBjKSB7aWYgKGMuaGFzT3duUHJvcGVydHkoaykpIHtZVENvbmZpZ1trXSA9IGNba107fX19O3ZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7YS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7YS5pZCA9ICd3d3ctd2lkZ2V0YXBpLXNjcmlwdCc7YS5zcmMgPSAnaHR0cHM6Ly9zLnl0aW1nLmNvbS95dHMvanNiaW4vd3d3LXdpZGdldGFwaS12ZmxVRlZ5RVAvd3d3LXdpZGdldGFwaS5qcyc7YS5hc3luYyA9IHRydWU7dmFyIGMgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0O2lmIChjKSB7dmFyIG4gPSBjLm5vbmNlIHx8IGMuZ2V0QXR0cmlidXRlKCdub25jZScpO2lmIChuKSB7YS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgbik7fX12YXIgYiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTtiLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsIGIpO30pKCk7fSJdLCJzb3VyY2VSb290IjoiIn0=