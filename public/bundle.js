!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var i,o=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"add",song:t}}},s={topic:"twasi-songrequests/events",scope:"action",action:{type:"queue"}},r=function(t){return void 0===t&&(t=!1),{topic:"twasi-songrequests/events",scope:"action",action:{type:t?"skip":"next"}}},u=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},a=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},c=function(){function t(t,e,n){this.api=t,this.jwt=e,this.statusListener=n,this.events=new Map,this.connect()}return t.prototype.connect=function(){var t=this;setTimeout((function(){t.connect()}),3e3),this.client&&this.client.readyState===this.client.OPEN||(this.client=new WebSocket(this.api),this.client.onerror=function(){t.statusListener.statusChanged(i.DISCONNECTED)},this.client.onopen=function(){return t.authorize()},this.client.onclose=function(){t.statusListener.statusChanged(i.DISCONNECTED)},this.requests=new l(this.client,this.events))},t.prototype.authorize=function(){return u(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return[4,this.requests.request({topic:"auth",scope:"action",action:{type:"JWT_TOKEN",token:this.jwt}})];case 1:return"success"!==(t=n.sent()).status?[3,3]:(e=t.result.user.twitchId,[4,this.requests.request({topic:"twasi-songrequests/events",scope:"subscribe",config:{channel:e}})]);case 2:t=n.sent(),n.label=3;case 3:return this.statusListener.statusChanged("success"===t.status?i.CONNECTED:i.UNAUTHORIZED),[2]}}))}))},t.prototype.on=function(t,e){this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e])},t.prototype.add=function(t){return u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.requests.request(o(t))];case 1:return[2,e.sent()]}}))}))},t.prototype.getQueue=function(){return u(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.requests.request(s)];case 1:return[2,t.sent().result]}}))}))},t.prototype.next=function(t){return void 0===t&&(t=!1),u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.requests.request(r(t))];case 1:return[2,e.sent()]}}))}))},t}();!function(t){t[t.CONNECTED=0]="CONNECTED",t[t.DISCONNECTED=1]="DISCONNECTED",t[t.UNAUTHORIZED=2]="UNAUTHORIZED"}(i||(i={}));var h,p,l=function(){function t(t,e){var n=this;this.count=0,this.pending=new Map,this.events=new Map,e&&(this.events=e),this.client=t,this.client.onmessage=function(t){var e=JSON.parse(t.data);e.ref&&n.pending.has(e.ref)?(n.pending.get(e.ref)(e.result),n.pending.delete(e.ref)):e.event&&n.events.has(e.event)&&n.events.get(e.event).forEach((function(t){t(e.details,new Date(e.timeStamp))}))}}return t.prototype.request=function(t,e){var n=this;return void 0===e&&(e=3e3),t.ref||(t.ref=this.newRef()),new Promise((function(i,o){n.pending.set(t.ref,i),n.client.send(JSON.stringify(t)),setTimeout((function(){n.pending.has(t.ref)&&(n.pending.delete(t.ref),o("Timed Out"))}),e)}))},t.prototype.on=function(t,e){this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e])},t.prototype.newRef=function(){return(this.count++).toString()},t}(),f={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"get"}},d={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"init"}},y=function(t){return{topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"set",code:t}}},v={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"refresh"}},w={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"remove"}},b=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},g=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},m=function(){function t(t,e){var n=this;this.token=null,this.expires=null,this.api=t,this.listener=e;window.addEventListener("message",(function(t){return b(n,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return"string"!=typeof t.data?[2]:t.data.startsWith("code:")?[4,this.set(t.data.substr("code:".length))]:[2];case 1:return e.sent(),this.win.postMessage("close","*"),[2]}}))}))}),!1)}return t.prototype.get=function(){return b(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(f)];case 1:return t=e.sent(),this.handle(t.token?t:null),[2]}}))}))},t.prototype.init=function(){return b(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(d)];case 1:return t=e.sent(),this.win=window.open(t.result.uri,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"),[2]}}))}))},t.prototype.set=function(t){return b(this,void 0,void 0,(function(){var e;return g(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(y(t))];case 1:return e=n.sent(),this.handle(e),[2]}}))}))},t.prototype.refresh=function(){return b(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(v)];case 1:return t=e.sent(),this.handle(t.token?t:null),[2]}}))}))},t.prototype.remove=function(){return b(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(w)];case 1:if("success"!==t.sent().status)throw"An error occured";return[2]}}))}))},t.prototype.handle=function(t){var e=this;t?(this.token=t.token,this.expires=new Date(t.expires),this.listener.spotifyAuthenticated(!0,t.token),setTimeout((function(){return b(e,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return this.token!==t.token?[2]:[4,this.refresh()];case 1:return e.sent(),[2]}}))}))}),this.expires.getTime()-Date.now())):this.listener.spotifyAuthenticated(!1)},t}(),P=function(t){this.events=t},q=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},E=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},S=function(t){function e(e,n){var i=t.call(this,e)||this;return i.events=e,i.api=n,i}return q(e,t),e.prototype.init=function(t){var e=this;this.player&&this.player.disconnect(),this.token=t;var n=new Spotify.Player({name:"Twasi-Panel",getOAuthToken:function(e){e(t)}});n.addListener("initialization_error",(function(t){var e=t.message;window.TSRI.reports.spotifyReports.push({type:"initialization_error",message:e})})),n.addListener("authentication_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return E(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"authentication_error",message:n}),[2]}))}))})),n.addListener("account_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return E(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"account_error",message:n}),[2]}))}))})),n.addListener("playback_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return E(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"playback_error",message:n}),[2]}))}))})),n.addListener("player_state_changed",(function(t){return k(e,void 0,void 0,(function(){return E(this,(function(e){return t?(t.position&&t.duration?this.events.onPositionChange(t.position,t.duration):t.paused||this.events.onPositionChange(0,this.song.duration),t.paused?this.events.onPause():this.events.onPlay(this.song),t.paused&&t.disallows.resuming&&t.position&&t.duration&&t.position/t.duration>.98&&this.events.onNext(),[2]):[2]}))}))})),n.addListener("ready",(function(t){var n=t.device_id;e.id=n})),n.addListener("not_ready",(function(t){t.device_id;return k(e,void 0,void 0,(function(){return E(this,(function(t){switch(t.label){case 0:return[4,window.TSRI.spotifyAuth.refresh()];case 1:return t.sent(),[2]}}))}))})),this.player=n,n.connect()},e.prototype.pause=function(){this.player.pause()},e.prototype.play=function(t,e){return k(this,void 0,void 0,(function(){return E(this,(function(e){switch(e.label){case 0:return this.song&&this.song.uri===t.uri?(this.player.resume(),[3,3]):[3,1];case 1:return this.song=t,[4,fetch("https://api.spotify.com/v1/me/player/play?device_id="+this.id,{method:"PUT",body:JSON.stringify({uris:[t.uri]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}})];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.seek=function(t){this.player.seek(this.song.duration*t)},e.prototype.setVolume=function(t,e){e-=.5,t=t/10*7.5,t+=.25*(e*=-2),this.player.setVolume(t)},e.prototype.resume=function(){this.player.resume()},e}(P),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),O=function(t){function e(e,n,i){var o=t.call(this,e)||this;if(!i)throw"API_NOT_READY";o.player=new YT.Player("youtube-player",{events:{onStateChange:function(t){return o.onUpdate(t)}}});var s=function(){o.setPos(),setTimeout(s,500)};return s(),o}return T(e,t),e.prototype.setPos=function(){try{this.events.onPositionChange(1e3*this.player.getCurrentTime(),1e3*this.player.getDuration())}catch(t){}},e.prototype.onUpdate=function(t){1===t.data?this.events.onPlay():0===t.data?this.events.onNext():this.events.onPause(),this.setPos()},e.prototype.pause=function(){this.player.pauseVideo()},e.prototype.play=function(t,e){this.player.loadVideoById(t.uri)},e.prototype.seek=function(t){this.player.seekTo(this.player.getDuration()*t)},e.prototype.setVolume=function(t,e){e-=.5,t=t/10*7.5,t+=.25*(e*=2),this.player.setVolume(100*t)},e.prototype.resume=function(){this.player.playVideo()},e}(P);!function(t){t[t.NONE=0]="NONE",t[t.SPOTIFY=1]="SPOTIFY",t[t.YOUTUBE=2]="YOUTUBE"}(p||(p={}));var x={topic:"twasi-songrequests/events",scope:"action",action:{type:"back"}},_=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"settings",settings:t}}},A=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},N=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},C=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,u=s.length;r<u;r++,o++)i[o]=s[r];return i},U=function(){function t(t,e,n){var i=this;this.api=t,this.frontendEvents=e,this.song=null,this.queue=[],this._history=[],this.firstPlayback=!0,this.shouldPlay=!1,this.posPredicter=new I((function(t){return i.frontendEvents.position(t)})),this.spotify=new S(this.playbackProviderEvents(p.SPOTIFY),t),this.youtube=new O(this.playbackProviderEvents(p.YOUTUBE),t,n.youtubeApi),t.on("queue",(function(t){return i.setQueue(t.queue,t.history,i.shouldPlay)})),t.on("settings",(function(t){i.settings=t}))}return t.prototype.setEvents=function(t){this.frontendEvents=t,this.shouldPlay?t.play():t.pause();var e=C(this.queue);t.queueUpdate(e,this._history),t.song(this.song),t.settingsUpdate(this.settings)},t.prototype.play=function(t,e){return A(this,void 0,void 0,(function(){return N(this,(function(n){switch(n.label){case 0:return this.shouldPlay=!0,e?(this.song&&this.pause(),this.song=e,this.getController(e.provider).play(e,t),[3,4]):[3,1];case 1:return this.song?(this.firstPlayback||0===this.posPredicter.prediction?(this.firstPlayback=!1,this.play(!0,this.song)):this.getController(this.song.provider).resume(),[3,4]):[3,2];case 2:return[4,this.next()];case 3:n.sent(),n.label=4;case 4:return this.frontendEvents.song(this.song),this.shouldPlay=!0,[2]}}))}))},t.prototype.pause=function(){this.shouldPlay=!0,this.song&&this.getController(this.song.provider).pause()},t.prototype.getController=function(t){switch(t){case p.NONE:default:return null;case p.SPOTIFY:return this.spotify;case p.YOUTUBE:return this.youtube}},t.prototype.seek=function(t){this.song&&this.getController(this.song.provider).seek(t)},t.prototype.localAdd=function(t){this.queue.push(t),this.frontendEvents.queueUpdate(this.queue,this._history),this.posPredicter.predict||this.play(!1,void 0)},t.prototype.setQueue=function(t,e,n){if(void 0===n&&(n=!0),t.length){var i=t[0];n&&(!this.song||this.song&&this.song.uri!==i.uri)?this.play(!0,i):(this.frontendEvents.song(t[0]),this.song=i)}else this.posPredicter.resetPosition(),this.song&&this.pause(),this.song=null,this.frontendEvents.song(null),this.posPredicter.resetPosition();this.queue=t,this._history=e,this.frontendEvents.queueUpdate(this.queue,this._history)},t.prototype.localNext=function(){this.posPredicter.resetPosition(),this.song&&(this.pause(),this._history.unshift(this.song)),this.queue.length?(this.play(!0,this.queue[0]),this.queue.shift()):(this.song=null,this.frontendEvents.song(null),this.posPredicter.resetPosition()),this.frontendEvents.queueUpdate(this.queue,this._history)},t.prototype.back=function(){return A(this,void 0,void 0,(function(){var t;return N(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(x)];case 1:if("success"!==(t=e.sent()).status)throw t.message;return[2]}}))}))},t.prototype.next=function(){return A(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(r(!1))];case 1:return t.sent(),[2]}}))}))},t.prototype.skip=function(){return A(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(r(!0))];case 1:return t.sent(),[2]}}))}))},t.prototype.apiAdd=function(t){return A(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(o(t))];case 1:return e.sent(),[2]}}))}))},t.prototype.playbackProviderEvents=function(t){var e=this;return{onPause:function(){e.song&&![p.NONE,t].includes(e.song.provider)||(e.posPredicter.predict=!1,e.frontendEvents.stop())},onPlay:function(n){e.song&&e.song.provider===t&&(e.posPredicter.predict=!0,e.frontendEvents.play())},onPositionChange:function(n,i){e.song&&e.song.provider===t&&e.posPredicter.setPosition(n,i)},onNext:function(){return e.next()}}},t.prototype.loadQueue=function(t){return void 0===t&&(t=!0),A(this,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(s)];case 1:return e=n.sent().result,this.setQueue(e.queue,e.history,t),[2]}}))}))},t.prototype.setVolume=function(t){return A(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.setSettings({volume:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.setVolumeBalance=function(t){return A(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.setSettings({volumeBalance:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.setSettings=function(t){return A(this,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(_(t))];case 1:return"success"===(e=n.sent()).status&&this.handleSettings(e.result),[2,e]}}))}))},t.prototype.handleSettings=function(t){this.frontendEvents.settingsUpdate(t),this.spotify.setVolume(t.volume,t.volumeBalance),this.youtube.setVolume(t.volume,t.volumeBalance)},t}(),I=function(){function t(t){var e=this;this.callback=t,this.predict=!1,this.lastPosition=Date.now(),this.duration=0,this.position=0,this.prediction=0;var n=function(){e.predictNow(),setTimeout(n,500)};n()}return t.prototype.setPosition=function(t,e){this.lastPosition=Date.now(),this.position=t,this.duration=e,this.predictNow()},t.prototype.resetPosition=function(){this.setPosition(0,0)},t.prototype.predictNow=function(){var t;0!==this.duration||0!==this.position?(this.predict&&(t=(this.position+(Date.now()-this.lastPosition))/this.duration),"number"==typeof t&&(this.prediction=t>1?1:t),this.callback(this.prediction)):this.callback(0)},t}(),D=function(t,e){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"search",provider:p.SPOTIFY,token:t,query:e}}},R=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"search",provider:p.YOUTUBE,query:t}}},j=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},Y=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},z=function(){function t(t,e){this.api=t,this.spotify=e}return t.prototype.onSpotify=function(t){return j(this,void 0,void 0,(function(){var e;return Y(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(D(this.spotify.token,t))];case 1:if("success"===(e=n.sent()).status)return[2,e.result];throw"An error occurred."}}))}))},t.prototype.onYouTube=function(t){return j(this,void 0,void 0,(function(){var e;return Y(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(R(t),6e3)];case 1:if("success"===(e=n.sent()).status)return[2,e.result];throw"An error occurred."}}))}))},t}();n.d(e,"a",(function(){return V}));var B=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},L=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},V=function(){function t(){this.status=Q,this.reports={spotifyReports:[]},this.authenticated=!1}return t.prototype.init=function(t,e,n){var o=this;if(this.events=n,this.API)return this.playback.setEvents(n),n.enableSpotifyAuth(!this.authenticated),void n.initialized(this.status);this.API=new c(e,t,{statusChanged:function(t){return B(o,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return this.status.api=0===t,this.e().initialized(this.status),this.status.api?[4,this.spotifyAuth.get()]:[3,2];case 1:e.sent(),e.label=2;case 2:return t!==i.CONNECTED?[3,4]:(this.loadQueue(!1),[4,this.playback.setSettings()]);case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}}),this.playback=new U(this.API,this.events,this.status),this.search=new z(this.API,this.playback.spotify),this.spotifyAuth=new m(this.API,{statusChanged:this.spotifyStatus,spotifyAuthenticated:function(t,e){o.authenticated=t,o.e().enableSpotifyAuth(!t),e&&o.playback.spotify.init(e)}}),this.e().initialized(this.status)},t.prototype.spotifyStatus=function(t){this.status.spotify=t,this.e().initialized(this.status)},t.prototype.youtubeApiReady=function(){this.status.youtubeApi=!0,this.e().initialized(this.status)},t.prototype.spotifyApiReady=function(){this.status.spotifyApi=!0,this.e().initialized(this.status)},t.prototype.e=function(){return this.events?this.events:M},t.prototype.loadQueue=function(t){return void 0===t&&(t=!0),B(this,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return[4,this.playback.loadQueue(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.report=function(t){return B(this,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return this.reports.reason=t,[4,this.API.requests.request((n=this.reports,{topic:"twasi-songrequests/events",scope:"action",action:{type:"report",message:n.message,report:n}}))];case 1:return e.sent(),[2]}var n}))}))},t}(),M={settingsUpdate:function(t){},queueUpdate:function(t){},enableSpotifyAuth:function(t){console.log("Spotify Authentication is now %s.",t?"enabled":"disabled")},initialized:function(t){},pause:function(){console.log("PAUSE")},play:function(){console.log("PLAY")},position:function(t){console.log("POS: "+t)},song:function(t){console.log("SONG: "+t.name)},stop:function(){console.log("STOP")}},Q={api:!1,spotifyApi:!1,spotify:!1,youtubeApi:!1,youtube:!1}},function(t,e,n){"use strict";n.r(e),function(t){var e=new(n(0).a),i=window;i.TSRI=e,i.onSpotifyWebPlaybackSDKReady=function(){return e.spotifyApiReady()},(window||t).onYouTubeIframeAPIReady=function(){return e.youtubeApiReady()},n(4)}.call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,function(t,e){if(!window.YT)var n={loading:0,loaded:0};if(!window.YTConfig)var i={host:"http://www.youtube.com"};n.loading||(n.loading=1,function(){var t=[];n.ready=function(e){n.loaded?e():t.push(e)},window.onYTReady=function(){n.loaded=1;for(var e=0;e<t.length;e++)try{t[e]()}catch(t){}},n.setConfig=function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])};var e=document.createElement("script");e.type="text/javascript",e.id="www-widgetapi-script",e.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflUFVyEP/www-widgetapi.js",e.async=!0;var o=document.currentScript;if(o){var s=o.nonce||o.getAttribute("nonce");s&&e.setAttribute("nonce",s)}var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQWRkUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc29uZ3JlcXVlc3RzL0dldFF1ZXVlUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9OZXh0UmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1BsYXliYWNrUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzL0dldFJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzL0luaXRSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9TZXRSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9SZWZyZXNoUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvUmVtb3ZlUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvc3BvdGlmeS9TcG90aWZ5QXV0aGVudGljYXRpb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9wbGF5YmFjay9QbGF5YmFja1NsYXZlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvcGxheWJhY2svU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvcGxheWJhY2svWW91dFR1YmVQbGF5YmFja0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQmFja1JlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9vdGhlci9TZXR0aW5nc1JlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL3BsYXliYWNrL1BsYXliYWNrTWFzdGVyQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3NlYXJjaC9TcG90aWZ5U2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc2VhcmNoL1lvdVR1YmVTZWFyY2gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9TZWFyY2hDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9UU1JJQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL290aGVyL1JlcG9ydFJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RTUkkudHMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9wcm92aWRlcnMveW91dHViZS95b3V0dWJlLWlmcmFtZV9hcGkuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJBUElDb25uZWN0aW9uU3RhdHVzIiwiQWRkUmVxdWVzdCIsInNvbmciLCJ0b3BpYyIsInNjb3BlIiwiYWN0aW9uIiwidHlwZSIsIkdldFF1ZXVlUmVxdWVzdCIsIk5leHRSZXF1ZXN0Iiwic2tpcCIsImFwaSIsImp3dCIsInN0YXR1c0xpc3RlbmVyIiwiZXZlbnRzIiwiTWFwIiwidGhpcyIsImNvbm5lY3QiLCJzZXRUaW1lb3V0IiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJXZWJTb2NrZXQiLCJvbmVycm9yIiwic3RhdHVzQ2hhbmdlZCIsIkRJU0NPTk5FQ1RFRCIsIm9ub3BlbiIsImF1dGhvcml6ZSIsIm9uY2xvc2UiLCJyZXF1ZXN0cyIsIkFQSVJlcXVlc3RNYW5hZ2VyIiwicmVxdWVzdCIsInRva2VuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJjaGFubmVsIiwicmVzdWx0IiwidXNlciIsInR3aXRjaElkIiwiY29uZmlnIiwiQ09OTkVDVEVEIiwiVU5BVVRIT1JJWkVEIiwib24iLCJldmVudCIsImhhbmRsZXIiLCJoYXMiLCJwdXNoIiwic2V0IiwiYWRkIiwiZ2V0UXVldWUiLCJuZXh0IiwiUGxheWJhY2tQcm92aWRlciIsImNvdW50IiwicGVuZGluZyIsIm9ubWVzc2FnZSIsIm1zZyIsIm9iIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInJlZiIsImRlbGV0ZSIsImZvckVhY2giLCJkZXRhaWxzIiwiRGF0ZSIsInRpbWVTdGFtcCIsInJlcSIsInRpbWVvdXQiLCJuZXdSZWYiLCJQcm9taXNlIiwicmVzIiwicmVqIiwic2VuZCIsInN0cmluZ2lmeSIsInRvU3RyaW5nIiwiR2V0UmVxdWVzdCIsIkluaXRSZXF1ZXN0IiwiU2V0UmVxdWVzdCIsImNvZGUiLCJSZWZyZXNoUmVxdWVzdCIsIlJlbW92ZVJlcXVlc3QiLCJsaXN0ZW5lciIsImV4cGlyZXMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwic3RhcnRzV2l0aCIsInN1YnN0ciIsImxlbmd0aCIsIndpbiIsInBvc3RNZXNzYWdlIiwiaGFuZGxlIiwiaW5pdCIsIm9wZW4iLCJ1cmkiLCJyZWZyZXNoIiwicmVtb3ZlIiwic3BvdGlmeUF1dGhlbnRpY2F0ZWQiLCJnZXRUaW1lIiwibm93IiwicGxheWVyIiwiZGlzY29ubmVjdCIsIlNwb3RpZnkiLCJQbGF5ZXIiLCJnZXRPQXV0aFRva2VuIiwiY2IiLCJhZGRMaXN0ZW5lciIsIm1lc3NhZ2UiLCJUU1JJIiwicmVwb3J0cyIsInNwb3RpZnlSZXBvcnRzIiwic3RhdGUiLCJwb3NpdGlvbiIsImR1cmF0aW9uIiwib25Qb3NpdGlvbkNoYW5nZSIsInBhdXNlZCIsIm9uUGF1c2UiLCJvblBsYXkiLCJkaXNhbGxvd3MiLCJyZXN1bWluZyIsIm9uTmV4dCIsImRldmljZV9pZCIsImlkIiwic3BvdGlmeUF1dGgiLCJwYXVzZSIsInBsYXkiLCJmb3JjZUJlZ2luIiwicmVzdW1lIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwidXJpcyIsImhlYWRlcnMiLCJzZWVrIiwic2V0Vm9sdW1lIiwidm9sdW1lIiwidm9sdW1lQmFsYW5jZSIsIlBsYXliYWNrU2xhdmVDb250cm9sbGVyIiwieW91dHViZUFwaSIsIllUIiwib25TdGF0ZUNoYW5nZSIsIm9uVXBkYXRlIiwicGVybWFVcGRhdGUiLCJzZXRQb3MiLCJnZXRDdXJyZW50VGltZSIsImdldER1cmF0aW9uIiwiZSIsInBhdXNlVmlkZW8iLCJsb2FkVmlkZW9CeUlkIiwic2Vla1RvIiwicGxheVZpZGVvIiwiQmFja1JlcXVlc3QiLCJTZXR0aW5nc1JlcXVlc3QiLCJzZXR0aW5ncyIsImZyb250ZW5kRXZlbnRzIiwicXVldWUiLCJfaGlzdG9yeSIsImZpcnN0UGxheWJhY2siLCJzaG91bGRQbGF5IiwicG9zUHJlZGljdGVyIiwiUG9zaXRpb25QcmVkaWN0ZXIiLCJwb3MiLCJzcG90aWZ5IiwiU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlciIsInBsYXliYWNrUHJvdmlkZXJFdmVudHMiLCJTUE9USUZZIiwieW91dHViZSIsIllvdXRUdWJlUGxheWJhY2tDb250cm9sbGVyIiwiWU9VVFVCRSIsInF1ZXVlVXBkYXRlIiwic2V0UXVldWUiLCJoaXN0b3J5Iiwic2V0RXZlbnRzIiwidGVtcFF1ZXVlIiwic2V0dGluZ3NVcGRhdGUiLCJnZXRDb250cm9sbGVyIiwicHJvdmlkZXIiLCJwcmVkaWN0aW9uIiwiTk9ORSIsImxvY2FsQWRkIiwicHJlZGljdCIsInVuZGVmaW5lZCIsInJlc2V0UG9zaXRpb24iLCJsb2NhbE5leHQiLCJ1bnNoaWZ0Iiwic2hpZnQiLCJiYWNrIiwiYXBpQWRkIiwic2VsZiIsImluY2x1ZGVzIiwic3RvcCIsInAxIiwicDIiLCJzZXRQb3NpdGlvbiIsImxvYWRRdWV1ZSIsInNldFNldHRpbmdzIiwic2V0Vm9sdW1lQmFsYW5jZSIsImhhbmRsZVNldHRpbmdzIiwiY2FsbGJhY2siLCJsYXN0UG9zaXRpb24iLCJwcmVkaWN0Tm93IiwiU3BvdGlmeVNlYXJjaCIsInF1ZXJ5IiwiWW91VHViZVNlYXJjaCIsIm9uU3BvdGlmeSIsIm9uWW91VHViZSIsImF1dGhlbnRpY2F0ZWQiLCJBUEkiLCJwbGF5YmFjayIsImVuYWJsZVNwb3RpZnlBdXRoIiwiaW5pdGlhbGl6ZWQiLCJzZWFyY2giLCJzcG90aWZ5U3RhdHVzIiwieW91dHViZUFwaVJlYWR5Iiwic3BvdGlmeUFwaVJlYWR5Iiwic3BvdGlmeUFwaSIsImRlZmF1bHRFdmVudHMiLCJyZXBvcnQiLCJyZWFzb24iLCJjb25zb2xlIiwibG9nIiwiY29udHJvbGxlciIsIm9uU3BvdGlmeVdlYlBsYXliYWNrU0RLUmVhZHkiLCJnbG9iYWwiLCJvbllvdVR1YmVJZnJhbWVBUElSZWFkeSIsImciLCJGdW5jdGlvbiIsImxvYWRpbmciLCJsb2FkZWQiLCJZVENvbmZpZyIsInJlYWR5IiwiZiIsIm9uWVRSZWFkeSIsInNldENvbmZpZyIsImsiLCJhIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiYXN5bmMiLCJjdXJyZW50U2NyaXB0Iiwibm9uY2UiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJiIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFB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SyxJQUFJeFEsRUFBSXFRLFNBQVNJLGNBQWMsR0FBSXpRLEVBQUcsQ0FBQyxJQUFJb0IsRUFBSXBCLEVBQUUwUSxPQUFTMVEsRUFBRTJRLGFBQWEsU0FBYXZQLEdBQUlnUCxFQUFFUSxhQUFhLFFBQVN4UCxHQUFLLElBQUl5UCxFQUFJUixTQUFTUyxxQkFBcUIsVUFBVSxHQUFHRCxFQUFFRSxXQUFXQyxhQUFhWixFQUFHUyxHQUE5cUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9Tb25nXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQWRkUmVxdWVzdCA9IChzb25nOiBTb25nKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiYWRkXCIsXHJcbiAgICAgICAgICAgIHNvbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7QWRkUmVxdWVzdH0gZnJvbSBcIi4vcmVxdWVzdHMvc29uZ3JlcXVlc3RzL0FkZFJlcXVlc3RcIjtcclxuaW1wb3J0IHtHZXRRdWV1ZVJlcXVlc3R9IGZyb20gXCIuL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9HZXRRdWV1ZVJlcXVlc3RcIjtcclxuaW1wb3J0IHtOZXh0UmVxdWVzdH0gZnJvbSBcIi4vcmVxdWVzdHMvc29uZ3JlcXVlc3RzL05leHRSZXF1ZXN0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIHJlcXVlc3RzOiBBUElSZXF1ZXN0TWFuYWdlcjtcclxuICAgIHByaXZhdGUgZXZlbnRzOiBNYXA8c3RyaW5nLCBBcnJheTwoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQ+PiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBwcml2YXRlIGNsaWVudDogV2ViU29ja2V0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgYXBpOiBzdHJpbmcsXHJcbiAgICAgICAgcHJpdmF0ZSBqd3Q6IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIHN0YXR1c0xpc3RlbmVyOiBBUElDb25uZWN0aW9uU3RhdHVzTGlzdGVuZXJcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMuY29ubmVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29ubmVjdCgpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2xpZW50ICYmIHRoaXMuY2xpZW50LnJlYWR5U3RhdGUgPT09IHRoaXMuY2xpZW50Lk9QRU4pIHJldHVybjtcclxuICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBXZWJTb2NrZXQodGhpcy5hcGkpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzTGlzdGVuZXIuc3RhdHVzQ2hhbmdlZChBUElDb25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNsaWVudC5vbm9wZW4gPSAoKSA9PiB0aGlzLmF1dGhvcml6ZSgpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50Lm9uY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzTGlzdGVuZXIuc3RhdHVzQ2hhbmdlZChBUElDb25uZWN0aW9uU3RhdHVzLkRJU0NPTk5FQ1RFRCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RzID0gbmV3IEFQSVJlcXVlc3RNYW5hZ2VyKHRoaXMuY2xpZW50LCB0aGlzLmV2ZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBhdXRob3JpemUoKSB7XHJcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KHtcclxuICAgICAgICAgICAgdG9waWM6ICdhdXRoJyxcclxuICAgICAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgICAgIGFjdGlvbjoge3R5cGU6ICdKV1RfVE9LRU4nLCB0b2tlbjogdGhpcy5qd3R9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGFubmVsID0gcmVzcG9uc2UucmVzdWx0LnVzZXIudHdpdGNoSWQ7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KHtcclxuICAgICAgICAgICAgICAgIHRvcGljOiAndHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50cycsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogXCJzdWJzY3JpYmVcIixcclxuICAgICAgICAgICAgICAgIGNvbmZpZzoge2NoYW5uZWx9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdHVzTGlzdGVuZXIuc3RhdHVzQ2hhbmdlZChyZXNwb25zZS5zdGF0dXMgPT09ICdzdWNjZXNzJyA/IEFQSUNvbm5lY3Rpb25TdGF0dXMuQ09OTkVDVEVEIDogQVBJQ29ubmVjdGlvblN0YXR1cy5VTkFVVEhPUklaRUQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBoYW5kbGVyOiAoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzLmhhcyhldmVudCkpIHRoaXMuZXZlbnRzLnNldChldmVudCwgW2hhbmRsZXJdKTtcclxuICAgICAgICBlbHNlIHRoaXMuZXZlbnRzLmdldChldmVudCkucHVzaChoYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgYWRkKHNvbmc6IFNvbmcpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KEFkZFJlcXVlc3Qoc29uZykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRRdWV1ZSgpIHtcclxuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMucmVxdWVzdHMucmVxdWVzdChHZXRRdWV1ZVJlcXVlc3QpKS5yZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG5leHQoc2tpcDogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVxdWVzdHMucmVxdWVzdChOZXh0UmVxdWVzdChza2lwKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIEFQSUNvbm5lY3Rpb25TdGF0dXMge1xyXG4gICAgQ09OTkVDVEVELCBESVNDT05ORUNURUQsIFVOQVVUSE9SSVpFRFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFQSUNvbm5lY3Rpb25TdGF0dXNMaXN0ZW5lciB7XHJcbiAgICBzdGF0dXNDaGFuZ2VkOiAoc3RhdHVzOiBBUElDb25uZWN0aW9uU3RhdHVzKSA9PiB2b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUFQSVJlcXVlc3Qge1xyXG4gICAgcmVmPzogc3RyaW5nO1xyXG4gICAgdG9waWM6IHN0cmluZztcclxuICAgIHNjb3BlOiAnYWN0aW9uJyB8ICdzdWJzY3JpYmUnO1xyXG4gICAgYWN0aW9uPzogYW55O1xyXG4gICAgY29uZmlnPzogYW55O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQVBJUmVxdWVzdE1hbmFnZXIge1xyXG4gICAgcHJpdmF0ZSBjb3VudDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgcGVuZGluZzogTWFwPHN0cmluZywgKHJlcz86IGFueSkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIGV2ZW50czogTWFwPHN0cmluZywgQXJyYXk8KGRldGFpbHM6IGFueSwgdGltZVN0YW1wOiBEYXRlKSA9PiB2b2lkPj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIGNsaWVudDogV2ViU29ja2V0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNsaWVudDogV2ViU29ja2V0LCBldmVudHM/OiBNYXA8c3RyaW5nLCBBcnJheTwoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQ+Pikge1xyXG4gICAgICAgIGlmIChldmVudHMpIHRoaXMuZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xyXG4gICAgICAgIHRoaXMuY2xpZW50Lm9ubWVzc2FnZSA9IChtc2cpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb2IgPSBKU09OLnBhcnNlKG1zZy5kYXRhKSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGlmIChvYi5yZWYgJiYgdGhpcy5wZW5kaW5nLmhhcyhvYi5yZWYpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcuZ2V0KG9iLnJlZikob2IucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZy5kZWxldGUob2IucmVmKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChvYi5ldmVudCAmJiB0aGlzLmV2ZW50cy5oYXMob2IuZXZlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5nZXQob2IuZXZlbnQpLmZvckVhY2goaGFuZGxlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcihvYi5kZXRhaWxzLCBuZXcgRGF0ZShvYi50aW1lU3RhbXApKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlcXVlc3QocmVxOiBJQVBJUmVxdWVzdCwgdGltZW91dDogbnVtYmVyID0gMzAwMCk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKCFyZXEucmVmKSByZXEucmVmID0gdGhpcy5uZXdSZWYoKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzOiAocmVzOiBhbnkpID0+IHZvaWQsIHJlajogKGVycj86IGFueSkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcuc2V0KHJlcS5yZWYsIHJlcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxKSk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmcuaGFzKHJlcS5yZWYpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcuZGVsZXRlKHJlcS5yZWYpO1xyXG4gICAgICAgICAgICAgICAgcmVqKFwiVGltZWQgT3V0XCIpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbihldmVudDogc3RyaW5nLCBoYW5kbGVyOiAoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzLmhhcyhldmVudCkpIHRoaXMuZXZlbnRzLnNldChldmVudCwgW2hhbmRsZXJdKTtcclxuICAgICAgICBlbHNlIHRoaXMuZXZlbnRzLmdldChldmVudCkucHVzaChoYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5ld1JlZigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5jb3VudCsrKS50b1N0cmluZygpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEdldFF1ZXVlUmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgIGFjdGlvbjoge1xyXG4gICAgICAgIHR5cGU6IFwicXVldWVcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBOZXh0UmVxdWVzdCA9IChza2lwOiBib29sZWFuID0gZmFsc2UpOiBJQVBJUmVxdWVzdCA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9ldmVudHNcIixcclxuICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgdHlwZTogc2tpcCA/IFwic2tpcFwiIDogXCJuZXh0XCJcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsImV4cG9ydCBlbnVtIFBsYXliYWNrUHJvdmlkZXIge1xyXG4gICAgTk9ORSwgU1BPVElGWSwgWU9VVFVCRVxyXG59XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEdldFJlcXVlc3Q6IElBUElSZXF1ZXN0ID0ge1xyXG4gICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHNcIixcclxuICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgYWN0aW9uOiB7XHJcbiAgICAgICAgdHlwZTogXCJnZXRcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBJbml0UmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFsc1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcImluaXRcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBTZXRSZXF1ZXN0OiAoY29kZTogc3RyaW5nKSA9PiBJQVBJUmVxdWVzdCA9IChjb2RlOiBzdHJpbmcpID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHNcIixcclxuICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgdHlwZTogXCJzZXRcIixcclxuICAgICAgICAgICAgY29kZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgUmVmcmVzaFJlcXVlc3Q6IElBUElSZXF1ZXN0ID0ge1xyXG4gICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHNcIixcclxuICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgYWN0aW9uOiB7XHJcbiAgICAgICAgdHlwZTogXCJyZWZyZXNoXCJcclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgUmVtb3ZlUmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFsc1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcInJlbW92ZVwiXHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7QVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJ9IGZyb20gXCIuLi9hcGkvQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtHZXRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvR2V0UmVxdWVzdFwiO1xyXG5pbXBvcnQge0luaXRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvSW5pdFJlcXVlc3RcIjtcclxuaW1wb3J0IHtTZXRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvU2V0UmVxdWVzdFwiO1xyXG5pbXBvcnQge1JlZnJlc2hSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvUmVmcmVzaFJlcXVlc3RcIjtcclxuaW1wb3J0IHtSZW1vdmVSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvUmVtb3ZlUmVxdWVzdFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBsaXN0ZW5lcjogSVNwb3RpZnlBdXRoZW50aWNhdGlvbkxpc3RlbmVyO1xyXG5cclxuICAgIHByaXZhdGUgdG9rZW46IHN0cmluZyA9IG51bGw7XHJcbiAgICBwcml2YXRlIGV4cGlyZXM6IERhdGUgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSB3aW46IFdpbmRvdztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyLCBsaXN0ZW5lcjogSVNwb3RpZnlBdXRoZW50aWNhdGlvbkxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hcGkgPSBhcGk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lciA9IGxpc3RlbmVyO1xyXG4gICAgICAgIGNvbnN0IHJlY2VpdmVDb2RlID0gYXN5bmMgKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKCEodHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICghKGV2ZW50LmRhdGEgYXMgc3RyaW5nKS5zdGFydHNXaXRoKFwiY29kZTpcIikpIHJldHVybjtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXQoZXZlbnQuZGF0YS5zdWJzdHIoXCJjb2RlOlwiLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICB0aGlzLndpbi5wb3N0TWVzc2FnZShcImNsb3NlXCIsIFwiKlwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCByZWNlaXZlQ29kZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXQoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChHZXRSZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLmhhbmRsZShyZXMudG9rZW4gPyByZXMgOiBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KEluaXRSZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLndpbiA9IHdpbmRvdy5vcGVuKHJlcy5yZXN1bHQudXJpLCBcInBvcFVwV2luZG93XCIsICdoZWlnaHQ9NTAwLHdpZHRoPTQwMCxsZWZ0PTEwMCx0b3A9MTAwLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsdG9vbGJhcj15ZXMsbWVudWJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubywgc3RhdHVzPXllcycpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgc2V0KGNvZGU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoU2V0UmVxdWVzdChjb2RlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGUocmVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVmcmVzaCgpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFJlZnJlc2hSZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLmhhbmRsZShyZXMudG9rZW4gPyByZXMgOiBudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVtb3ZlKCkge1xyXG4gICAgICAgIGlmICgoYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChSZW1vdmVSZXF1ZXN0KSkuc3RhdHVzICE9PSAnc3VjY2VzcycpXHJcbiAgICAgICAgICAgIHRocm93KFwiQW4gZXJyb3Igb2NjdXJlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZShyZXM6IHsgdG9rZW46IHN0cmluZywgZXhwaXJlczogbnVtYmVyIH0gfCBudWxsKSB7XHJcbiAgICAgICAgaWYgKCFyZXMpIHRoaXMubGlzdGVuZXIuc3BvdGlmeUF1dGhlbnRpY2F0ZWQoZmFsc2UpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuID0gcmVzLnRva2VuO1xyXG4gICAgICAgICAgICB0aGlzLmV4cGlyZXMgPSBuZXcgRGF0ZShyZXMuZXhwaXJlcyk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXIuc3BvdGlmeUF1dGhlbnRpY2F0ZWQodHJ1ZSwgcmVzLnRva2VuKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b2tlbiAhPT0gcmVzLnRva2VuKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfSwgdGhpcy5leHBpcmVzLmdldFRpbWUoKSAtIERhdGUubm93KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3BvdGlmeUF1dGhlbnRpY2F0aW9uTGlzdGVuZXIge1xyXG4gICAgc3RhdHVzQ2hhbmdlZDogKG5ld1N0YXR1czogYm9vbGVhbikgPT4gdm9pZCxcclxuICAgIHNwb3RpZnlBdXRoZW50aWNhdGVkOiAoYXV0aGVudGljYXRlZDogYm9vbGVhbiwgdG9rZW4/OiBzdHJpbmcpID0+IHZvaWRcclxufVxyXG4iLCJpbXBvcnQge1Nvbmd9IGZyb20gXCIuLi8uLi9tb2RlbHMvU29uZ1wiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBsYXliYWNrU2xhdmVDb250cm9sbGVyIHtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBwYXVzZSgpOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBwbGF5KHNvbmc6IFNvbmcsIGZvcmNlQmVnaW46IGJvb2xlYW4pOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZWVrKHBvc2l0aW9uOiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIsIHZvbHVtZUJhbGFuY2U6IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHJlc3VtZSgpOiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBldmVudHM6IFBsYXliYWNrU2xhdmVFdmVudHMpIHtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQbGF5YmFja1NsYXZlRXZlbnRzIHtcclxuICAgIG9uUGxheTogKHNvbmc/OiBTb25nKSA9PiB2b2lkO1xyXG4gICAgb25QYXVzZTogKCkgPT4gdm9pZDtcclxuICAgIG9uUG9zaXRpb25DaGFuZ2U6IChwb3M6IG51bWJlciwgZHVyYXRpb246IG51bWJlcikgPT4gdm9pZDtcclxuICAgIG9uTmV4dDogKCkgPT4gdm9pZDtcclxufVxyXG4iLCJpbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi4vYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7UGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIsIFBsYXliYWNrU2xhdmVFdmVudHN9IGZyb20gXCIuL1BsYXliYWNrU2xhdmVDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7VFNSSVdpbmRvd30gZnJvbSBcIi4uLy4uL21vZGVscy9UU1JJV2luZG93XCI7XHJcblxyXG5kZWNsYXJlIGNvbnN0IFNwb3RpZnk6IGFueTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyIGV4dGVuZHMgUGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIge1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXI6IGFueTtcclxuICAgIHByaXZhdGUgc29uZzogU29uZztcclxuICAgIHByaXZhdGUgaWQ6IHN0cmluZztcclxuICAgIHRva2VuOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGV2ZW50czogUGxheWJhY2tTbGF2ZUV2ZW50cywgcHJpdmF0ZSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyKSB7XHJcbiAgICAgICAgc3VwZXIoZXZlbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdCh0b2tlbjogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB0aGlzLnBsYXllci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xyXG4gICAgICAgIGNvbnN0IHBsYXllciA9IG5ldyBTcG90aWZ5LlBsYXllcih7XHJcbiAgICAgICAgICAgIG5hbWU6ICdUd2FzaS1QYW5lbCcsXHJcbiAgICAgICAgICAgIGdldE9BdXRoVG9rZW46IChjYjogKHRva2VuOiBzdHJpbmcpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNiKHRva2VuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEVycm9yIGhhbmRsaW5nXHJcbiAgICAgICAgcGxheWVyLmFkZExpc3RlbmVyKCdpbml0aWFsaXphdGlvbl9lcnJvcicsICh7bWVzc2FnZX06IHsgbWVzc2FnZTogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICAgICAgKHdpbmRvdyBhcyBUU1JJV2luZG93KS5UU1JJLnJlcG9ydHMuc3BvdGlmeVJlcG9ydHMucHVzaCh7dHlwZTogJ2luaXRpYWxpemF0aW9uX2Vycm9yJywgbWVzc2FnZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRMaXN0ZW5lcignYXV0aGVudGljYXRpb25fZXJyb3InLCBhc3luYyAoe21lc3NhZ2V9OiB7IG1lc3NhZ2U6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgICh3aW5kb3cgYXMgVFNSSVdpbmRvdykuVFNSSS5yZXBvcnRzLnNwb3RpZnlSZXBvcnRzLnB1c2goe3R5cGU6ICdhdXRoZW50aWNhdGlvbl9lcnJvcicsIG1lc3NhZ2V9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwbGF5ZXIuYWRkTGlzdGVuZXIoJ2FjY291bnRfZXJyb3InLCBhc3luYyAoe21lc3NhZ2V9OiB7IG1lc3NhZ2U6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgICh3aW5kb3cgYXMgVFNSSVdpbmRvdykuVFNSSS5yZXBvcnRzLnNwb3RpZnlSZXBvcnRzLnB1c2goe3R5cGU6ICdhY2NvdW50X2Vycm9yJywgbWVzc2FnZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRMaXN0ZW5lcigncGxheWJhY2tfZXJyb3InLCBhc3luYyAoe21lc3NhZ2V9OiB7IG1lc3NhZ2U6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgICh3aW5kb3cgYXMgVFNSSVdpbmRvdykuVFNSSS5yZXBvcnRzLnNwb3RpZnlSZXBvcnRzLnB1c2goe3R5cGU6ICdwbGF5YmFja19lcnJvcicsIG1lc3NhZ2V9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUGxheWJhY2sgc3RhdHVzIHVwZGF0ZXNcclxuICAgICAgICBwbGF5ZXIuYWRkTGlzdGVuZXIoJ3BsYXllcl9zdGF0ZV9jaGFuZ2VkJywgYXN5bmMgKHN0YXRlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFzdGF0ZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUucG9zaXRpb24gJiYgc3RhdGUuZHVyYXRpb24pXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vblBvc2l0aW9uQ2hhbmdlKHN0YXRlLnBvc2l0aW9uLCBzdGF0ZS5kdXJhdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFzdGF0ZS5wYXVzZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vblBvc2l0aW9uQ2hhbmdlKDAsIHRoaXMuc29uZy5kdXJhdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5wYXVzZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vblBhdXNlKCk7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5ldmVudHMub25QbGF5KHRoaXMuc29uZyk7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHN0YXRlLnBhdXNlZCAmJiBzdGF0ZS5kaXNhbGxvd3MucmVzdW1pbmdcclxuICAgICAgICAgICAgICAgICYmIHN0YXRlLnBvc2l0aW9uICYmIHN0YXRlLmR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICAmJiAoc3RhdGUucG9zaXRpb24gLyBzdGF0ZS5kdXJhdGlvbiA+IDAuOTgpXHJcbiAgICAgICAgICAgICkgdGhpcy5ldmVudHMub25OZXh0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlYWR5XHJcbiAgICAgICAgcGxheWVyLmFkZExpc3RlbmVyKCdyZWFkeScsICh7ZGV2aWNlX2lkfTogeyBkZXZpY2VfaWQ6IHN0cmluZyB9KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaWQgPSBkZXZpY2VfaWQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE5vdCBSZWFkeVxyXG4gICAgICAgIHBsYXllci5hZGRMaXN0ZW5lcignbm90X3JlYWR5JywgYXN5bmMgKHtkZXZpY2VfaWR9OiB7IGRldmljZV9pZDogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICBhd2FpdCAod2luZG93IGFzIFRTUklXaW5kb3cpLlRTUkkuc3BvdGlmeUF1dGgucmVmcmVzaCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xyXG4gICAgICAgIHBsYXllci5jb25uZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF1c2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIucGF1c2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwbGF5KHNvbmc6IFNvbmcsIGZvcmNlQmVnaW46IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBpZiAodGhpcy5zb25nICYmIHRoaXMuc29uZy51cmkgPT09IHNvbmcudXJpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnJlc3VtZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29uZyA9IHNvbmc7XHJcbiAgICAgICAgICAgIGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5zcG90aWZ5LmNvbS92MS9tZS9wbGF5ZXIvcGxheT9kZXZpY2VfaWQ9JHt0aGlzLmlkfWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7dXJpczogW3NvbmcudXJpXX0pLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy50b2tlbn1gXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2Vlayhwb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIuc2Vlayh0aGlzLnNvbmcuZHVyYXRpb24gKiBwb3NpdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyLCB2b2x1bWVCYWxhbmNlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB2b2x1bWVCYWxhbmNlIC09IC41O1xyXG4gICAgICAgIHZvbHVtZUJhbGFuY2UgKj0gLTI7XHJcbiAgICAgICAgdm9sdW1lID0gdm9sdW1lIC8gMTAgKiA3LjU7XHJcbiAgICAgICAgdm9sdW1lICs9IHZvbHVtZUJhbGFuY2UgKiAuMjU7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIuc2V0Vm9sdW1lKHZvbHVtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzdW1lKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLnJlc3VtZSgpO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQge1BsYXliYWNrU2xhdmVDb250cm9sbGVyLCBQbGF5YmFja1NsYXZlRXZlbnRzfSBmcm9tIFwiLi9QbGF5YmFja1NsYXZlQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1Nvbmd9IGZyb20gXCIuLi8uLi9tb2RlbHMvU29uZ1wiO1xyXG5pbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi4vYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgWW91dFR1YmVQbGF5YmFja0NvbnRyb2xsZXIgZXh0ZW5kcyBQbGF5YmFja1NsYXZlQ29udHJvbGxlciB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGxheWVyOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZXZlbnRzOiBQbGF5YmFja1NsYXZlRXZlbnRzLCBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyLCB5b3V0dWJlQXBpOiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoZXZlbnRzKTtcclxuICAgICAgICBpZiAoIXlvdXR1YmVBcGkpIHRocm93IChcIkFQSV9OT1RfUkVBRFlcIik7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IFlULlBsYXllcigneW91dHViZS1wbGF5ZXInLCB7XHJcbiAgICAgICAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICAgICAgICAgb25TdGF0ZUNoYW5nZTogKGV2ZW50OiBhbnkpID0+IHRoaXMub25VcGRhdGUoZXZlbnQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBwZXJtYVVwZGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3MoKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChwZXJtYVVwZGF0ZSwgNTAwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBlcm1hVXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRQb3MoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub25Qb3NpdGlvbkNoYW5nZSh0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpICogMTAwMCwgdGhpcy5wbGF5ZXIuZ2V0RHVyYXRpb24oKSAqIDEwMDApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblVwZGF0ZShldmVudDogYW55KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmRhdGEgPT09IDEpIHRoaXMuZXZlbnRzLm9uUGxheSgpO1xyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmRhdGEgPT09IDApIHRoaXMuZXZlbnRzLm9uTmV4dCgpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5ldmVudHMub25QYXVzZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0UG9zKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHBhdXNlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgIH1cclxuXHJcbiAgICBwbGF5KHNvbmc6IFNvbmcsIGZvcmNlQmVnaW46IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5sb2FkVmlkZW9CeUlkKHNvbmcudXJpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWVrKHBvc2l0aW9uOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5zZWVrVG8odGhpcy5wbGF5ZXIuZ2V0RHVyYXRpb24oKSAqIHBvc2l0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIsIHZvbHVtZUJhbGFuY2U6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHZvbHVtZUJhbGFuY2UgLT0gLjU7XHJcbiAgICAgICAgdm9sdW1lQmFsYW5jZSAqPSAyO1xyXG4gICAgICAgIHZvbHVtZSA9IHZvbHVtZSAvIDEwICogNy41O1xyXG4gICAgICAgIHZvbHVtZSArPSB2b2x1bWVCYWxhbmNlICogLjI1O1xyXG4gICAgICAgIHRoaXMucGxheWVyLnNldFZvbHVtZSh2b2x1bWUgKiAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3VtZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQmFja1JlcXVlc3Q6IElBUElSZXF1ZXN0ID0ge1xyXG4gICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50c1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcImJhY2tcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtTZXR0aW5nc30gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9TZXR0aW5nc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNldHRpbmdzUmVxdWVzdCA9IChzZXR0aW5ncz86IFNldHRpbmdzKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwic2V0dGluZ3NcIixcclxuICAgICAgICAgICAgc2V0dGluZ3NcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7U3BvdGlmeVBsYXliYWNrQ29udHJvbGxlcn0gZnJvbSBcIi4vU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1lvdXRUdWJlUGxheWJhY2tDb250cm9sbGVyfSBmcm9tIFwiLi9Zb3V0VHViZVBsYXliYWNrQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi4vYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcbmltcG9ydCB7UGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIsIFBsYXliYWNrU2xhdmVFdmVudHN9IGZyb20gXCIuL1BsYXliYWNrU2xhdmVDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7VFNSSUV2ZW50c30gZnJvbSBcIi4uLy4uL21vZGVscy9FdmVudHNcIjtcclxuaW1wb3J0IHtJbml0aWFsaXphdGlvblN0YXR1c30gZnJvbSBcIi4uLy4uL21vZGVscy9Jbml0aWFsaXphdGlvblN0YXR1c1wiO1xyXG5pbXBvcnQge0JhY2tSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9CYWNrUmVxdWVzdFwiO1xyXG5pbXBvcnQge05leHRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9OZXh0UmVxdWVzdFwiO1xyXG5pbXBvcnQge0dldFF1ZXVlUmVxdWVzdH0gZnJvbSBcIi4uL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvR2V0UXVldWVSZXF1ZXN0XCI7XHJcbmltcG9ydCB7QWRkUmVxdWVzdH0gZnJvbSBcIi4uL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQWRkUmVxdWVzdFwiO1xyXG5pbXBvcnQge1NldHRpbmdzfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1NldHRpbmdzXCI7XHJcbmltcG9ydCB7U2V0dGluZ3NSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL290aGVyL1NldHRpbmdzUmVxdWVzdFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXliYWNrTWFzdGVyQ29udHJvbGxlciB7XHJcbiAgICBwcml2YXRlIHNvbmc6IFNvbmcgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBxdWV1ZTogQXJyYXk8U29uZz4gPSBbXTtcclxuICAgIHByaXZhdGUgX2hpc3Rvcnk6IEFycmF5PFNvbmc+ID0gW107XHJcbiAgICBwcml2YXRlIGZpcnN0UGxheWJhY2s6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIHByaXZhdGUgcG9zUHJlZGljdGVyOiBQb3NpdGlvblByZWRpY3RlcjtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3BvdGlmeTogU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlcjtcclxuICAgIHB1YmxpYyByZWFkb25seSB5b3V0dWJlOiBZb3V0VHViZVBsYXliYWNrQ29udHJvbGxlcjtcclxuICAgIHByaXZhdGUgc2hvdWxkUGxheTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogU2V0dGluZ3M7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyLCBwcml2YXRlIGZyb250ZW5kRXZlbnRzOiBUU1JJRXZlbnRzLCBzdGF0dXM6IEluaXRpYWxpemF0aW9uU3RhdHVzKSB7XHJcbiAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIgPSBuZXcgUG9zaXRpb25QcmVkaWN0ZXIocG9zID0+IHRoaXMuZnJvbnRlbmRFdmVudHMucG9zaXRpb24ocG9zKSk7XHJcbiAgICAgICAgdGhpcy5zcG90aWZ5ID0gbmV3IFNwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXIodGhpcy5wbGF5YmFja1Byb3ZpZGVyRXZlbnRzKFBsYXliYWNrUHJvdmlkZXIuU1BPVElGWSksIGFwaSk7XHJcbiAgICAgICAgdGhpcy55b3V0dWJlID0gbmV3IFlvdXRUdWJlUGxheWJhY2tDb250cm9sbGVyKHRoaXMucGxheWJhY2tQcm92aWRlckV2ZW50cyhQbGF5YmFja1Byb3ZpZGVyLllPVVRVQkUpLCBhcGksIHN0YXR1cy55b3V0dWJlQXBpKTtcclxuICAgICAgICBhcGkub24oXCJxdWV1ZVwiLCAocXVldWVVcGRhdGUpID0+IHRoaXMuc2V0UXVldWUocXVldWVVcGRhdGUucXVldWUsIHF1ZXVlVXBkYXRlLmhpc3RvcnksIHRoaXMuc2hvdWxkUGxheSkpO1xyXG4gICAgICAgIGFwaS5vbihcInNldHRpbmdzXCIsIChzZXR0aW5ncykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEV2ZW50cyhldmVudHM6IFRTUklFdmVudHMpIHtcclxuICAgICAgICB0aGlzLmZyb250ZW5kRXZlbnRzID0gZXZlbnRzO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFBsYXkpIGV2ZW50cy5wbGF5KCk7XHJcbiAgICAgICAgZWxzZSBldmVudHMucGF1c2UoKTtcclxuICAgICAgICBsZXQgdGVtcFF1ZXVlID0gWy4uLnRoaXMucXVldWVdO1xyXG4gICAgICAgIGV2ZW50cy5xdWV1ZVVwZGF0ZSh0ZW1wUXVldWUsIHRoaXMuX2hpc3RvcnkpO1xyXG4gICAgICAgIGV2ZW50cy5zb25nKHRoaXMuc29uZyk7XHJcbiAgICAgICAgZXZlbnRzLnNldHRpbmdzVXBkYXRlKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBwbGF5KGZvcmNlQmVnaW46IGJvb2xlYW4sIHNvbmc/OiBTb25nKSB7XHJcbiAgICAgICAgdGhpcy5zaG91bGRQbGF5ID0gdHJ1ZTtcclxuICAgICAgICBpZiAoc29uZykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb25nKSB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc29uZyA9IHNvbmc7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29udHJvbGxlcihzb25nLnByb3ZpZGVyKS5wbGF5KHNvbmcsIGZvcmNlQmVnaW4pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zb25nKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maXJzdFBsYXliYWNrICYmIHRoaXMucG9zUHJlZGljdGVyLnByZWRpY3Rpb24gIT09IDApXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRyb2xsZXIodGhpcy5zb25nLnByb3ZpZGVyKS5yZXN1bWUoKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UGxheWJhY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheSh0cnVlLCB0aGlzLnNvbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGF3YWl0IHRoaXMubmV4dCgpO1xyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyh0aGlzLnNvbmcpO1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBhdXNlKCkge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc29uZykgdGhpcy5nZXRDb250cm9sbGVyKHRoaXMuc29uZy5wcm92aWRlcikucGF1c2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldENvbnRyb2xsZXIocHJvdmlkZXI6IFBsYXliYWNrUHJvdmlkZXIpOiBQbGF5YmFja1NsYXZlQ29udHJvbGxlciB7XHJcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrUHJvdmlkZXIuTk9ORTpcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrUHJvdmlkZXIuU1BPVElGWTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwb3RpZnk7XHJcbiAgICAgICAgICAgIGNhc2UgUGxheWJhY2tQcm92aWRlci5ZT1VUVUJFOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueW91dHViZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlZWsocG9zaXRpb246IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLnNvbmcpIHRoaXMuZ2V0Q29udHJvbGxlcih0aGlzLnNvbmcucHJvdmlkZXIpLnNlZWsocG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsb2NhbEFkZChzb25nOiBTb25nKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHNvbmcpO1xyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMucXVldWVVcGRhdGUodGhpcy5xdWV1ZSwgdGhpcy5faGlzdG9yeSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBvc1ByZWRpY3Rlci5wcmVkaWN0KSB0aGlzLnBsYXkoZmFsc2UsIHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFF1ZXVlKHF1ZXVlOiBBcnJheTxTb25nPiwgaGlzdG9yeTogQXJyYXk8U29uZz4sIHBsYXk6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBzb25nID0gcXVldWVbMF07XHJcbiAgICAgICAgICAgIGlmIChwbGF5ICYmICghdGhpcy5zb25nIHx8ICh0aGlzLnNvbmcgJiYgdGhpcy5zb25nLnVyaSAhPT0gc29uZy51cmkpKSkgdGhpcy5wbGF5KHRydWUsIHNvbmcpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyhxdWV1ZVswXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvbmcgPSBzb25nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb25nKSB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc29uZyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyhudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3Rvcnk7XHJcbiAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5xdWV1ZVVwZGF0ZSh0aGlzLnF1ZXVlLCB0aGlzLl9oaXN0b3J5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9jYWxOZXh0KCkge1xyXG4gICAgICAgIHRoaXMucG9zUHJlZGljdGVyLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICBpZiAodGhpcy5zb25nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcclxuICAgICAgICAgICAgdGhpcy5faGlzdG9yeS51bnNoaWZ0KHRoaXMuc29uZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5xdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zb25nID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5zb25nKG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLnBvc1ByZWRpY3Rlci5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5KHRydWUsIHRoaXMucXVldWVbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMucXVldWVVcGRhdGUodGhpcy5xdWV1ZSwgdGhpcy5faGlzdG9yeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGJhY2soKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoQmFja1JlcXVlc3QpO1xyXG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzICE9PSAnc3VjY2VzcycpXHJcbiAgICAgICAgICAgIHRocm93IChyZXN1bHQubWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG5leHQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChOZXh0UmVxdWVzdChmYWxzZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBza2lwKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoTmV4dFJlcXVlc3QodHJ1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBhcGlBZGQoc29uZzogU29uZykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoQWRkUmVxdWVzdChzb25nKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwbGF5YmFja1Byb3ZpZGVyRXZlbnRzKHNlbGY6IFBsYXliYWNrUHJvdmlkZXIpOiBQbGF5YmFja1NsYXZlRXZlbnRzIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvblBhdXNlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc29uZyB8fCBbUGxheWJhY2tQcm92aWRlci5OT05FLCBzZWxmXS5pbmNsdWRlcyh0aGlzLnNvbmcucHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucHJlZGljdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBvblBsYXk6IChzb25nPzogU29uZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNvbmcpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvbmcucHJvdmlkZXIgIT09IHNlbGYpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zUHJlZGljdGVyLnByZWRpY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5wbGF5KCk7XHJcbiAgICAgICAgICAgIH0sIG9uUG9zaXRpb25DaGFuZ2U6IChwMTogbnVtYmVyLCBwMjogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc29uZykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc29uZy5wcm92aWRlciAhPT0gc2VsZikgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIuc2V0UG9zaXRpb24ocDEsIHAyKTtcclxuICAgICAgICAgICAgfSwgb25OZXh0OiAoKSA9PiB0aGlzLm5leHQoKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRRdWV1ZShwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAoYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChHZXRRdWV1ZVJlcXVlc3QpKS5yZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5zZXRRdWV1ZShyZXN1bHQucXVldWUsIHJlc3VsdC5oaXN0b3J5LCBwbGF5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5ncyh7dm9sdW1lfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldFZvbHVtZUJhbGFuY2Uodm9sdW1lQmFsYW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5ncyh7dm9sdW1lQmFsYW5jZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzZXRTZXR0aW5ncyhzZXR0aW5ncz86IFNldHRpbmdzKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFNldHRpbmdzUmVxdWVzdChzZXR0aW5ncykpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNldHRpbmdzKHJlc3BvbnNlLnJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVNldHRpbmdzKHJlc3VsdDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5zZXR0aW5nc1VwZGF0ZShyZXN1bHQpO1xyXG4gICAgICAgIHRoaXMuc3BvdGlmeS5zZXRWb2x1bWUocmVzdWx0LnZvbHVtZSwgcmVzdWx0LnZvbHVtZUJhbGFuY2UpO1xyXG4gICAgICAgIHRoaXMueW91dHViZS5zZXRWb2x1bWUocmVzdWx0LnZvbHVtZSwgcmVzdWx0LnZvbHVtZUJhbGFuY2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb3NpdGlvblByZWRpY3RlciB7XHJcbiAgICBwdWJsaWMgcHJlZGljdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBsYXN0UG9zaXRpb246IG51bWJlciA9IERhdGUubm93KCk7XHJcbiAgICBwcml2YXRlIGR1cmF0aW9uOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBwb3NpdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBwcmVkaWN0aW9uOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FsbGJhY2s6IChwb3NpdGlvbjogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3QgcHJlZGljdCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcmVkaWN0Tm93KCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocHJlZGljdCwgNTAwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHByZWRpY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UG9zaXRpb24ocG9zaXRpb246IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubGFzdFBvc2l0aW9uID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMucHJlZGljdE5vdygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmVkaWN0Tm93KCkge1xyXG4gICAgICAgIGxldCBwcmVkaWN0aW9uO1xyXG4gICAgICAgIGlmICh0aGlzLmR1cmF0aW9uID09PSAwICYmIHRoaXMucG9zaXRpb24gPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFjaygwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wcmVkaWN0KSBwcmVkaWN0aW9uID0gKHRoaXMucG9zaXRpb24gKyAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFBvc2l0aW9uKSkgLyB0aGlzLmR1cmF0aW9uO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcHJlZGljdGlvbiA9PT0gXCJudW1iZXJcIikgdGhpcy5wcmVkaWN0aW9uID0gcHJlZGljdGlvbiA+IDEgPyAxIDogcHJlZGljdGlvbjtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMucHJlZGljdGlvbik7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgU3BvdGlmeVNlYXJjaCA9ICh0b2tlbjogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBQbGF5YmFja1Byb3ZpZGVyLlNQT1RJRlksXHJcbiAgICAgICAgICAgIHRva2VuLFxyXG4gICAgICAgICAgICBxdWVyeVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgWW91VHViZVNlYXJjaCA9IChxdWVyeTogc3RyaW5nKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBQbGF5YmFja1Byb3ZpZGVyLllPVVRVQkUsXHJcbiAgICAgICAgICAgIHF1ZXJ5XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1Nwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXJ9IGZyb20gXCIuLi9wbGF5YmFjay9TcG90aWZ5UGxheWJhY2tDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcbmltcG9ydCB7U3BvdGlmeVNlYXJjaH0gZnJvbSBcIi4vcmVxdWVzdHMvc2VhcmNoL1Nwb3RpZnlTZWFyY2hcIjtcclxuaW1wb3J0IHtZb3VUdWJlU2VhcmNofSBmcm9tIFwiLi9yZXF1ZXN0cy9zZWFyY2gvWW91VHViZVNlYXJjaFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlYXJjaENvbnRyb2xsZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyLCBwcml2YXRlIHNwb3RpZnk6IFNwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgb25TcG90aWZ5KHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PFNvbmc+PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFNwb3RpZnlTZWFyY2godGhpcy5zcG90aWZ5LnRva2VuLCBxdWVyeSkpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09ICdzdWNjZXNzJykgcmV0dXJuIHJlc3BvbnNlLnJlc3VsdDtcclxuICAgICAgICB0aHJvdyhcIkFuIGVycm9yIG9jY3VycmVkLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgb25Zb3VUdWJlKHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PFNvbmc+PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFlvdVR1YmVTZWFyY2gocXVlcnkpLCA2MDAwKTtcclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAnc3VjY2VzcycpIHJldHVybiByZXNwb25zZS5yZXN1bHQ7XHJcbiAgICAgICAgdGhyb3coXCJBbiBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtUU1JJRXZlbnRzfSBmcm9tIFwiLi4vbW9kZWxzL0V2ZW50c1wiO1xyXG5pbXBvcnQge0luaXRpYWxpemF0aW9uU3RhdHVzfSBmcm9tIFwiLi4vbW9kZWxzL0luaXRpYWxpemF0aW9uU3RhdHVzXCI7XHJcbmltcG9ydCB7QVBJQ29ubmVjdGlvbkNvbnRyb2xsZXIsIEFQSUNvbm5lY3Rpb25TdGF0dXN9IGZyb20gXCIuL2FwaS9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1Nvbmd9IGZyb20gXCIuLi9tb2RlbHMvU29uZ1wiO1xyXG5pbXBvcnQge1Nwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXJ9IGZyb20gXCIuL3Nwb3RpZnkvU3BvdGlmeUF1dGhlbnRpY2F0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1BsYXliYWNrTWFzdGVyQ29udHJvbGxlcn0gZnJvbSBcIi4vcGxheWJhY2svUGxheWJhY2tNYXN0ZXJDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7U2VhcmNoQ29udHJvbGxlcn0gZnJvbSBcIi4vYXBpL1NlYXJjaENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtSZXBvcnRSZXF1ZXN0fSBmcm9tIFwiLi9hcGkvcmVxdWVzdHMvb3RoZXIvUmVwb3J0UmVxdWVzdFwiO1xyXG5pbXBvcnQge1NldHRpbmdzfSBmcm9tIFwiLi4vbW9kZWxzL1NldHRpbmdzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVFNSSUNvbnRyb2xsZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0dXM6IEluaXRpYWxpemF0aW9uU3RhdHVzID0gZGVmYXVsdFN0YXR1cztcclxuICAgIHByaXZhdGUgQVBJOiBBUElDb25uZWN0aW9uQ29udHJvbGxlcjtcclxuICAgIHByaXZhdGUgc3BvdGlmeUF1dGg6IFNwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIHBsYXliYWNrOiBQbGF5YmFja01hc3RlckNvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIGV2ZW50czogVFNSSUV2ZW50cztcclxuICAgIHByaXZhdGUgc2VhcmNoOiBTZWFyY2hDb250cm9sbGVyO1xyXG4gICAgcHVibGljIHJlcG9ydHM6IGFueSA9IHtzcG90aWZ5UmVwb3J0czogW119O1xyXG4gICAgcHJpdmF0ZSBhdXRoZW50aWNhdGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGluaXQoand0OiBzdHJpbmcsIGFwaTogc3RyaW5nLCBldmVudHM6IFRTUklFdmVudHMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IGV2ZW50cztcclxuICAgICAgICBpZiAodGhpcy5BUEkpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5YmFjay5zZXRFdmVudHMoZXZlbnRzKTtcclxuICAgICAgICAgICAgZXZlbnRzLmVuYWJsZVNwb3RpZnlBdXRoKCF0aGlzLmF1dGhlbnRpY2F0ZWQpO1xyXG4gICAgICAgICAgICBldmVudHMuaW5pdGlhbGl6ZWQodGhpcy5zdGF0dXMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuQVBJID0gbmV3IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyKGFwaSwgand0LCB7XHJcbiAgICAgICAgICAgIHN0YXR1c0NoYW5nZWQ6IGFzeW5jIHN0YXR1cyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cy5hcGkgPSBzdGF0dXMgPT09IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMuYXBpKSBhd2FpdCB0aGlzLnNwb3RpZnlBdXRoLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gQVBJQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRRdWV1ZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5YmFjay5zZXRTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wbGF5YmFjayA9IG5ldyBQbGF5YmFja01hc3RlckNvbnRyb2xsZXIodGhpcy5BUEksIHRoaXMuZXZlbnRzLCB0aGlzLnN0YXR1cyk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2ggPSBuZXcgU2VhcmNoQ29udHJvbGxlcih0aGlzLkFQSSwgdGhpcy5wbGF5YmFjay5zcG90aWZ5KTtcclxuICAgICAgICB0aGlzLnNwb3RpZnlBdXRoID0gbmV3IFNwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIodGhpcy5BUEksIHtcclxuICAgICAgICAgICAgc3RhdHVzQ2hhbmdlZDogdGhpcy5zcG90aWZ5U3RhdHVzLFxyXG4gICAgICAgICAgICBzcG90aWZ5QXV0aGVudGljYXRlZDogKGF1dGhlbnRpY2F0ZWQ6IGJvb2xlYW4sIHRva2VuPzogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhlbnRpY2F0ZWQgPSBhdXRoZW50aWNhdGVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lKCkuZW5hYmxlU3BvdGlmeUF1dGgoIWF1dGhlbnRpY2F0ZWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuKSB0aGlzLnBsYXliYWNrLnNwb3RpZnkuaW5pdCh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwb3RpZnlTdGF0dXMoc3RhdHVzOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMuc3BvdGlmeSA9IHN0YXR1cztcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHlvdXR1YmVBcGlSZWFkeSgpIHtcclxuICAgICAgICB0aGlzLnN0YXR1cy55b3V0dWJlQXBpID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwb3RpZnlBcGlSZWFkeSgpIHtcclxuICAgICAgICB0aGlzLnN0YXR1cy5zcG90aWZ5QXBpID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50cykgcmV0dXJuIHRoaXMuZXZlbnRzO1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0RXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFF1ZXVlKHBsYXk6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbGF5YmFjay5sb2FkUXVldWUocGxheSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHJlcG9ydChyZWFzb246IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucmVwb3J0cy5yZWFzb24gPSByZWFzb247XHJcbiAgICAgICAgYXdhaXQgdGhpcy5BUEkucmVxdWVzdHMucmVxdWVzdChSZXBvcnRSZXF1ZXN0KHRoaXMucmVwb3J0cykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0RXZlbnRzOiBUU1JJRXZlbnRzID0ge1xyXG4gICAgc2V0dGluZ3NVcGRhdGU6IGZ1bmN0aW9uIChwMTogU2V0dGluZ3MpIHtcclxuICAgIH0sXHJcbiAgICBxdWV1ZVVwZGF0ZTogZnVuY3Rpb24gKHAxOiBBcnJheTxTb25nPikge1xyXG4gICAgfSxcclxuICAgIGVuYWJsZVNwb3RpZnlBdXRoOiBmdW5jdGlvbiAocDE6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNwb3RpZnkgQXV0aGVudGljYXRpb24gaXMgbm93ICVzLlwiLCAocDEgPyBcImVuYWJsZWRcIiA6IFwiZGlzYWJsZWRcIikpO1xyXG4gICAgfSxcclxuICAgIGluaXRpYWxpemVkOiBmdW5jdGlvbiAocDE6IEluaXRpYWxpemF0aW9uU3RhdHVzKSB7XHJcbiAgICB9LCBwYXVzZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUEFVU0VcIik7XHJcbiAgICB9LCBwbGF5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJQTEFZXCIpXHJcbiAgICB9LCBwb3NpdGlvbjogZnVuY3Rpb24gKHAxOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBPUzogXCIgKyBwMSlcclxuICAgIH0sIHNvbmc6IGZ1bmN0aW9uIChwMTogU29uZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU09ORzogXCIgKyBwMS5uYW1lKVxyXG4gICAgfSwgc3RvcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU1RPUFwiKVxyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgZGVmYXVsdFN0YXR1cyA9IHtcclxuICAgIGFwaTogZmFsc2UsXHJcbiAgICBzcG90aWZ5QXBpOiBmYWxzZSxcclxuICAgIHNwb3RpZnk6IGZhbHNlLFxyXG4gICAgeW91dHViZUFwaTogZmFsc2UsXHJcbiAgICB5b3V0dWJlOiBmYWxzZSxcclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgUmVwb3J0UmVxdWVzdCA9IChyZXBvcnQ6IGFueSk6IElBUElSZXF1ZXN0ID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50c1wiLFxyXG4gICAgICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiBcInJlcG9ydFwiLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiByZXBvcnQubWVzc2FnZSxcclxuICAgICAgICAgICAgcmVwb3J0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge1RTUklDb250cm9sbGVyfSBmcm9tIFwiLi9jb250cm9sbGVycy9UU1JJQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1RTUklXaW5kb3d9IGZyb20gXCIuL21vZGVscy9UU1JJV2luZG93XCI7XHJcblxyXG5jb25zdCBjb250cm9sbGVyOiBUU1JJQ29udHJvbGxlciA9IG5ldyBUU1JJQ29udHJvbGxlcigpO1xyXG5cclxuY29uc3Qgd2luID0gd2luZG93IGFzIFRTUklXaW5kb3c7XHJcbndpbi5UU1JJID0gY29udHJvbGxlcjtcclxud2luLm9uU3BvdGlmeVdlYlBsYXliYWNrU0RLUmVhZHkgPSAoKSA9PiBjb250cm9sbGVyLnNwb3RpZnlBcGlSZWFkeSgpO1xyXG5cclxuY29uc3QgX2dsb2JhbCA9ICh3aW5kb3cgfHwgZ2xvYmFsKSBhcyBhbnk7XHJcbl9nbG9iYWwub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkgPSAoKSA9PiBjb250cm9sbGVyLnlvdXR1YmVBcGlSZWFkeSgpO1xyXG5cclxuLy8gcmVxdWlyZShcIi4uL3Byb3ZpZGVycy9zcG90aWZ5L3Nwb3RpZnktcGxheWJhY2stc2RrXCIpO1xyXG5yZXF1aXJlKFwiLi4vcHJvdmlkZXJzL3lvdXR1YmUveW91dHViZS1pZnJhbWVfYXBpXCIpO1xyXG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJcclxuaWYgKCF3aW5kb3dbJ1lUJ10pIHt2YXIgWVQgPSB7bG9hZGluZzogMCxsb2FkZWQ6IDB9O31pZiAoIXdpbmRvd1snWVRDb25maWcnXSkge3ZhciBZVENvbmZpZyA9IHsnaG9zdCc6ICdodHRwOi8vd3d3LnlvdXR1YmUuY29tJ307fWlmICghWVQubG9hZGluZykge1lULmxvYWRpbmcgPSAxOyhmdW5jdGlvbigpe3ZhciBsID0gW107WVQucmVhZHkgPSBmdW5jdGlvbihmKSB7aWYgKFlULmxvYWRlZCkge2YoKTt9IGVsc2Uge2wucHVzaChmKTt9fTt3aW5kb3cub25ZVFJlYWR5ID0gZnVuY3Rpb24oKSB7WVQubG9hZGVkID0gMTtmb3IgKHZhciBpID0gMDsgaSA8IGwubGVuZ3RoOyBpKyspIHt0cnkge2xbaV0oKTt9IGNhdGNoIChlKSB7fX19O1lULnNldENvbmZpZyA9IGZ1bmN0aW9uKGMpIHtmb3IgKHZhciBrIGluIGMpIHtpZiAoYy5oYXNPd25Qcm9wZXJ0eShrKSkge1lUQ29uZmlnW2tdID0gY1trXTt9fX07dmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTthLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzthLmlkID0gJ3d3dy13aWRnZXRhcGktc2NyaXB0JzthLnNyYyA9ICdodHRwczovL3MueXRpbWcuY29tL3l0cy9qc2Jpbi93d3ctd2lkZ2V0YXBpLXZmbFVGVnlFUC93d3ctd2lkZ2V0YXBpLmpzJzthLmFzeW5jID0gdHJ1ZTt2YXIgYyA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQ7aWYgKGMpIHt2YXIgbiA9IGMubm9uY2UgfHwgYy5nZXRBdHRyaWJ1dGUoJ25vbmNlJyk7aWYgKG4pIHthLnNldEF0dHJpYnV0ZSgnbm9uY2UnLCBuKTt9fXZhciBiID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO2IucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwgYik7fSkoKTt9Il0sInNvdXJjZVJvb3QiOiIifQ==