!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var i,o=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"add",song:t}}},s={topic:"twasi-songrequests/events",scope:"action",action:{type:"queue"}},r=function(t){return void 0===t&&(t=!1),{topic:"twasi-songrequests/events",scope:"action",action:{type:t?"skip":"next"}}},u=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},a=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},c=function(){function t(t,e,n){this.api=t,this.jwt=e,this.statusListener=n,this.events=new Map,this.connect()}return t.prototype.connect=function(){var t=this;setTimeout((function(){t.connect()}),3e3),this.client&&this.client.readyState===this.client.OPEN||(this.client=new WebSocket(this.api),this.client.onerror=function(){t.statusListener.statusChanged(i.DISCONNECTED)},this.client.onopen=function(){return t.authorize()},this.client.onclose=function(){t.statusListener.statusChanged(i.DISCONNECTED)},this.requests=new l(this.client,this.events))},t.prototype.authorize=function(){return u(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return[4,this.requests.request({topic:"auth",scope:"action",action:{type:"JWT_TOKEN",token:this.jwt}})];case 1:return"success"!==(t=n.sent()).status?[3,3]:(e=t.result.user.twitchId,[4,this.requests.request({topic:"twasi-songrequests/events",scope:"subscribe",config:{channel:e}})]);case 2:t=n.sent(),n.label=3;case 3:return this.statusListener.statusChanged("success"===t.status?i.CONNECTED:i.UNAUTHORIZED),[2]}}))}))},t.prototype.on=function(t,e){this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e])},t.prototype.add=function(t){return u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.requests.request(o(t))];case 1:return[2,e.sent()]}}))}))},t.prototype.getQueue=function(){return u(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.requests.request(s)];case 1:return[2,t.sent().result]}}))}))},t.prototype.next=function(t){return void 0===t&&(t=!1),u(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.requests.request(r(t))];case 1:return[2,e.sent()]}}))}))},t}();!function(t){t[t.CONNECTED=0]="CONNECTED",t[t.DISCONNECTED=1]="DISCONNECTED",t[t.UNAUTHORIZED=2]="UNAUTHORIZED"}(i||(i={}));var h,p,l=function(){function t(t,e){var n=this;this.count=0,this.pending=new Map,this.events=new Map,e&&(this.events=e),this.client=t,this.client.onmessage=function(t){var e=JSON.parse(t.data);e.ref&&n.pending.has(e.ref)?(n.pending.get(e.ref)(e.result),n.pending.delete(e.ref)):e.event&&n.events.has(e.event)&&n.events.get(e.event).forEach((function(t){t(e.details,new Date(e.timeStamp))}))}}return t.prototype.request=function(t,e){var n=this;return void 0===e&&(e=3e3),t.ref||(t.ref=this.newRef()),new Promise((function(i,o){n.pending.set(t.ref,i),n.client.send(JSON.stringify(t)),setTimeout((function(){n.pending.has(t.ref)&&(n.pending.delete(t.ref),o("Timed Out"))}),e)}))},t.prototype.on=function(t,e){this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e])},t.prototype.newRef=function(){return(this.count++).toString()},t}(),f={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"get"}},d={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"init"}},y=function(t){return{topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"set",code:t}}},v={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"refresh"}},w={topic:"twasi-songrequests/spotify-credentials",scope:"action",action:{type:"remove"}},b=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},g=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},m=function(){function t(t,e){var n=this;this.token=null,this.expires=null,this.api=t,this.listener=e;window.addEventListener("message",(function(t){return b(n,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return"string"!=typeof t.data?[2]:t.data.startsWith("code:")?[4,this.set(t.data.substr("code:".length))]:[2];case 1:return e.sent(),this.win.postMessage("close","*"),[2]}}))}))}),!1)}return t.prototype.get=function(){return b(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(f)];case 1:return t=e.sent(),this.handle(t.token?t:null),[2]}}))}))},t.prototype.init=function(){return b(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(d)];case 1:return t=e.sent(),this.win=window.open(t.result.uri,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"),[2]}}))}))},t.prototype.set=function(t){return b(this,void 0,void 0,(function(){var e;return g(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(y(t))];case 1:return e=n.sent(),this.handle(e),[2]}}))}))},t.prototype.refresh=function(){return b(this,void 0,void 0,(function(){var t;return g(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(v)];case 1:return t=e.sent(),this.handle(t.token?t:null),[2]}}))}))},t.prototype.remove=function(){return b(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(w)];case 1:if("success"!==t.sent().status)throw"An error occured";return[2]}}))}))},t.prototype.handle=function(t){var e=this;t?(this.token=t.token,this.expires=new Date(t.expires),this.listener.spotifyAuthenticated(!0,t.token),setTimeout((function(){return b(e,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return this.token!==t.token?[2]:[4,this.refresh()];case 1:return e.sent(),[2]}}))}))}),this.expires.getTime()-Date.now())):this.listener.spotifyAuthenticated(!1)},t}(),P=function(t){this.events=t},q=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},E=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},S=function(t){function e(e,n){var i=t.call(this,e)||this;return i.events=e,i.api=n,i}return q(e,t),e.prototype.init=function(t){var e=this;this.player&&this.player.disconnect(),this.token=t;var n=new Spotify.Player({name:"Twasi-Panel",getOAuthToken:function(e){e(t)}});n.addListener("initialization_error",(function(t){var e=t.message;window.TSRI.reports.spotifyReports.push({type:"initialization_error",message:e})})),n.addListener("authentication_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return E(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"authentication_error",message:n}),[2]}))}))})),n.addListener("account_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return E(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"account_error",message:n}),[2]}))}))})),n.addListener("playback_error",(function(t){var n=t.message;return k(e,void 0,void 0,(function(){return E(this,(function(t){return window.TSRI.reports.spotifyReports.push({type:"playback_error",message:n}),[2]}))}))})),n.addListener("player_state_changed",(function(t){return k(e,void 0,void 0,(function(){return E(this,(function(e){return t?(t.position&&t.duration?this.events.onPositionChange(t.position,t.duration):t.paused||this.events.onPositionChange(0,this.song.duration),t.paused?this.events.onPause():this.events.onPlay(this.song),t.paused&&t.disallows.resuming&&t.position&&t.duration&&t.position/t.duration>.98&&this.events.onNext(),[2]):[2]}))}))})),n.addListener("ready",(function(t){var n=t.device_id;e.id=n})),n.addListener("not_ready",(function(t){t.device_id;return k(e,void 0,void 0,(function(){return E(this,(function(t){switch(t.label){case 0:return[4,window.TSRI.spotifyAuth.refresh()];case 1:return t.sent(),[2]}}))}))})),this.player=n,n.connect()},e.prototype.pause=function(){this.player.pause()},e.prototype.play=function(t,e){return k(this,void 0,void 0,(function(){return E(this,(function(e){switch(e.label){case 0:return this.song&&this.song.uri===t.uri?(this.player.resume(),[3,3]):[3,1];case 1:return this.song=t,[4,fetch("https://api.spotify.com/v1/me/player/play?device_id="+this.id,{method:"PUT",body:JSON.stringify({uris:[t.uri]}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token}})];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.seek=function(t){this.player.seek(this.song.duration*t)},e.prototype.setVolume=function(t,e){e-=.5,t=t/10*7.5,t+=.25*(e*=-2);try{this.player.setVolume(t)}catch(t){}},e.prototype.resume=function(){this.player.resume()},e}(P),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),O=function(t){function e(e,n,i){var o=t.call(this,e)||this;if(!i)throw"API_NOT_READY";o.player=new YT.Player("youtube-player",{events:{onStateChange:function(t){return o.onUpdate(t)}}});var s=function(){o.setPos(),setTimeout(s,500)};return s(),o}return T(e,t),e.prototype.setPos=function(){try{this.events.onPositionChange(1e3*this.player.getCurrentTime(),1e3*this.player.getDuration())}catch(t){}},e.prototype.onUpdate=function(t){1===t.data?this.events.onPlay():0===t.data?this.events.onNext():this.events.onPause(),this.setPos()},e.prototype.pause=function(){this.player.pauseVideo()},e.prototype.play=function(t,e){this.player.loadVideoById(t.uri)},e.prototype.seek=function(t){this.player.seekTo(this.player.getDuration()*t)},e.prototype.setVolume=function(t,e){e-=.5,t=t/10*7.5,t+=.25*(e*=2);try{this.player.setVolume(100*t)}catch(t){}},e.prototype.resume=function(){this.player.playVideo()},e}(P);!function(t){t[t.NONE=0]="NONE",t[t.SPOTIFY=1]="SPOTIFY",t[t.YOUTUBE=2]="YOUTUBE"}(p||(p={}));var x={topic:"twasi-songrequests/events",scope:"action",action:{type:"back"}},_=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"settings",settings:t}}},A=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},N=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},C=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var s=arguments[e],r=0,u=s.length;r<u;r++,o++)i[o]=s[r];return i},U=function(){function t(t,e,n){var i=this;this.api=t,this.frontendEvents=e,this.song=null,this.queue=[],this._history=[],this.firstPlayback=!0,this.shouldPlay=!1,this.volume=.6,this.volumeBalance=.5,this.posPredicter=new I((function(t){return i.frontendEvents.position(t)})),this.spotify=new S(this.playbackProviderEvents(p.SPOTIFY),t),this.youtube=new O(this.playbackProviderEvents(p.YOUTUBE),t,n.youtubeApi),t.on("queue",(function(t){return i.setQueue(t.queue,t.history,i.shouldPlay)})),t.on("settings",(function(t){i.settings=t}))}return t.prototype.setEvents=function(t){this.frontendEvents=t,this.shouldPlay?t.play():t.pause();var e=C(this.queue);t.queueUpdate(e,this._history),t.song(this.song),t.settingsUpdate(this.settings)},t.prototype.play=function(t,e){return A(this,void 0,void 0,(function(){var n;return N(this,(function(i){switch(i.label){case 0:return this.shouldPlay=!0,e?(this.song&&this.pause(),this.song=e,(n=this.getController(e.provider)).setVolume(this.volume,this.volumeBalance),n.play(e,t),[3,4]):[3,1];case 1:return this.song?(this.firstPlayback||0===this.posPredicter.prediction?(this.firstPlayback=!1,this.play(!0,this.song)):this.getController(this.song.provider).resume(),[3,4]):[3,2];case 2:return[4,this.next()];case 3:i.sent(),i.label=4;case 4:return this.frontendEvents.song(this.song),this.shouldPlay=!0,[2]}}))}))},t.prototype.pause=function(){this.shouldPlay=!0,this.song&&this.getController(this.song.provider).pause()},t.prototype.getController=function(t){switch(t){case p.NONE:default:return null;case p.SPOTIFY:return this.spotify;case p.YOUTUBE:return this.youtube}},t.prototype.seek=function(t){this.song&&this.getController(this.song.provider).seek(t)},t.prototype.localAdd=function(t){this.queue.push(t),this.frontendEvents.queueUpdate(this.queue,this._history),this.posPredicter.predict||this.play(!1,void 0)},t.prototype.setQueue=function(t,e,n){if(void 0===n&&(n=!0),t.length){var i=t[0];n&&(!this.song||this.song&&this.song.uri!==i.uri)?this.play(!0,i):(this.frontendEvents.song(t[0]),this.song=i)}else this.posPredicter.resetPosition(),this.song&&this.pause(),this.song=null,this.frontendEvents.song(null),this.posPredicter.resetPosition();this.queue=t,this._history=e,this.frontendEvents.queueUpdate(this.queue,this._history)},t.prototype.localNext=function(){this.posPredicter.resetPosition(),this.song&&(this.pause(),this._history.unshift(this.song)),this.queue.length?(this.play(!0,this.queue[0]),this.queue.shift()):(this.song=null,this.frontendEvents.song(null),this.posPredicter.resetPosition()),this.frontendEvents.queueUpdate(this.queue,this._history)},t.prototype.back=function(){return A(this,void 0,void 0,(function(){var t;return N(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(x)];case 1:if("success"!==(t=e.sent()).status)throw t.message;return[2]}}))}))},t.prototype.next=function(){return A(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(r(!1))];case 1:return t.sent(),[2]}}))}))},t.prototype.skip=function(){return A(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.api.requests.request(r(!0))];case 1:return t.sent(),[2]}}))}))},t.prototype.apiAdd=function(t){return A(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.api.requests.request(o(t))];case 1:return e.sent(),[2]}}))}))},t.prototype.playbackProviderEvents=function(t){var e=this;return{onPause:function(){e.song&&![p.NONE,t].includes(e.song.provider)||(e.posPredicter.predict=!1,e.frontendEvents.stop())},onPlay:function(n){e.song&&e.song.provider===t&&(e.posPredicter.predict=!0,e.frontendEvents.play())},onPositionChange:function(n,i){e.song&&e.song.provider===t&&e.posPredicter.setPosition(n,i)},onNext:function(){return e.next()}}},t.prototype.loadQueue=function(t){return void 0===t&&(t=!0),A(this,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(s)];case 1:return e=n.sent().result,this.setQueue(e.queue,e.history,t),[2]}}))}))},t.prototype.setVolume=function(t){return A(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.setSettings({volume:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.setVolumeBalance=function(t){return A(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.setSettings({volumeBalance:t})];case 1:return e.sent(),[2]}}))}))},t.prototype.setSettings=function(t){return A(this,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(_(t))];case 1:return"success"===(e=n.sent()).status&&this.handleSettings(e.result),[2,e]}}))}))},t.prototype.handleSettings=function(t){this.frontendEvents.settingsUpdate(t),this.spotify.setVolume(t.volume,t.volumeBalance),this.youtube.setVolume(t.volume,t.volumeBalance)},t}(),I=function(){function t(t){var e=this;this.callback=t,this.predict=!1,this.lastPosition=Date.now(),this.duration=0,this.position=0,this.prediction=0;var n=function(){e.predictNow(),setTimeout(n,500)};n()}return t.prototype.setPosition=function(t,e){this.lastPosition=Date.now(),this.position=t,this.duration=e,this.predictNow()},t.prototype.resetPosition=function(){this.setPosition(0,0)},t.prototype.predictNow=function(){var t;0!==this.duration||0!==this.position?(this.predict&&(t=(this.position+(Date.now()-this.lastPosition))/this.duration),"number"==typeof t&&(this.prediction=t>1?1:t),this.callback(this.prediction)):this.callback(0)},t}(),D=function(t,e){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"search",provider:p.SPOTIFY,token:t,query:e}}},R=function(t){return{topic:"twasi-songrequests/events",scope:"action",action:{type:"search",provider:p.YOUTUBE,query:t}}},j=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},Y=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},B=function(){function t(t,e){this.api=t,this.spotify=e}return t.prototype.onSpotify=function(t){return j(this,void 0,void 0,(function(){var e;return Y(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(D(this.spotify.token,t))];case 1:if("success"===(e=n.sent()).status)return[2,e.result];throw"An error occurred."}}))}))},t.prototype.onYouTube=function(t){return j(this,void 0,void 0,(function(){var e;return Y(this,(function(n){switch(n.label){case 0:return[4,this.api.requests.request(R(t),6e3)];case 1:if("success"===(e=n.sent()).status)return[2,e.result];throw"An error occurred."}}))}))},t}();n.d(e,"a",(function(){return V}));var z=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function u(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,u)}a((i=i.apply(t,e||[])).next())}))},L=function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},V=function(){function t(){this.status=Q,this.reports={spotifyReports:[]},this.authenticated=!1}return t.prototype.init=function(t,e,n){var o=this;if(this.events=n,this.API)return this.playback.setEvents(n),n.enableSpotifyAuth(!this.authenticated),void n.initialized(this.status);this.API=new c(e,t,{statusChanged:function(t){return z(o,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return this.status.api=0===t,this.e().initialized(this.status),this.status.api?[4,this.spotifyAuth.get()]:[3,2];case 1:e.sent(),e.label=2;case 2:return t!==i.CONNECTED?[3,4]:(this.loadQueue(!1),[4,this.playback.setSettings()]);case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}}),this.playback=new U(this.API,this.events,this.status),this.search=new B(this.API,this.playback.spotify),this.spotifyAuth=new m(this.API,{statusChanged:this.spotifyStatus,spotifyAuthenticated:function(t,e){o.authenticated=t,o.e().enableSpotifyAuth(!t),e&&o.playback.spotify.init(e)}}),this.e().initialized(this.status)},t.prototype.spotifyStatus=function(t){this.status.spotify=t,this.e().initialized(this.status)},t.prototype.youtubeApiReady=function(){this.status.youtubeApi=!0,this.e().initialized(this.status)},t.prototype.spotifyApiReady=function(){this.status.spotifyApi=!0,this.e().initialized(this.status)},t.prototype.e=function(){return this.events?this.events:M},t.prototype.loadQueue=function(t){return void 0===t&&(t=!0),z(this,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return[4,this.playback.loadQueue(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.report=function(t){return z(this,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return this.reports.reason=t,[4,this.API.requests.request((n=this.reports,{topic:"twasi-songrequests/events",scope:"action",action:{type:"report",message:n.message,report:n}}))];case 1:return e.sent(),[2]}var n}))}))},t}(),M={settingsUpdate:function(t){},queueUpdate:function(t){},enableSpotifyAuth:function(t){console.log("Spotify Authentication is now %s.",t?"enabled":"disabled")},initialized:function(t){},pause:function(){console.log("PAUSE")},play:function(){console.log("PLAY")},position:function(t){console.log("POS: "+t)},song:function(t){console.log("SONG: "+t.name)},stop:function(){console.log("STOP")}},Q={api:!1,spotifyApi:!1,spotify:!1,youtubeApi:!1,youtube:!1}},function(t,e,n){"use strict";n.r(e),function(t){var e=new(n(0).a),i=window;i.TSRI=e,i.onSpotifyWebPlaybackSDKReady=function(){return e.spotifyApiReady()},(window||t).onYouTubeIframeAPIReady=function(){return e.youtubeApiReady()},n(4)}.call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,function(t,e){if(!window.YT)var n={loading:0,loaded:0};if(!window.YTConfig)var i={host:"http://www.youtube.com"};n.loading||(n.loading=1,function(){var t=[];n.ready=function(e){n.loaded?e():t.push(e)},window.onYTReady=function(){n.loaded=1;for(var e=0;e<t.length;e++)try{t[e]()}catch(t){}},n.setConfig=function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])};var e=document.createElement("script");e.type="text/javascript",e.id="www-widgetapi-script",e.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflUFVyEP/www-widgetapi.js",e.async=!0;var o=document.currentScript;if(o){var s=o.nonce||o.getAttribute("nonce");s&&e.setAttribute("nonce",s)}var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}())}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQWRkUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc29uZ3JlcXVlc3RzL0dldFF1ZXVlUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9OZXh0UmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1BsYXliYWNrUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzL0dldFJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzL0luaXRSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9TZXRSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9SZWZyZXNoUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3Nwb3RpZnktY3JlZGVudGlhbHMvUmVtb3ZlUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvc3BvdGlmeS9TcG90aWZ5QXV0aGVudGljYXRpb25Db250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9wbGF5YmFjay9QbGF5YmFja1NsYXZlQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvcGxheWJhY2svU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvcGxheWJhY2svWW91dFR1YmVQbGF5YmFja0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQmFja1JlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9yZXF1ZXN0cy9vdGhlci9TZXR0aW5nc1JlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL3BsYXliYWNrL1BsYXliYWNrTWFzdGVyQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL3NlYXJjaC9TcG90aWZ5U2VhcmNoLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9hcGkvcmVxdWVzdHMvc2VhcmNoL1lvdVR1YmVTZWFyY2gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL2FwaS9TZWFyY2hDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9UU1JJQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvYXBpL3JlcXVlc3RzL290aGVyL1JlcG9ydFJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1RTUkkudHMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9wcm92aWRlcnMveW91dHViZS95b3V0dWJlLWlmcmFtZV9hcGkuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJBUElDb25uZWN0aW9uU3RhdHVzIiwiQWRkUmVxdWVzdCIsInNvbmciLCJ0b3BpYyIsInNjb3BlIiwiYWN0aW9uIiwidHlwZSIsIkdldFF1ZXVlUmVxdWVzdCIsIk5leHRSZXF1ZXN0Iiwic2tpcCIsImFwaSIsImp3dCIsInN0YXR1c0xpc3RlbmVyIiwiZXZlbnRzIiwiTWFwIiwidGhpcyIsImNvbm5lY3QiLCJzZXRUaW1lb3V0IiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJXZWJTb2NrZXQiLCJvbmVycm9yIiwic3RhdHVzQ2hhbmdlZCIsIkRJU0NPTk5FQ1RFRCIsIm9ub3BlbiIsImF1dGhvcml6ZSIsIm9uY2xvc2UiLCJyZXF1ZXN0cyIsIkFQSVJlcXVlc3RNYW5hZ2VyIiwicmVxdWVzdCIsInRva2VuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJjaGFubmVsIiwicmVzdWx0IiwidXNlciIsInR3aXRjaElkIiwiY29uZmlnIiwiQ09OTkVDVEVEIiwiVU5BVVRIT1JJWkVEIiwib24iLCJldmVudCIsImhhbmRsZXIiLCJoYXMiLCJwdXNoIiwic2V0IiwiYWRkIiwiZ2V0UXVldWUiLCJuZXh0IiwiUGxheWJhY2tQcm92aWRlciIsImNvdW50IiwicGVuZGluZyIsIm9ubWVzc2FnZSIsIm1zZyIsIm9iIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInJlZiIsImRlbGV0ZSIsImZvckVhY2giLCJkZXRhaWxzIiwiRGF0ZSIsInRpbWVTdGFtcCIsInJlcSIsInRpbWVvdXQiLCJuZXdSZWYiLCJQcm9taXNlIiwicmVzIiwicmVqIiwic2VuZCIsInN0cmluZ2lmeSIsInRvU3RyaW5nIiwiR2V0UmVxdWVzdCIsIkluaXRSZXF1ZXN0IiwiU2V0UmVxdWVzdCIsImNvZGUiLCJSZWZyZXNoUmVxdWVzdCIsIlJlbW92ZVJlcXVlc3QiLCJsaXN0ZW5lciIsImV4cGlyZXMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwic3RhcnRzV2l0aCIsInN1YnN0ciIsImxlbmd0aCIsIndpbiIsInBvc3RNZXNzYWdlIiwiaGFuZGxlIiwiaW5pdCIsIm9wZW4iLCJ1cmkiLCJyZWZyZXNoIiwicmVtb3ZlIiwic3BvdGlmeUF1dGhlbnRpY2F0ZWQiLCJnZXRUaW1lIiwibm93IiwicGxheWVyIiwiZGlzY29ubmVjdCIsIlNwb3RpZnkiLCJQbGF5ZXIiLCJnZXRPQXV0aFRva2VuIiwiY2IiLCJhZGRMaXN0ZW5lciIsIm1lc3NhZ2UiLCJUU1JJIiwicmVwb3J0cyIsInNwb3RpZnlSZXBvcnRzIiwic3RhdGUiLCJwb3NpdGlvbiIsImR1cmF0aW9uIiwib25Qb3NpdGlvbkNoYW5nZSIsInBhdXNlZCIsIm9uUGF1c2UiLCJvblBsYXkiLCJkaXNhbGxvd3MiLCJyZXN1bWluZyIsIm9uTmV4dCIsImRldmljZV9pZCIsImlkIiwic3BvdGlmeUF1dGgiLCJwYXVzZSIsInBsYXkiLCJmb3JjZUJlZ2luIiwicmVzdW1lIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwidXJpcyIsImhlYWRlcnMiLCJzZWVrIiwic2V0Vm9sdW1lIiwidm9sdW1lIiwidm9sdW1lQmFsYW5jZSIsImUiLCJQbGF5YmFja1NsYXZlQ29udHJvbGxlciIsInlvdXR1YmVBcGkiLCJZVCIsIm9uU3RhdGVDaGFuZ2UiLCJvblVwZGF0ZSIsInBlcm1hVXBkYXRlIiwic2V0UG9zIiwiZ2V0Q3VycmVudFRpbWUiLCJnZXREdXJhdGlvbiIsInBhdXNlVmlkZW8iLCJsb2FkVmlkZW9CeUlkIiwic2Vla1RvIiwicGxheVZpZGVvIiwiQmFja1JlcXVlc3QiLCJTZXR0aW5nc1JlcXVlc3QiLCJzZXR0aW5ncyIsImZyb250ZW5kRXZlbnRzIiwicXVldWUiLCJfaGlzdG9yeSIsImZpcnN0UGxheWJhY2siLCJzaG91bGRQbGF5IiwicG9zUHJlZGljdGVyIiwiUG9zaXRpb25QcmVkaWN0ZXIiLCJwb3MiLCJzcG90aWZ5IiwiU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlciIsInBsYXliYWNrUHJvdmlkZXJFdmVudHMiLCJTUE9USUZZIiwieW91dHViZSIsIllvdXRUdWJlUGxheWJhY2tDb250cm9sbGVyIiwiWU9VVFVCRSIsInF1ZXVlVXBkYXRlIiwic2V0UXVldWUiLCJoaXN0b3J5Iiwic2V0RXZlbnRzIiwidGVtcFF1ZXVlIiwic2V0dGluZ3NVcGRhdGUiLCJjb250cm9sbGVyIiwiZ2V0Q29udHJvbGxlciIsInByb3ZpZGVyIiwicHJlZGljdGlvbiIsIk5PTkUiLCJsb2NhbEFkZCIsInByZWRpY3QiLCJ1bmRlZmluZWQiLCJyZXNldFBvc2l0aW9uIiwibG9jYWxOZXh0IiwidW5zaGlmdCIsInNoaWZ0IiwiYmFjayIsImFwaUFkZCIsInNlbGYiLCJpbmNsdWRlcyIsInN0b3AiLCJwMSIsInAyIiwic2V0UG9zaXRpb24iLCJsb2FkUXVldWUiLCJzZXRTZXR0aW5ncyIsInNldFZvbHVtZUJhbGFuY2UiLCJoYW5kbGVTZXR0aW5ncyIsImNhbGxiYWNrIiwibGFzdFBvc2l0aW9uIiwicHJlZGljdE5vdyIsIlNwb3RpZnlTZWFyY2giLCJxdWVyeSIsIllvdVR1YmVTZWFyY2giLCJvblNwb3RpZnkiLCJvbllvdVR1YmUiLCJhdXRoZW50aWNhdGVkIiwiQVBJIiwicGxheWJhY2siLCJlbmFibGVTcG90aWZ5QXV0aCIsImluaXRpYWxpemVkIiwic2VhcmNoIiwic3BvdGlmeVN0YXR1cyIsInlvdXR1YmVBcGlSZWFkeSIsInNwb3RpZnlBcGlSZWFkeSIsInNwb3RpZnlBcGkiLCJkZWZhdWx0RXZlbnRzIiwicmVwb3J0IiwicmVhc29uIiwiY29uc29sZSIsImxvZyIsIm9uU3BvdGlmeVdlYlBsYXliYWNrU0RLUmVhZHkiLCJnbG9iYWwiLCJvbllvdVR1YmVJZnJhbWVBUElSZWFkeSIsImciLCJGdW5jdGlvbiIsImxvYWRpbmciLCJsb2FkZWQiLCJZVENvbmZpZyIsInJlYWR5IiwiZiIsIm9uWVRSZWFkeSIsInNldENvbmZpZyIsImsiLCJhIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiYXN5bmMiLCJjdXJyZW50U2NyaXB0Iiwibm9uY2UiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJiIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFB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SyxHQUFLblEsRUFBRW1RLEtBQU8sSUFBSUMsRUFBSUMsU0FBU0MsY0FBYyxVQUFVRixFQUFFbk8sS0FBTyxrQkFBa0JtTyxFQUFFakgsR0FBSyx1QkFBdUJpSCxFQUFFRyxJQUFNLHlFQUF5RUgsRUFBRUksT0FBUSxFQUFLLElBQUl4USxFQUFJcVEsU0FBU0ksY0FBYyxHQUFJelEsRUFBRyxDQUFDLElBQUlvQixFQUFJcEIsRUFBRTBRLE9BQVMxUSxFQUFFMlEsYUFBYSxTQUFhdlAsR0FBSWdQLEVBQUVRLGFBQWEsUUFBU3hQLEdBQUssSUFBSXlQLEVBQUlSLFNBQVNTLHFCQUFxQixVQUFVLEdBQUdELEVBQUVFLFdBQVdDLGFBQWFaLEVBQUdTLEdBQTlxQiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtTb25nfSBmcm9tIFwiLi4vLi4vLi4vLi4vbW9kZWxzL1NvbmdcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBBZGRSZXF1ZXN0ID0gKHNvbmc6IFNvbmcpOiBJQVBJUmVxdWVzdCA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9ldmVudHNcIixcclxuICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICBhY3Rpb246IHtcclxuICAgICAgICAgICAgdHlwZTogXCJhZGRcIixcclxuICAgICAgICAgICAgc29uZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtTb25nfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1NvbmdcIjtcclxuaW1wb3J0IHtBZGRSZXF1ZXN0fSBmcm9tIFwiLi9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQWRkUmVxdWVzdFwiO1xyXG5pbXBvcnQge0dldFF1ZXVlUmVxdWVzdH0gZnJvbSBcIi4vcmVxdWVzdHMvc29uZ3JlcXVlc3RzL0dldFF1ZXVlUmVxdWVzdFwiO1xyXG5pbXBvcnQge05leHRSZXF1ZXN0fSBmcm9tIFwiLi9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvTmV4dFJlcXVlc3RcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBUElDb25uZWN0aW9uQ29udHJvbGxlciB7XHJcbiAgICBwdWJsaWMgcmVxdWVzdHM6IEFQSVJlcXVlc3RNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBldmVudHM6IE1hcDxzdHJpbmcsIEFycmF5PChkZXRhaWxzOiBhbnksIHRpbWVTdGFtcDogRGF0ZSkgPT4gdm9pZD4+ID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIHByaXZhdGUgY2xpZW50OiBXZWJTb2NrZXQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBhcGk6IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIGp3dDogc3RyaW5nLFxyXG4gICAgICAgIHByaXZhdGUgc3RhdHVzTGlzdGVuZXI6IEFQSUNvbm5lY3Rpb25TdGF0dXNMaXN0ZW5lclxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb25uZWN0KCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3QoKTtcclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICBpZiAodGhpcy5jbGllbnQgJiYgdGhpcy5jbGllbnQucmVhZHlTdGF0ZSA9PT0gdGhpcy5jbGllbnQuT1BFTikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IFdlYlNvY2tldCh0aGlzLmFwaSk7XHJcbiAgICAgICAgdGhpcy5jbGllbnQub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaXN0ZW5lci5zdGF0dXNDaGFuZ2VkKEFQSUNvbm5lY3Rpb25TdGF0dXMuRElTQ09OTkVDVEVEKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY2xpZW50Lm9ub3BlbiA9ICgpID0+IHRoaXMuYXV0aG9yaXplKCk7XHJcbiAgICAgICAgdGhpcy5jbGllbnQub25jbG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaXN0ZW5lci5zdGF0dXNDaGFuZ2VkKEFQSUNvbm5lY3Rpb25TdGF0dXMuRElTQ09OTkVDVEVEKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVxdWVzdHMgPSBuZXcgQVBJUmVxdWVzdE1hbmFnZXIodGhpcy5jbGllbnQsIHRoaXMuZXZlbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGF1dGhvcml6ZSgpIHtcclxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3RzLnJlcXVlc3Qoe1xyXG4gICAgICAgICAgICB0b3BpYzogJ2F1dGgnLFxyXG4gICAgICAgICAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgICAgICAgICAgYWN0aW9uOiB7dHlwZTogJ0pXVF9UT0tFTicsIHRva2VuOiB0aGlzLmp3dH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAnc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgbGV0IGNoYW5uZWwgPSByZXNwb25zZS5yZXN1bHQudXNlci50d2l0Y2hJZDtcclxuICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3RzLnJlcXVlc3Qoe1xyXG4gICAgICAgICAgICAgICAgdG9waWM6ICd0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiBcInN1YnNjcmliZVwiLFxyXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7Y2hhbm5lbH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdGF0dXNMaXN0ZW5lci5zdGF0dXNDaGFuZ2VkKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnID8gQVBJQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQgOiBBUElDb25uZWN0aW9uU3RhdHVzLlVOQVVUSE9SSVpFRCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IChkZXRhaWxzOiBhbnksIHRpbWVTdGFtcDogRGF0ZSkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHMuaGFzKGV2ZW50KSkgdGhpcy5ldmVudHMuc2V0KGV2ZW50LCBbaGFuZGxlcl0pO1xyXG4gICAgICAgIGVsc2UgdGhpcy5ldmVudHMuZ2V0KGV2ZW50KS5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBhZGQoc29uZzogU29uZykge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlcXVlc3RzLnJlcXVlc3QoQWRkUmVxdWVzdChzb25nKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFF1ZXVlKCkge1xyXG4gICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KEdldFF1ZXVlUmVxdWVzdCkpLnJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbmV4dChza2lwOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZXF1ZXN0cy5yZXF1ZXN0KE5leHRSZXF1ZXN0KHNraXApKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gQVBJQ29ubmVjdGlvblN0YXR1cyB7XHJcbiAgICBDT05ORUNURUQsIERJU0NPTk5FQ1RFRCwgVU5BVVRIT1JJWkVEXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQVBJQ29ubmVjdGlvblN0YXR1c0xpc3RlbmVyIHtcclxuICAgIHN0YXR1c0NoYW5nZWQ6IChzdGF0dXM6IEFQSUNvbm5lY3Rpb25TdGF0dXMpID0+IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQVBJUmVxdWVzdCB7XHJcbiAgICByZWY/OiBzdHJpbmc7XHJcbiAgICB0b3BpYzogc3RyaW5nO1xyXG4gICAgc2NvcGU6ICdhY3Rpb24nIHwgJ3N1YnNjcmliZSc7XHJcbiAgICBhY3Rpb24/OiBhbnk7XHJcbiAgICBjb25maWc/OiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBUElSZXF1ZXN0TWFuYWdlciB7XHJcbiAgICBwcml2YXRlIGNvdW50OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBwZW5kaW5nOiBNYXA8c3RyaW5nLCAocmVzPzogYW55KSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgZXZlbnRzOiBNYXA8c3RyaW5nLCBBcnJheTwoZGV0YWlsczogYW55LCB0aW1lU3RhbXA6IERhdGUpID0+IHZvaWQ+PiA9IG5ldyBNYXAoKTtcclxuICAgIHByaXZhdGUgY2xpZW50OiBXZWJTb2NrZXQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY2xpZW50OiBXZWJTb2NrZXQsIGV2ZW50cz86IE1hcDxzdHJpbmcsIEFycmF5PChkZXRhaWxzOiBhbnksIHRpbWVTdGFtcDogRGF0ZSkgPT4gdm9pZD4+KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50cykgdGhpcy5ldmVudHMgPSBldmVudHM7XHJcbiAgICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XHJcbiAgICAgICAgdGhpcy5jbGllbnQub25tZXNzYWdlID0gKG1zZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvYiA9IEpTT04ucGFyc2UobXNnLmRhdGEpIGFzIGFueTtcclxuICAgICAgICAgICAgaWYgKG9iLnJlZiAmJiB0aGlzLnBlbmRpbmcuaGFzKG9iLnJlZikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZy5nZXQob2IucmVmKShvYi5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nLmRlbGV0ZShvYi5yZWYpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iLmV2ZW50ICYmIHRoaXMuZXZlbnRzLmhhcyhvYi5ldmVudCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmdldChvYi5ldmVudCkuZm9yRWFjaChoYW5kbGVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKG9iLmRldGFpbHMsIG5ldyBEYXRlKG9iLnRpbWVTdGFtcCkpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVxdWVzdChyZXE6IElBUElSZXF1ZXN0LCB0aW1lb3V0OiBudW1iZXIgPSAzMDAwKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAoIXJlcS5yZWYpIHJlcS5yZWYgPSB0aGlzLm5ld1JlZigpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXM6IChyZXM6IGFueSkgPT4gdm9pZCwgcmVqOiAoZXJyPzogYW55KSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZy5zZXQocmVxLnJlZiwgcmVzKTtcclxuICAgICAgICAgICAgdGhpcy5jbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeShyZXEpKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVuZGluZy5oYXMocmVxLnJlZikpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZy5kZWxldGUocmVxLnJlZik7XHJcbiAgICAgICAgICAgICAgICByZWooXCJUaW1lZCBPdXRcIik7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IChkZXRhaWxzOiBhbnksIHRpbWVTdGFtcDogRGF0ZSkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHMuaGFzKGV2ZW50KSkgdGhpcy5ldmVudHMuc2V0KGV2ZW50LCBbaGFuZGxlcl0pO1xyXG4gICAgICAgIGVsc2UgdGhpcy5ldmVudHMuZ2V0KGV2ZW50KS5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbmV3UmVmKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmNvdW50KyspLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgR2V0UXVldWVSZXF1ZXN0OiBJQVBJUmVxdWVzdCA9IHtcclxuICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9ldmVudHNcIixcclxuICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgYWN0aW9uOiB7XHJcbiAgICAgICAgdHlwZTogXCJxdWV1ZVwiXHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IE5leHRSZXF1ZXN0ID0gKHNraXA6IGJvb2xlYW4gPSBmYWxzZSk6IElBUElSZXF1ZXN0ID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50c1wiLFxyXG4gICAgICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiBza2lwID8gXCJza2lwXCIgOiBcIm5leHRcIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiZXhwb3J0IGVudW0gUGxheWJhY2tQcm92aWRlciB7XHJcbiAgICBOT05FLCBTUE9USUZZLCBZT1VUVUJFXHJcbn1cclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgR2V0UmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFsc1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcImdldFwiXHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEluaXRSZXF1ZXN0OiBJQVBJUmVxdWVzdCA9IHtcclxuICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzXCIsXHJcbiAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgIGFjdGlvbjoge1xyXG4gICAgICAgIHR5cGU6IFwiaW5pdFwiXHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7SUFQSVJlcXVlc3R9IGZyb20gXCIuLi8uLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNldFJlcXVlc3Q6IChjb2RlOiBzdHJpbmcpID0+IElBUElSZXF1ZXN0ID0gKGNvZGU6IHN0cmluZykgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFsc1wiLFxyXG4gICAgICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiBcInNldFwiLFxyXG4gICAgICAgICAgICBjb2RlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBSZWZyZXNoUmVxdWVzdDogSUFQSVJlcXVlc3QgPSB7XHJcbiAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFsc1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcInJlZnJlc2hcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBSZW1vdmVSZXF1ZXN0OiBJQVBJUmVxdWVzdCA9IHtcclxuICAgIHRvcGljOiBcInR3YXNpLXNvbmdyZXF1ZXN0cy9zcG90aWZ5LWNyZWRlbnRpYWxzXCIsXHJcbiAgICBzY29wZTogXCJhY3Rpb25cIixcclxuICAgIGFjdGlvbjoge1xyXG4gICAgICAgIHR5cGU6IFwicmVtb3ZlXCJcclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtBUElDb25uZWN0aW9uQ29udHJvbGxlcn0gZnJvbSBcIi4uL2FwaS9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge0dldFJlcXVlc3R9IGZyb20gXCIuLi9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9HZXRSZXF1ZXN0XCI7XHJcbmltcG9ydCB7SW5pdFJlcXVlc3R9IGZyb20gXCIuLi9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9Jbml0UmVxdWVzdFwiO1xyXG5pbXBvcnQge1NldFJlcXVlc3R9IGZyb20gXCIuLi9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9TZXRSZXF1ZXN0XCI7XHJcbmltcG9ydCB7UmVmcmVzaFJlcXVlc3R9IGZyb20gXCIuLi9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9SZWZyZXNoUmVxdWVzdFwiO1xyXG5pbXBvcnQge1JlbW92ZVJlcXVlc3R9IGZyb20gXCIuLi9hcGkvcmVxdWVzdHMvc3BvdGlmeS1jcmVkZW50aWFscy9SZW1vdmVSZXF1ZXN0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BvdGlmeUF1dGhlbnRpY2F0aW9uQ29udHJvbGxlciB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGFwaTogQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxpc3RlbmVyOiBJU3BvdGlmeUF1dGhlbnRpY2F0aW9uTGlzdGVuZXI7XHJcblxyXG4gICAgcHJpdmF0ZSB0b2tlbjogc3RyaW5nID0gbnVsbDtcclxuICAgIHByaXZhdGUgZXhwaXJlczogRGF0ZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIHdpbjogV2luZG93O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwaTogQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXIsIGxpc3RlbmVyOiBJU3BvdGlmeUF1dGhlbnRpY2F0aW9uTGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFwaSA9IGFwaTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVyID0gbGlzdGVuZXI7XHJcbiAgICAgICAgY29uc3QgcmVjZWl2ZUNvZGUgPSBhc3luYyAoZXZlbnQ6IE1lc3NhZ2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoISh0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIikpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKCEoZXZlbnQuZGF0YSBhcyBzdHJpbmcpLnN0YXJ0c1dpdGgoXCJjb2RlOlwiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldChldmVudC5kYXRhLnN1YnN0cihcImNvZGU6XCIubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIHRoaXMud2luLnBvc3RNZXNzYWdlKFwiY2xvc2VcIiwgXCIqXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHJlY2VpdmVDb2RlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldCgpIHtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KEdldFJlcXVlc3QpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlKHJlcy50b2tlbiA/IHJlcyA6IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbml0KCkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoSW5pdFJlcXVlc3QpO1xyXG4gICAgICAgIHRoaXMud2luID0gd2luZG93Lm9wZW4ocmVzLnJlc3VsdC51cmksIFwicG9wVXBXaW5kb3dcIiwgJ2hlaWdodD01MDAsd2lkdGg9NDAwLGxlZnQ9MTAwLHRvcD0xMDAscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyx0b29sYmFyPXllcyxtZW51YmFyPW5vLGxvY2F0aW9uPW5vLGRpcmVjdG9yaWVzPW5vLCBzdGF0dXM9eWVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBzZXQoY29kZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChTZXRSZXF1ZXN0KGNvZGUpKTtcclxuICAgICAgICB0aGlzLmhhbmRsZShyZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZWZyZXNoKCkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoUmVmcmVzaFJlcXVlc3QpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlKHJlcy50b2tlbiA/IHJlcyA6IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZW1vdmUoKSB7XHJcbiAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFJlbW92ZVJlcXVlc3QpKS5zdGF0dXMgIT09ICdzdWNjZXNzJylcclxuICAgICAgICAgICAgdGhyb3coXCJBbiBlcnJvciBvY2N1cmVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlKHJlczogeyB0b2tlbjogc3RyaW5nLCBleHBpcmVzOiBudW1iZXIgfSB8IG51bGwpIHtcclxuICAgICAgICBpZiAoIXJlcykgdGhpcy5saXN0ZW5lci5zcG90aWZ5QXV0aGVudGljYXRlZChmYWxzZSk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW4gPSByZXMudG9rZW47XHJcbiAgICAgICAgICAgIHRoaXMuZXhwaXJlcyA9IG5ldyBEYXRlKHJlcy5leHBpcmVzKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lci5zcG90aWZ5QXV0aGVudGljYXRlZCh0cnVlLCByZXMudG9rZW4pO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRva2VuICE9PSByZXMudG9rZW4pIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB9LCB0aGlzLmV4cGlyZXMuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTcG90aWZ5QXV0aGVudGljYXRpb25MaXN0ZW5lciB7XHJcbiAgICBzdGF0dXNDaGFuZ2VkOiAobmV3U3RhdHVzOiBib29sZWFuKSA9PiB2b2lkLFxyXG4gICAgc3BvdGlmeUF1dGhlbnRpY2F0ZWQ6IChhdXRoZW50aWNhdGVkOiBib29sZWFuLCB0b2tlbj86IHN0cmluZykgPT4gdm9pZFxyXG59XHJcbiIsImltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIGFic3RyYWN0IHBhdXNlKCk6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHBsYXkoc29uZzogU29uZywgZm9yY2VCZWdpbjogYm9vbGVhbik6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHNlZWsocG9zaXRpb246IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IHNldFZvbHVtZSh2b2x1bWU6IG51bWJlciwgdm9sdW1lQmFsYW5jZTogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgcmVzdW1lKCk6IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGV2ZW50czogUGxheWJhY2tTbGF2ZUV2ZW50cykge1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBsYXliYWNrU2xhdmVFdmVudHMge1xyXG4gICAgb25QbGF5OiAoc29uZz86IFNvbmcpID0+IHZvaWQ7XHJcbiAgICBvblBhdXNlOiAoKSA9PiB2b2lkO1xyXG4gICAgb25Qb3NpdGlvbkNoYW5nZTogKHBvczogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyKSA9PiB2b2lkO1xyXG4gICAgb25OZXh0OiAoKSA9PiB2b2lkO1xyXG59XHJcbiIsImltcG9ydCB7QVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJ9IGZyb20gXCIuLi9hcGkvQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtTb25nfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1NvbmdcIjtcclxuaW1wb3J0IHtQbGF5YmFja1NsYXZlQ29udHJvbGxlciwgUGxheWJhY2tTbGF2ZUV2ZW50c30gZnJvbSBcIi4vUGxheWJhY2tTbGF2ZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtUU1JJV2luZG93fSBmcm9tIFwiLi4vLi4vbW9kZWxzL1RTUklXaW5kb3dcIjtcclxuXHJcbmRlY2xhcmUgY29uc3QgU3BvdGlmeTogYW55O1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXIgZXh0ZW5kcyBQbGF5YmFja1NsYXZlQ29udHJvbGxlciB7XHJcbiAgICBwcml2YXRlIHBsYXllcjogYW55O1xyXG4gICAgcHJpdmF0ZSBzb25nOiBTb25nO1xyXG4gICAgcHJpdmF0ZSBpZDogc3RyaW5nO1xyXG4gICAgdG9rZW46IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgZXZlbnRzOiBQbGF5YmFja1NsYXZlRXZlbnRzLCBwcml2YXRlIGFwaTogQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXIpIHtcclxuICAgICAgICBzdXBlcihldmVudHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0KHRva2VuOiBzdHJpbmcpIHtcclxuICAgICAgICBpZiAodGhpcy5wbGF5ZXIpIHRoaXMucGxheWVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47XHJcbiAgICAgICAgY29uc3QgcGxheWVyID0gbmV3IFNwb3RpZnkuUGxheWVyKHtcclxuICAgICAgICAgICAgbmFtZTogJ1R3YXNpLVBhbmVsJyxcclxuICAgICAgICAgICAgZ2V0T0F1dGhUb2tlbjogKGNiOiAodG9rZW46IHN0cmluZykgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2IodG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gRXJyb3IgaGFuZGxpbmdcclxuICAgICAgICBwbGF5ZXIuYWRkTGlzdGVuZXIoJ2luaXRpYWxpemF0aW9uX2Vycm9yJywgKHttZXNzYWdlfTogeyBtZXNzYWdlOiBzdHJpbmcgfSkgPT4ge1xyXG4gICAgICAgICAgICAod2luZG93IGFzIFRTUklXaW5kb3cpLlRTUkkucmVwb3J0cy5zcG90aWZ5UmVwb3J0cy5wdXNoKHt0eXBlOiAnaW5pdGlhbGl6YXRpb25fZXJyb3InLCBtZXNzYWdlfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZExpc3RlbmVyKCdhdXRoZW50aWNhdGlvbl9lcnJvcicsIGFzeW5jICh7bWVzc2FnZX06IHsgbWVzc2FnZTogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICAgICAgKHdpbmRvdyBhcyBUU1JJV2luZG93KS5UU1JJLnJlcG9ydHMuc3BvdGlmeVJlcG9ydHMucHVzaCh7dHlwZTogJ2F1dGhlbnRpY2F0aW9uX2Vycm9yJywgbWVzc2FnZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBsYXllci5hZGRMaXN0ZW5lcignYWNjb3VudF9lcnJvcicsIGFzeW5jICh7bWVzc2FnZX06IHsgbWVzc2FnZTogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICAgICAgKHdpbmRvdyBhcyBUU1JJV2luZG93KS5UU1JJLnJlcG9ydHMuc3BvdGlmeVJlcG9ydHMucHVzaCh7dHlwZTogJ2FjY291bnRfZXJyb3InLCBtZXNzYWdlfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGxheWVyLmFkZExpc3RlbmVyKCdwbGF5YmFja19lcnJvcicsIGFzeW5jICh7bWVzc2FnZX06IHsgbWVzc2FnZTogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICAgICAgKHdpbmRvdyBhcyBUU1JJV2luZG93KS5UU1JJLnJlcG9ydHMuc3BvdGlmeVJlcG9ydHMucHVzaCh7dHlwZTogJ3BsYXliYWNrX2Vycm9yJywgbWVzc2FnZX0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQbGF5YmFjayBzdGF0dXMgdXBkYXRlc1xyXG4gICAgICAgIHBsYXllci5hZGRMaXN0ZW5lcigncGxheWVyX3N0YXRlX2NoYW5nZWQnLCBhc3luYyAoc3RhdGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXN0YXRlKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZS5wb3NpdGlvbiAmJiBzdGF0ZS5kdXJhdGlvbilcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uUG9zaXRpb25DaGFuZ2Uoc3RhdGUucG9zaXRpb24sIHN0YXRlLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoIXN0YXRlLnBhdXNlZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uUG9zaXRpb25DaGFuZ2UoMCwgdGhpcy5zb25nLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgaWYgKHN0YXRlLnBhdXNlZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uUGF1c2UoKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLmV2ZW50cy5vblBsYXkodGhpcy5zb25nKTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgc3RhdGUucGF1c2VkICYmIHN0YXRlLmRpc2FsbG93cy5yZXN1bWluZ1xyXG4gICAgICAgICAgICAgICAgJiYgc3RhdGUucG9zaXRpb24gJiYgc3RhdGUuZHVyYXRpb25cclxuICAgICAgICAgICAgICAgICYmIChzdGF0ZS5wb3NpdGlvbiAvIHN0YXRlLmR1cmF0aW9uID4gMC45OClcclxuICAgICAgICAgICAgKSB0aGlzLmV2ZW50cy5vbk5leHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUmVhZHlcclxuICAgICAgICBwbGF5ZXIuYWRkTGlzdGVuZXIoJ3JlYWR5JywgKHtkZXZpY2VfaWR9OiB7IGRldmljZV9pZDogc3RyaW5nIH0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pZCA9IGRldmljZV9pZDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTm90IFJlYWR5XHJcbiAgICAgICAgcGxheWVyLmFkZExpc3RlbmVyKCdub3RfcmVhZHknLCBhc3luYyAoe2RldmljZV9pZH06IHsgZGV2aWNlX2lkOiBzdHJpbmcgfSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIGF3YWl0ICh3aW5kb3cgYXMgVFNSSVdpbmRvdykuVFNSSS5zcG90aWZ5QXV0aC5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgcGxheWVyLmNvbm5lY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5wYXVzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHBsYXkoc29uZzogU29uZywgZm9yY2VCZWdpbjogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNvbmcgJiYgdGhpcy5zb25nLnVyaSA9PT0gc29uZy51cmkpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIucmVzdW1lKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zb25nID0gc29uZztcclxuICAgICAgICAgICAgYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL21lL3BsYXllci9wbGF5P2RldmljZV9pZD0ke3RoaXMuaWR9YCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt1cmlzOiBbc29uZy51cmldfSksXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLnRva2VufWBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZWVrKHBvc2l0aW9uOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5zZWVrKHRoaXMuc29uZy5kdXJhdGlvbiAqIHBvc2l0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWb2x1bWUodm9sdW1lOiBudW1iZXIsIHZvbHVtZUJhbGFuY2U6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHZvbHVtZUJhbGFuY2UgLT0gLjU7XHJcbiAgICAgICAgdm9sdW1lQmFsYW5jZSAqPSAtMjtcclxuICAgICAgICB2b2x1bWUgPSB2b2x1bWUgLyAxMCAqIDcuNTtcclxuICAgICAgICB2b2x1bWUgKz0gdm9sdW1lQmFsYW5jZSAqIC4yNTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5zZXRWb2x1bWUodm9sdW1lKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc3VtZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5yZXN1bWUoKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtQbGF5YmFja1NsYXZlQ29udHJvbGxlciwgUGxheWJhY2tTbGF2ZUV2ZW50c30gZnJvbSBcIi4vUGxheWJhY2tTbGF2ZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtTb25nfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1NvbmdcIjtcclxuaW1wb3J0IHtBUElDb25uZWN0aW9uQ29udHJvbGxlcn0gZnJvbSBcIi4uL2FwaS9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFlvdXRUdWJlUGxheWJhY2tDb250cm9sbGVyIGV4dGVuZHMgUGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHBsYXllcjogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50czogUGxheWJhY2tTbGF2ZUV2ZW50cywgYXBpOiBBUElDb25uZWN0aW9uQ29udHJvbGxlciwgeW91dHViZUFwaTogYm9vbGVhbikge1xyXG4gICAgICAgIHN1cGVyKGV2ZW50cyk7XHJcbiAgICAgICAgaWYgKCF5b3V0dWJlQXBpKSB0aHJvdyAoXCJBUElfTk9UX1JFQURZXCIpO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBZVC5QbGF5ZXIoJ3lvdXR1YmUtcGxheWVyJywge1xyXG4gICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgIG9uU3RhdGVDaGFuZ2U6IChldmVudDogYW55KSA9PiB0aGlzLm9uVXBkYXRlKGV2ZW50KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgcGVybWFVcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zKCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocGVybWFVcGRhdGUsIDUwMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwZXJtYVVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0UG9zKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uUG9zaXRpb25DaGFuZ2UodGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKSAqIDEwMDAsIHRoaXMucGxheWVyLmdldER1cmF0aW9uKCkgKiAxMDAwKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25VcGRhdGUoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGlmIChldmVudC5kYXRhID09PSAxKSB0aGlzLmV2ZW50cy5vblBsYXkoKTtcclxuICAgICAgICBlbHNlIGlmIChldmVudC5kYXRhID09PSAwKSB0aGlzLmV2ZW50cy5vbk5leHQoKTtcclxuICAgICAgICBlbHNlIHRoaXMuZXZlbnRzLm9uUGF1c2UoKTtcclxuICAgICAgICB0aGlzLnNldFBvcygpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwYXVzZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5wYXVzZVZpZGVvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGxheShzb25nOiBTb25nLCBmb3JjZUJlZ2luOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIubG9hZFZpZGVvQnlJZChzb25nLnVyaSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2Vlayhwb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIuc2Vla1RvKHRoaXMucGxheWVyLmdldER1cmF0aW9uKCkgKiBwb3NpdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyLCB2b2x1bWVCYWxhbmNlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB2b2x1bWVCYWxhbmNlIC09IC41O1xyXG4gICAgICAgIHZvbHVtZUJhbGFuY2UgKj0gMjtcclxuICAgICAgICB2b2x1bWUgPSB2b2x1bWUgLyAxMCAqIDcuNTtcclxuICAgICAgICB2b2x1bWUgKz0gdm9sdW1lQmFsYW5jZSAqIC4yNTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5zZXRWb2x1bWUodm9sdW1lICogMTAwKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc3VtZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQmFja1JlcXVlc3Q6IElBUElSZXF1ZXN0ID0ge1xyXG4gICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50c1wiLFxyXG4gICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICBhY3Rpb246IHtcclxuICAgICAgICB0eXBlOiBcImJhY2tcIlxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0lBUElSZXF1ZXN0fSBmcm9tIFwiLi4vLi4vQVBJQ29ubmVjdGlvbkNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtTZXR0aW5nc30gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9TZXR0aW5nc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNldHRpbmdzUmVxdWVzdCA9IChzZXR0aW5ncz86IFNldHRpbmdzKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwic2V0dGluZ3NcIixcclxuICAgICAgICAgICAgc2V0dGluZ3NcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbiIsImltcG9ydCB7U3BvdGlmeVBsYXliYWNrQ29udHJvbGxlcn0gZnJvbSBcIi4vU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1lvdXRUdWJlUGxheWJhY2tDb250cm9sbGVyfSBmcm9tIFwiLi9Zb3V0VHViZVBsYXliYWNrQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi4vYXBpL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcbmltcG9ydCB7UGxheWJhY2tTbGF2ZUNvbnRyb2xsZXIsIFBsYXliYWNrU2xhdmVFdmVudHN9IGZyb20gXCIuL1BsYXliYWNrU2xhdmVDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7VFNSSUV2ZW50c30gZnJvbSBcIi4uLy4uL21vZGVscy9FdmVudHNcIjtcclxuaW1wb3J0IHtJbml0aWFsaXphdGlvblN0YXR1c30gZnJvbSBcIi4uLy4uL21vZGVscy9Jbml0aWFsaXphdGlvblN0YXR1c1wiO1xyXG5pbXBvcnQge0JhY2tSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9CYWNrUmVxdWVzdFwiO1xyXG5pbXBvcnQge05leHRSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL3NvbmdyZXF1ZXN0cy9OZXh0UmVxdWVzdFwiO1xyXG5pbXBvcnQge0dldFF1ZXVlUmVxdWVzdH0gZnJvbSBcIi4uL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvR2V0UXVldWVSZXF1ZXN0XCI7XHJcbmltcG9ydCB7QWRkUmVxdWVzdH0gZnJvbSBcIi4uL2FwaS9yZXF1ZXN0cy9zb25ncmVxdWVzdHMvQWRkUmVxdWVzdFwiO1xyXG5pbXBvcnQge1NldHRpbmdzfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1NldHRpbmdzXCI7XHJcbmltcG9ydCB7U2V0dGluZ3NSZXF1ZXN0fSBmcm9tIFwiLi4vYXBpL3JlcXVlc3RzL290aGVyL1NldHRpbmdzUmVxdWVzdFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXliYWNrTWFzdGVyQ29udHJvbGxlciB7XHJcbiAgICBwcml2YXRlIHNvbmc6IFNvbmcgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBxdWV1ZTogQXJyYXk8U29uZz4gPSBbXTtcclxuICAgIHByaXZhdGUgX2hpc3Rvcnk6IEFycmF5PFNvbmc+ID0gW107XHJcbiAgICBwcml2YXRlIGZpcnN0UGxheWJhY2s6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIHByaXZhdGUgcG9zUHJlZGljdGVyOiBQb3NpdGlvblByZWRpY3RlcjtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgc3BvdGlmeTogU3BvdGlmeVBsYXliYWNrQ29udHJvbGxlcjtcclxuICAgIHB1YmxpYyByZWFkb25seSB5b3V0dWJlOiBZb3V0VHViZVBsYXliYWNrQ29udHJvbGxlcjtcclxuICAgIHByaXZhdGUgc2hvdWxkUGxheTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nczogU2V0dGluZ3M7XHJcblxyXG4gICAgcHJpdmF0ZSB2b2x1bWU6IG51bWJlciA9IDAuNjtcclxuICAgIHByaXZhdGUgdm9sdW1lQmFsYW5jZTogbnVtYmVyID0gMC41O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBpOiBBUElDb25uZWN0aW9uQ29udHJvbGxlciwgcHJpdmF0ZSBmcm9udGVuZEV2ZW50czogVFNSSUV2ZW50cywgc3RhdHVzOiBJbml0aWFsaXphdGlvblN0YXR1cykge1xyXG4gICAgICAgIHRoaXMucG9zUHJlZGljdGVyID0gbmV3IFBvc2l0aW9uUHJlZGljdGVyKHBvcyA9PiB0aGlzLmZyb250ZW5kRXZlbnRzLnBvc2l0aW9uKHBvcykpO1xyXG4gICAgICAgIHRoaXMuc3BvdGlmeSA9IG5ldyBTcG90aWZ5UGxheWJhY2tDb250cm9sbGVyKHRoaXMucGxheWJhY2tQcm92aWRlckV2ZW50cyhQbGF5YmFja1Byb3ZpZGVyLlNQT1RJRlkpLCBhcGkpO1xyXG4gICAgICAgIHRoaXMueW91dHViZSA9IG5ldyBZb3V0VHViZVBsYXliYWNrQ29udHJvbGxlcih0aGlzLnBsYXliYWNrUHJvdmlkZXJFdmVudHMoUGxheWJhY2tQcm92aWRlci5ZT1VUVUJFKSwgYXBpLCBzdGF0dXMueW91dHViZUFwaSk7XHJcbiAgICAgICAgYXBpLm9uKFwicXVldWVcIiwgKHF1ZXVlVXBkYXRlKSA9PiB0aGlzLnNldFF1ZXVlKHF1ZXVlVXBkYXRlLnF1ZXVlLCBxdWV1ZVVwZGF0ZS5oaXN0b3J5LCB0aGlzLnNob3VsZFBsYXkpKTtcclxuICAgICAgICBhcGkub24oXCJzZXR0aW5nc1wiLCAoc2V0dGluZ3MpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRFdmVudHMoZXZlbnRzOiBUU1JJRXZlbnRzKSB7XHJcbiAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cyA9IGV2ZW50cztcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRQbGF5KSBldmVudHMucGxheSgpO1xyXG4gICAgICAgIGVsc2UgZXZlbnRzLnBhdXNlKCk7XHJcbiAgICAgICAgbGV0IHRlbXBRdWV1ZSA9IFsuLi50aGlzLnF1ZXVlXTtcclxuICAgICAgICBldmVudHMucXVldWVVcGRhdGUodGVtcFF1ZXVlLCB0aGlzLl9oaXN0b3J5KTtcclxuICAgICAgICBldmVudHMuc29uZyh0aGlzLnNvbmcpO1xyXG4gICAgICAgIGV2ZW50cy5zZXR0aW5nc1VwZGF0ZSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgcGxheShmb3JjZUJlZ2luOiBib29sZWFuLCBzb25nPzogU29uZykge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICAgICAgaWYgKHNvbmcpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc29uZykgdGhpcy5wYXVzZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNvbmcgPSBzb25nO1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5nZXRDb250cm9sbGVyKHNvbmcucHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLnNldFZvbHVtZSh0aGlzLnZvbHVtZSwgdGhpcy52b2x1bWVCYWxhbmNlKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci5wbGF5KHNvbmcsIGZvcmNlQmVnaW4pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zb25nKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maXJzdFBsYXliYWNrICYmIHRoaXMucG9zUHJlZGljdGVyLnByZWRpY3Rpb24gIT09IDApXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldENvbnRyb2xsZXIodGhpcy5zb25nLnByb3ZpZGVyKS5yZXN1bWUoKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UGxheWJhY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheSh0cnVlLCB0aGlzLnNvbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGF3YWl0IHRoaXMubmV4dCgpO1xyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyh0aGlzLnNvbmcpO1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBhdXNlKCkge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkUGxheSA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc29uZykgdGhpcy5nZXRDb250cm9sbGVyKHRoaXMuc29uZy5wcm92aWRlcikucGF1c2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldENvbnRyb2xsZXIocHJvdmlkZXI6IFBsYXliYWNrUHJvdmlkZXIpOiBQbGF5YmFja1NsYXZlQ29udHJvbGxlciB7XHJcbiAgICAgICAgc3dpdGNoIChwcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrUHJvdmlkZXIuTk9ORTpcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICBjYXNlIFBsYXliYWNrUHJvdmlkZXIuU1BPVElGWTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwb3RpZnk7XHJcbiAgICAgICAgICAgIGNhc2UgUGxheWJhY2tQcm92aWRlci5ZT1VUVUJFOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueW91dHViZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlZWsocG9zaXRpb246IG51bWJlcikge1xyXG4gICAgICAgIGlmICh0aGlzLnNvbmcpIHRoaXMuZ2V0Q29udHJvbGxlcih0aGlzLnNvbmcucHJvdmlkZXIpLnNlZWsocG9zaXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBsb2NhbEFkZChzb25nOiBTb25nKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHNvbmcpO1xyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMucXVldWVVcGRhdGUodGhpcy5xdWV1ZSwgdGhpcy5faGlzdG9yeSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBvc1ByZWRpY3Rlci5wcmVkaWN0KSB0aGlzLnBsYXkoZmFsc2UsIHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFF1ZXVlKHF1ZXVlOiBBcnJheTxTb25nPiwgaGlzdG9yeTogQXJyYXk8U29uZz4sIHBsYXk6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBzb25nID0gcXVldWVbMF07XHJcbiAgICAgICAgICAgIGlmIChwbGF5ICYmICghdGhpcy5zb25nIHx8ICh0aGlzLnNvbmcgJiYgdGhpcy5zb25nLnVyaSAhPT0gc29uZy51cmkpKSkgdGhpcy5wbGF5KHRydWUsIHNvbmcpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyhxdWV1ZVswXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNvbmcgPSBzb25nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zb25nKSB0aGlzLnBhdXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc29uZyA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc29uZyhudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucmVzZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3Rvcnk7XHJcbiAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5xdWV1ZVVwZGF0ZSh0aGlzLnF1ZXVlLCB0aGlzLl9oaXN0b3J5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9jYWxOZXh0KCkge1xyXG4gICAgICAgIHRoaXMucG9zUHJlZGljdGVyLnJlc2V0UG9zaXRpb24oKTtcclxuICAgICAgICBpZiAodGhpcy5zb25nKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcclxuICAgICAgICAgICAgdGhpcy5faGlzdG9yeS51bnNoaWZ0KHRoaXMuc29uZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5xdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zb25nID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5zb25nKG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLnBvc1ByZWRpY3Rlci5yZXNldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5KHRydWUsIHRoaXMucXVldWVbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMucXVldWVVcGRhdGUodGhpcy5xdWV1ZSwgdGhpcy5faGlzdG9yeSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGJhY2soKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoQmFja1JlcXVlc3QpO1xyXG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzICE9PSAnc3VjY2VzcycpXHJcbiAgICAgICAgICAgIHRocm93IChyZXN1bHQubWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG5leHQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChOZXh0UmVxdWVzdChmYWxzZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBza2lwKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoTmV4dFJlcXVlc3QodHJ1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBhcGlBZGQoc29uZzogU29uZykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXBpLnJlcXVlc3RzLnJlcXVlc3QoQWRkUmVxdWVzdChzb25nKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwbGF5YmFja1Byb3ZpZGVyRXZlbnRzKHNlbGY6IFBsYXliYWNrUHJvdmlkZXIpOiBQbGF5YmFja1NsYXZlRXZlbnRzIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvblBhdXNlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc29uZyB8fCBbUGxheWJhY2tQcm92aWRlci5OT05FLCBzZWxmXS5pbmNsdWRlcyh0aGlzLnNvbmcucHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIucHJlZGljdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRlbmRFdmVudHMuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBvblBsYXk6IChzb25nPzogU29uZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNvbmcpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvbmcucHJvdmlkZXIgIT09IHNlbGYpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zUHJlZGljdGVyLnByZWRpY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5wbGF5KCk7XHJcbiAgICAgICAgICAgIH0sIG9uUG9zaXRpb25DaGFuZ2U6IChwMTogbnVtYmVyLCBwMjogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc29uZykgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc29uZy5wcm92aWRlciAhPT0gc2VsZikgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NQcmVkaWN0ZXIuc2V0UG9zaXRpb24ocDEsIHAyKTtcclxuICAgICAgICAgICAgfSwgb25OZXh0OiAoKSA9PiB0aGlzLm5leHQoKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWRRdWV1ZShwbGF5OiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAoYXdhaXQgdGhpcy5hcGkucmVxdWVzdHMucmVxdWVzdChHZXRRdWV1ZVJlcXVlc3QpKS5yZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5zZXRRdWV1ZShyZXN1bHQucXVldWUsIHJlc3VsdC5oaXN0b3J5LCBwbGF5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0Vm9sdW1lKHZvbHVtZTogbnVtYmVyKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5ncyh7dm9sdW1lfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNldFZvbHVtZUJhbGFuY2Uodm9sdW1lQmFsYW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5ncyh7dm9sdW1lQmFsYW5jZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzZXRTZXR0aW5ncyhzZXR0aW5ncz86IFNldHRpbmdzKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFNldHRpbmdzUmVxdWVzdChzZXR0aW5ncykpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVNldHRpbmdzKHJlc3BvbnNlLnJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVNldHRpbmdzKHJlc3VsdDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5mcm9udGVuZEV2ZW50cy5zZXR0aW5nc1VwZGF0ZShyZXN1bHQpO1xyXG4gICAgICAgIHRoaXMuc3BvdGlmeS5zZXRWb2x1bWUocmVzdWx0LnZvbHVtZSwgcmVzdWx0LnZvbHVtZUJhbGFuY2UpO1xyXG4gICAgICAgIHRoaXMueW91dHViZS5zZXRWb2x1bWUocmVzdWx0LnZvbHVtZSwgcmVzdWx0LnZvbHVtZUJhbGFuY2UpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQb3NpdGlvblByZWRpY3RlciB7XHJcbiAgICBwdWJsaWMgcHJlZGljdDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBsYXN0UG9zaXRpb246IG51bWJlciA9IERhdGUubm93KCk7XHJcbiAgICBwcml2YXRlIGR1cmF0aW9uOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBwb3NpdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBwcmVkaWN0aW9uOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FsbGJhY2s6IChwb3NpdGlvbjogbnVtYmVyKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgY29uc3QgcHJlZGljdCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcmVkaWN0Tm93KCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocHJlZGljdCwgNTAwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHByZWRpY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UG9zaXRpb24ocG9zaXRpb246IG51bWJlciwgZHVyYXRpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubGFzdFBvc2l0aW9uID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMucHJlZGljdE5vdygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNldFBvc2l0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oMCwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmVkaWN0Tm93KCkge1xyXG4gICAgICAgIGxldCBwcmVkaWN0aW9uO1xyXG4gICAgICAgIGlmICh0aGlzLmR1cmF0aW9uID09PSAwICYmIHRoaXMucG9zaXRpb24gPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFjaygwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wcmVkaWN0KSBwcmVkaWN0aW9uID0gKHRoaXMucG9zaXRpb24gKyAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFBvc2l0aW9uKSkgLyB0aGlzLmR1cmF0aW9uO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcHJlZGljdGlvbiA9PT0gXCJudW1iZXJcIikgdGhpcy5wcmVkaWN0aW9uID0gcHJlZGljdGlvbiA+IDEgPyAxIDogcHJlZGljdGlvbjtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMucHJlZGljdGlvbik7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgU3BvdGlmeVNlYXJjaCA9ICh0b2tlbjogc3RyaW5nLCBxdWVyeTogc3RyaW5nKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBQbGF5YmFja1Byb3ZpZGVyLlNQT1RJRlksXHJcbiAgICAgICAgICAgIHRva2VuLFxyXG4gICAgICAgICAgICBxdWVyeVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uLy4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgWW91VHViZVNlYXJjaCA9IChxdWVyeTogc3RyaW5nKTogSUFQSVJlcXVlc3QgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b3BpYzogXCJ0d2FzaS1zb25ncmVxdWVzdHMvZXZlbnRzXCIsXHJcbiAgICAgICAgc2NvcGU6IFwiYWN0aW9uXCIsXHJcbiAgICAgICAgYWN0aW9uOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwic2VhcmNoXCIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBQbGF5YmFja1Byb3ZpZGVyLllPVVRVQkUsXHJcbiAgICAgICAgICAgIHF1ZXJ5XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge0FQSUNvbm5lY3Rpb25Db250cm9sbGVyfSBmcm9tIFwiLi9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1Nwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXJ9IGZyb20gXCIuLi9wbGF5YmFjay9TcG90aWZ5UGxheWJhY2tDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7U29uZ30gZnJvbSBcIi4uLy4uL21vZGVscy9Tb25nXCI7XHJcbmltcG9ydCB7UGxheWJhY2tQcm92aWRlcn0gZnJvbSBcIi4uLy4uL21vZGVscy9QbGF5YmFja1Byb3ZpZGVyXCI7XHJcbmltcG9ydCB7U3BvdGlmeVNlYXJjaH0gZnJvbSBcIi4vcmVxdWVzdHMvc2VhcmNoL1Nwb3RpZnlTZWFyY2hcIjtcclxuaW1wb3J0IHtZb3VUdWJlU2VhcmNofSBmcm9tIFwiLi9yZXF1ZXN0cy9zZWFyY2gvWW91VHViZVNlYXJjaFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlYXJjaENvbnRyb2xsZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcGk6IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyLCBwcml2YXRlIHNwb3RpZnk6IFNwb3RpZnlQbGF5YmFja0NvbnRyb2xsZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgb25TcG90aWZ5KHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PFNvbmc+PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFNwb3RpZnlTZWFyY2godGhpcy5zcG90aWZ5LnRva2VuLCBxdWVyeSkpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09ICdzdWNjZXNzJykgcmV0dXJuIHJlc3BvbnNlLnJlc3VsdDtcclxuICAgICAgICB0aHJvdyhcIkFuIGVycm9yIG9jY3VycmVkLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgb25Zb3VUdWJlKHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PFNvbmc+PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaS5yZXF1ZXN0cy5yZXF1ZXN0KFlvdVR1YmVTZWFyY2gocXVlcnkpLCA2MDAwKTtcclxuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAnc3VjY2VzcycpIHJldHVybiByZXNwb25zZS5yZXN1bHQ7XHJcbiAgICAgICAgdGhyb3coXCJBbiBlcnJvciBvY2N1cnJlZC5cIik7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtUU1JJRXZlbnRzfSBmcm9tIFwiLi4vbW9kZWxzL0V2ZW50c1wiO1xyXG5pbXBvcnQge0luaXRpYWxpemF0aW9uU3RhdHVzfSBmcm9tIFwiLi4vbW9kZWxzL0luaXRpYWxpemF0aW9uU3RhdHVzXCI7XHJcbmltcG9ydCB7QVBJQ29ubmVjdGlvbkNvbnRyb2xsZXIsIEFQSUNvbm5lY3Rpb25TdGF0dXN9IGZyb20gXCIuL2FwaS9BUElDb25uZWN0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1Nvbmd9IGZyb20gXCIuLi9tb2RlbHMvU29uZ1wiO1xyXG5pbXBvcnQge1Nwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXJ9IGZyb20gXCIuL3Nwb3RpZnkvU3BvdGlmeUF1dGhlbnRpY2F0aW9uQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1BsYXliYWNrTWFzdGVyQ29udHJvbGxlcn0gZnJvbSBcIi4vcGxheWJhY2svUGxheWJhY2tNYXN0ZXJDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7U2VhcmNoQ29udHJvbGxlcn0gZnJvbSBcIi4vYXBpL1NlYXJjaENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHtSZXBvcnRSZXF1ZXN0fSBmcm9tIFwiLi9hcGkvcmVxdWVzdHMvb3RoZXIvUmVwb3J0UmVxdWVzdFwiO1xyXG5pbXBvcnQge1NldHRpbmdzfSBmcm9tIFwiLi4vbW9kZWxzL1NldHRpbmdzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVFNSSUNvbnRyb2xsZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0dXM6IEluaXRpYWxpemF0aW9uU3RhdHVzID0gZGVmYXVsdFN0YXR1cztcclxuICAgIHByaXZhdGUgQVBJOiBBUElDb25uZWN0aW9uQ29udHJvbGxlcjtcclxuICAgIHByaXZhdGUgc3BvdGlmeUF1dGg6IFNwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIHBsYXliYWNrOiBQbGF5YmFja01hc3RlckNvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIGV2ZW50czogVFNSSUV2ZW50cztcclxuICAgIHByaXZhdGUgc2VhcmNoOiBTZWFyY2hDb250cm9sbGVyO1xyXG4gICAgcHVibGljIHJlcG9ydHM6IGFueSA9IHtzcG90aWZ5UmVwb3J0czogW119O1xyXG4gICAgcHJpdmF0ZSBhdXRoZW50aWNhdGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGluaXQoand0OiBzdHJpbmcsIGFwaTogc3RyaW5nLCBldmVudHM6IFRTUklFdmVudHMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cyA9IGV2ZW50cztcclxuICAgICAgICBpZiAodGhpcy5BUEkpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5YmFjay5zZXRFdmVudHMoZXZlbnRzKTtcclxuICAgICAgICAgICAgZXZlbnRzLmVuYWJsZVNwb3RpZnlBdXRoKCF0aGlzLmF1dGhlbnRpY2F0ZWQpO1xyXG4gICAgICAgICAgICBldmVudHMuaW5pdGlhbGl6ZWQodGhpcy5zdGF0dXMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuQVBJID0gbmV3IEFQSUNvbm5lY3Rpb25Db250cm9sbGVyKGFwaSwgand0LCB7XHJcbiAgICAgICAgICAgIHN0YXR1c0NoYW5nZWQ6IGFzeW5jIHN0YXR1cyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cy5hcGkgPSBzdGF0dXMgPT09IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMuYXBpKSBhd2FpdCB0aGlzLnNwb3RpZnlBdXRoLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gQVBJQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRRdWV1ZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbGF5YmFjay5zZXRTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wbGF5YmFjayA9IG5ldyBQbGF5YmFja01hc3RlckNvbnRyb2xsZXIodGhpcy5BUEksIHRoaXMuZXZlbnRzLCB0aGlzLnN0YXR1cyk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2ggPSBuZXcgU2VhcmNoQ29udHJvbGxlcih0aGlzLkFQSSwgdGhpcy5wbGF5YmFjay5zcG90aWZ5KTtcclxuICAgICAgICB0aGlzLnNwb3RpZnlBdXRoID0gbmV3IFNwb3RpZnlBdXRoZW50aWNhdGlvbkNvbnRyb2xsZXIodGhpcy5BUEksIHtcclxuICAgICAgICAgICAgc3RhdHVzQ2hhbmdlZDogdGhpcy5zcG90aWZ5U3RhdHVzLFxyXG4gICAgICAgICAgICBzcG90aWZ5QXV0aGVudGljYXRlZDogKGF1dGhlbnRpY2F0ZWQ6IGJvb2xlYW4sIHRva2VuPzogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhlbnRpY2F0ZWQgPSBhdXRoZW50aWNhdGVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lKCkuZW5hYmxlU3BvdGlmeUF1dGgoIWF1dGhlbnRpY2F0ZWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuKSB0aGlzLnBsYXliYWNrLnNwb3RpZnkuaW5pdCh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwb3RpZnlTdGF0dXMoc3RhdHVzOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMuc3BvdGlmeSA9IHN0YXR1cztcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHlvdXR1YmVBcGlSZWFkeSgpIHtcclxuICAgICAgICB0aGlzLnN0YXR1cy55b3V0dWJlQXBpID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNwb3RpZnlBcGlSZWFkeSgpIHtcclxuICAgICAgICB0aGlzLnN0YXR1cy5zcG90aWZ5QXBpID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmUoKS5pbml0aWFsaXplZCh0aGlzLnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50cykgcmV0dXJuIHRoaXMuZXZlbnRzO1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0RXZlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFF1ZXVlKHBsYXk6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbGF5YmFjay5sb2FkUXVldWUocGxheSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHJlcG9ydChyZWFzb246IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucmVwb3J0cy5yZWFzb24gPSByZWFzb247XHJcbiAgICAgICAgYXdhaXQgdGhpcy5BUEkucmVxdWVzdHMucmVxdWVzdChSZXBvcnRSZXF1ZXN0KHRoaXMucmVwb3J0cykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0RXZlbnRzOiBUU1JJRXZlbnRzID0ge1xyXG4gICAgc2V0dGluZ3NVcGRhdGU6IGZ1bmN0aW9uIChwMTogU2V0dGluZ3MpIHtcclxuICAgIH0sXHJcbiAgICBxdWV1ZVVwZGF0ZTogZnVuY3Rpb24gKHAxOiBBcnJheTxTb25nPikge1xyXG4gICAgfSxcclxuICAgIGVuYWJsZVNwb3RpZnlBdXRoOiBmdW5jdGlvbiAocDE6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNwb3RpZnkgQXV0aGVudGljYXRpb24gaXMgbm93ICVzLlwiLCAocDEgPyBcImVuYWJsZWRcIiA6IFwiZGlzYWJsZWRcIikpO1xyXG4gICAgfSxcclxuICAgIGluaXRpYWxpemVkOiBmdW5jdGlvbiAocDE6IEluaXRpYWxpemF0aW9uU3RhdHVzKSB7XHJcbiAgICB9LCBwYXVzZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUEFVU0VcIik7XHJcbiAgICB9LCBwbGF5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJQTEFZXCIpXHJcbiAgICB9LCBwb3NpdGlvbjogZnVuY3Rpb24gKHAxOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBPUzogXCIgKyBwMSlcclxuICAgIH0sIHNvbmc6IGZ1bmN0aW9uIChwMTogU29uZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU09ORzogXCIgKyBwMS5uYW1lKVxyXG4gICAgfSwgc3RvcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU1RPUFwiKVxyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgZGVmYXVsdFN0YXR1cyA9IHtcclxuICAgIGFwaTogZmFsc2UsXHJcbiAgICBzcG90aWZ5QXBpOiBmYWxzZSxcclxuICAgIHNwb3RpZnk6IGZhbHNlLFxyXG4gICAgeW91dHViZUFwaTogZmFsc2UsXHJcbiAgICB5b3V0dWJlOiBmYWxzZSxcclxufTtcclxuIiwiaW1wb3J0IHtJQVBJUmVxdWVzdH0gZnJvbSBcIi4uLy4uL0FQSUNvbm5lY3Rpb25Db250cm9sbGVyXCI7XHJcblxyXG5leHBvcnQgY29uc3QgUmVwb3J0UmVxdWVzdCA9IChyZXBvcnQ6IGFueSk6IElBUElSZXF1ZXN0ID0+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9waWM6IFwidHdhc2ktc29uZ3JlcXVlc3RzL2V2ZW50c1wiLFxyXG4gICAgICAgIHNjb3BlOiBcImFjdGlvblwiLFxyXG4gICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiBcInJlcG9ydFwiLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiByZXBvcnQubWVzc2FnZSxcclxuICAgICAgICAgICAgcmVwb3J0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4iLCJpbXBvcnQge1RTUklDb250cm9sbGVyfSBmcm9tIFwiLi9jb250cm9sbGVycy9UU1JJQ29udHJvbGxlclwiO1xyXG5pbXBvcnQge1RTUklXaW5kb3d9IGZyb20gXCIuL21vZGVscy9UU1JJV2luZG93XCI7XHJcblxyXG5jb25zdCBjb250cm9sbGVyOiBUU1JJQ29udHJvbGxlciA9IG5ldyBUU1JJQ29udHJvbGxlcigpO1xyXG5cclxuY29uc3Qgd2luID0gd2luZG93IGFzIFRTUklXaW5kb3c7XHJcbndpbi5UU1JJID0gY29udHJvbGxlcjtcclxud2luLm9uU3BvdGlmeVdlYlBsYXliYWNrU0RLUmVhZHkgPSAoKSA9PiBjb250cm9sbGVyLnNwb3RpZnlBcGlSZWFkeSgpO1xyXG5cclxuY29uc3QgX2dsb2JhbCA9ICh3aW5kb3cgfHwgZ2xvYmFsKSBhcyBhbnk7XHJcbl9nbG9iYWwub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkgPSAoKSA9PiBjb250cm9sbGVyLnlvdXR1YmVBcGlSZWFkeSgpO1xyXG5cclxuLy8gcmVxdWlyZShcIi4uL3Byb3ZpZGVycy9zcG90aWZ5L3Nwb3RpZnktcGxheWJhY2stc2RrXCIpO1xyXG5yZXF1aXJlKFwiLi4vcHJvdmlkZXJzL3lvdXR1YmUveW91dHViZS1pZnJhbWVfYXBpXCIpO1xyXG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJcclxuaWYgKCF3aW5kb3dbJ1lUJ10pIHt2YXIgWVQgPSB7bG9hZGluZzogMCxsb2FkZWQ6IDB9O31pZiAoIXdpbmRvd1snWVRDb25maWcnXSkge3ZhciBZVENvbmZpZyA9IHsnaG9zdCc6ICdodHRwOi8vd3d3LnlvdXR1YmUuY29tJ307fWlmICghWVQubG9hZGluZykge1lULmxvYWRpbmcgPSAxOyhmdW5jdGlvbigpe3ZhciBsID0gW107WVQucmVhZHkgPSBmdW5jdGlvbihmKSB7aWYgKFlULmxvYWRlZCkge2YoKTt9IGVsc2Uge2wucHVzaChmKTt9fTt3aW5kb3cub25ZVFJlYWR5ID0gZnVuY3Rpb24oKSB7WVQubG9hZGVkID0gMTtmb3IgKHZhciBpID0gMDsgaSA8IGwubGVuZ3RoOyBpKyspIHt0cnkge2xbaV0oKTt9IGNhdGNoIChlKSB7fX19O1lULnNldENvbmZpZyA9IGZ1bmN0aW9uKGMpIHtmb3IgKHZhciBrIGluIGMpIHtpZiAoYy5oYXNPd25Qcm9wZXJ0eShrKSkge1lUQ29uZmlnW2tdID0gY1trXTt9fX07dmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTthLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzthLmlkID0gJ3d3dy13aWRnZXRhcGktc2NyaXB0JzthLnNyYyA9ICdodHRwczovL3MueXRpbWcuY29tL3l0cy9qc2Jpbi93d3ctd2lkZ2V0YXBpLXZmbFVGVnlFUC93d3ctd2lkZ2V0YXBpLmpzJzthLmFzeW5jID0gdHJ1ZTt2YXIgYyA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQ7aWYgKGMpIHt2YXIgbiA9IGMubm9uY2UgfHwgYy5nZXRBdHRyaWJ1dGUoJ25vbmNlJyk7aWYgKG4pIHthLnNldEF0dHJpYnV0ZSgnbm9uY2UnLCBuKTt9fXZhciBiID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO2IucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwgYik7fSkoKTt9Il0sInNvdXJjZVJvb3QiOiIifQ==